{
    "0.1.1": {
        "info": {
            "author": "Phoenix Grey",
            "author_email": "phoenix.grey0108@gmail.com",
            "bugtrack_url": null,
            "classifiers": [
                "Programming Language :: Python :: 3",
                "Programming Language :: Python :: 3.8",
                "Programming Language :: Python :: 3.9"
            ],
            "description": "# \u5b89\u88c5\n```\npip3 install bilibili-storytree\n```\n\n# \u5b9e\u4f8b\n\u67e5\u770b`tests/test_story_graph.py` \u5176\u4e2d\u6709\u591a\u4e2a\u4f8b\u5b50\u548c\u6ce8\u91ca\n\n# \u80cc\u666f\u77e5\u8bc6 \n\n### B \u7ad9\u5236\u4f5c\u4ea4\u4e92\u89c6\u9891\u7684\u6b65\u9aa4\uff1a\n\n* 1\u3001\u4e0a\u4f20\u5206\u6279\u89c6\u9891\n* 2\u3001\u63d0\u4ea4\u5267\u60c5\u6811\n\n### \u6545\u4e8b\u6811 StoryGraph\n\n\u63d0\u4ea4\u7684\u5267\u60c5\u6811\u7ed3\u6784\u4e3a\n\n```\ndata = {\n  \"graph\": {\n    \"script\": {\n      \"nodes\": {}, # dict, \u8282\u70b9\uff0c\u5305\u62ec\u4e86 videoNode, gotoNode \u8fd9\u4e24\u7c7b\n      \"links\": {}, # dict, node \u4e4b\u95f4\u8fde\u7ebf\uff0c\u5305\u62ec\u4e86 flowLink, refLink\n      \"hasGoto\": True, # bool, \u662f\u5426\u5305\u542b\u4e86\u8df3\u8f6c\u6a21\u5757(B \u7ad9\u6545\u4e8b\u6811 concept) \n      \"editorVersion\": \"1.4.6\",\n      \"createdTime\": round(time.time()*1000), # int, \u53d6\u73b0\u5728\u65f6\u95f4\uff0c\u6beb\u79d2\n      \"currentThemeId\": 0, # int, \u9ed8\u8ba4\u4e3b\u9898\u6837\u5f0f\n      \"enableVariables\": False, # bool, \u4f7f\u7528\u5230\u6545\u4e8b\u6811\u7684\u9ad8\u7ea7\u529f\u80fd\u4e3a True\n      \"variables\": [] # list[dict], \u521d\u59cb\u5316\u65f6\u6709\u503c\uff0c\u4f46\u662f\u5982\u679c\u5267\u60c5\u6811\u6ca1\u6709\u7528\u5230\u9ad8\u7ea7\u529f\u80fd\uff0c\u5c31\u6ca1\u5565\u7528\n    }, # \u63cf\u8ff0\u5982\u4f55\u7ed8\u5236\u5267\u60c5\u6811\n    \"nodes\": {}, # \u6700\u7ec8\u8282\u70b9\n    \"aid\": \"\", # int, \u89c6\u9891 aid\n    \"skin_id\": 0, # int, \u6ca1\u4ec0\u4e48\u7279\u522b\u9700\u6c42\uff0c\u5c31\u9ed8\u8ba4\u6837\u5f0f\n    \"regional_vars\": [], # list[dict], \u4f7f\u7528\u5267\u60c5\u6811\u9ad8\u7ea7\u529f\u80fd\u7684\u65f6\u5019, \u4f1a\u6709\u5177\u4f53\u5185\u5bb9\n  }\n}\n```\n### \u89e3\u91ca `data[\"graph\"][\"script\"][\"nodes\"]` \n* \u53c2\u8003 [B \u7ad9\u5267\u60c5\u6811\u6982\u5ff5](https://www.bilibili.com/video/BV1n4411F7tm)\n\n* `data[\"graph\"][\"script\"][\"nodes\"]` \u7c7b\u578b\u4e3a `dict`, `key` \u662f `n-[10 characters]`, `value` \u662f\n`dict`, \u5982\u4e0b\n\n```\nscript_node_info = {\n  \"id\": id, # 'n-[10 characters]'\n  \"type\": node_type, # videoNode\uff1a\u5267\u60c5\u5206\u652f\u6a21\u5757, gotoNode\uff1a\u8df3\u8f6c\u5206\u652f\u6a21\u5757\n  \"data\": data, # \u8282\u70b9\u7684\u5185\u5bb9\u4fe1\u606f, \u5176\u4ed6\u7684\u53c2\u6570\u53ef\u4ee5\u88ab\u7406\u89e3\u4e3a\u8282\u70b9\u7684\u7ed3\u6784\u4fe1\u606f\n  \"isRoot\": isRoot, # \u662f\u5426\u662f\u8d77\u59cb\u8282\u70b9\n  \"input\": flowInput or [], # \u54ea\u4e9b flowLink \u8fdb\u4e86\u8fd9\u4e2a\u8282\u70b9\n  \"output\": flowOutput or [], # \u54ea\u4e9b flowLink \u51fa\u8fd9\u4e2a\u8282\u70b9\n  \"refInput\": refInput or [], # \u54ea\u4e9b refLink \u8fdb\u4e86\u8fd9\u4e2a\u8282\u70b9\n  \"refOutput\": refOutput or [] # \u54ea\u4e9b refLink \u51fa\u8fd9\u4e2a\u8282\u70b9\n}\n```\n\n* `script_node_info[\"data\"]` \u662f `dict`, \u5982\u4e0b\n\n```\ndata = {\n  \"type\": 0, # 0\uff1a\u6ca1\u6709\u5206\u652f\u7684\u8282\u70b9\uff0c 1\uff1a\u6709\u5206\u652f\u7684\u8282\u70b9\uff0c 999\uff1a\u975e\u5206\u652f\u8282\u70b9\uff0c\u76f4\u63a5\u8df3\u8f6c\u4e0b\u4e00\u4e2a\u3002 PS, \u8fd9\u4e2a\u8bbe\u8ba1\u6709\u70b9\u4e0d\u7f8e\uff0c\u6bd5\u7adf\u8282\u70b9\u95f4\u7684\u5206\u652f\u5173\u7cfb\uff0c\u66f4\u5e94\u8be5\u662f\u7ed3\u6784\u6027\u4fe1\u606f\uff0c\u653e\u5728\u5185\u5bb9\u7684\u5730\u65b9\u5904\u7406\u4e0d\u662f\u5f88\u4f18\u96c5\n  \"aid\": \"\",\n  \"cid\": video[\"cid\"],\n  \"name\": name or video[\"title\"], # \u8fd9\u4e2a\u8282\u70b9\u7684\u540d\u79f0\n  \"index\": video[\"index\"],\n  \"showTime\": 0, # \u76ee\u524d\u6ca1\u7528\u5230\uff0c\u4e0d\u77e5\u9053\u662f\u4ec0\u4e48\n  \"innerOptions\": [], # \u76ee\u524d\u6ca1\u7528\u5230\uff0c\u4e0d\u77e5\u9053\u662f\u4ec0\u4e48\n  \"dimension\": {'width': 1920, 'height': 1080},\n  \"duration\": video[\"duration\"]*1000\n}\n```\n\n\u5176\u4e2d `video` \u662f\u4ece API \u83b7\u5f97\u7684\n\n* \u975e\u5206\u652f\u6a21\u5757(`script_node_info[\"data\"][\"type\"]=999`)\uff1a\u4e0d\u80fd\u8bbe\u7f6e\u5206\u652f\u9009\u9879\uff0c\u76f4\u63a5\u8df3\u8f6c\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\n  * \u5267\u60c5\u5206\u652f\u6a21\u5757 (`script_node_info[\"type\"] = \"videoNode\"`): \u9700\u8981\u8bbe\u7f6e\u89c6\u9891\u4fe1\u606f\n  * \u8df3\u8f6c\u5206\u652f\u6a21\u5757 (`script_node_info[\"type\"] = \"gotoNode\"`): \u9700\u8981\u8bbe\u7f6e\u8df3\u8f6c(\u5df2\u6709\u7684)\u8282\u70b9\u4fe1\u606f\n* \u5206\u652f\u6a21\u5757(`script_node_info[\"data\"][\"type\"]=0 or 1`)\uff1a\u53ef\u4ee5\u8bbe\u7f6e\u5206\u652f\u9009\u9879, \u6709\u5206\u652f\u4e3a 1, \u65e0\u5206\u652f\u4e3a 0\n  * \u5267\u60c5\u5206\u652f\u6a21\u5757 (`script_node_info[\"type\"] = \"videoNode\"`): \u9700\u8981\u8bbe\u7f6e\u89c6\u9891\u4fe1\u606f\n  * \u8df3\u8f6c\u5206\u652f\u6a21\u5757 (`script_node_info[\"type\"] = \"gotoNode\"`): \u9700\u8981\u8bbe\u7f6e\u8df3\u8f6c(\u5df2\u6709\u7684)\u8282\u70b9\u4fe1\u606f\n\n\n### \u89e3\u91ca `data[\"graph\"][\"script\"][\"links\"]`\n* `data[\"graph\"][\"script\"][\"links\"]` \u7c7b\u578b\u4e3a `dict`, `key` \u662f `l-[10 characters]`, `value` \u662f\n`dict`, \u5982\u4e0b\n\n```\nscrip_link_info = {\n  \"id\": 'l-[10 characters]', # str\n  \"type\": link_type, # flowLink \u5982\u679cfrom node \u662fvideoNode, refLink \u5982\u679c from node \u662fgotoNode\n  \"data\": data, # \u8fde\u7ebf\u7684\u5185\u5bb9\u4fe1\u606f\uff0c\u5176\u4ed6\u7684\u53c2\u6570\u53ef\u4ee5\u88ab\u7406\u89e3\u4e3a\u662f\u8fde\u7ebf\u7684\u7ed3\u6784\u4fe1\u606f\n  \"from\": nfrom_id, # \u8fde\u7ebf\u7684\u5f00\u59cb\u8282\u70b9 id\n  \"to\": nto_id # \u8fde\u7ebf\u7684\u7ed3\u675f\u8282\u70b9 id\n}\n```\n\n* `script_link_info[\"data\"]` \u662f `dict`\uff0c\u5982\u4e0b\n\n```\ndata = {\n  \"id\": link_id, # str, \"l-[10 characters]\"\n  \"point\": {'x': 0, 'y': 0, 'align': 2} # Never used that, just set as default\n  \"conditions\": [], # \u5728\u9ad8\u7ea7\u529f\u80fd\u7684\u65f6\u5019\u4f1a\u7528\u5230\uff0c\u5176\u4ed6\u65f6\u5019\u90fd\u662f []\n  \"actions\": [], # \u5728\u9ad8\u7ea7\u529f\u80fd\u7684\u65f6\u5019\u4f1a\u7528\u5230\uff0c\u5176\u4ed6\u65f6\u5019\u90fd\u662f []\n  \"text\": \"\u6211\u8981\u53bb\u4e0b\u4e2a\u8282\u70b9\",\n  \"default\": False # \u4ece\u4e00\u4e2a\u8282\u70b9\u51fa\u6765\u7684\u8fde\u7ebf\uff0c\u5176\u4e2d\u6709\u4e00\u4e2a\u662f\u9ed8\u8ba4\u5206\u652f\uff0c\u8bbe\u7f6e\u4e3aTrue, \u5176\u4ed6\u7684\u4e3a False \n}\n```\n\n### \u89e3\u91ca `data[\"graph\"][\"nodes\"]`\n\n* `data[\"graph\"][\"nodes\"]` \u662f list[dict], \u53ea\u4f1a\u6709\u7c7b\u578b\u4e3avideoNode \u7684\u4fe1\u606f\n\n* \u6bcf\u4e2a\u8282\u70b9\u7684\u4fe1\u606f\u5982\u4e0b\uff1a\n```\nself.info = {\n  \"id\": \"n-[10 characters]\", # str\n  \"cid\": script_node_info[\"data\"][\"cid\"],\n  \"name\": script_node_info[\"data\"][\"name\"],\n  \"is_start\": 1 if script_node_info[\"isRoot\"] else 0, \n  \"show_time\": 0 if script_node_info[\"data\"][\"type\"] == 999 else -1 # int, Strange semantic\uff0cno idea why\n  \"otype\": 1, # int, No idea \n  \"edges\": [], # list[dict], \u4ece\u8fd9\u4e2a\u8282\u70b9\u51fa\u53bb\u7684\u8fde\u7ebf\n}\n``` \n\n### \u89e3\u91ca\u9ad8\u7ea7\u529f\u80fd\n\n* \u7b80\u800c\u8a00\u4e4b\uff0c\u5c31\u662f\u4f1a\u4f7f\u7528\u5230\u9690\u85cf\u6570\u503c\u6765\u5de6\u53f3\u60c5\u8282\u6811\u8d70\u5411\u7684\u529f\u80fd\u3002\u7528\u6237\u7684\u4ea4\u4e92\u6539\u53d8\u9690\u85cf\u6570\u503c\uff0c\u9690\u85cf\u6570\u503c\u6539\u53d8\u5448\u73b0\u7684\u6545\u4e8b\u60c5\u8282\u3002\n\n* \u53c2\u8003 [B \u7ad9\u60c5\u8282\u6811\u9ad8\u7ea7\u529f\u80fd](https://www.bilibili.com/video/BV134411F7VD)\n\n\u91cd\u8981\u7684\u51e0\u4e2a\u53c2\u6570\n* `data[\"graph\"][\"script\"][\"enableVariables\"]` \u8bbe\u7f6e\u4e3a True \u5982\u679c\u7528\u5230\u9ad8\u7ea7\u529f\u80fd\n* `data[\"graph\"][\"script\"][\"variables\"]` \u9ed8\u8ba4\u4e3a\n```\ngraph_script['variables'] = [\n  {'id': 'v-LMw8OzBpw', 'type': 1, 'name': '\u6570\u503c1', 'initValue': 0, 'initValue2': 0, 'displayable': False},\n  {'id': 'v-2xvB5bPFCl', 'type': 1, 'name': '\u6570\u503c2', 'initValue': 0, 'initValue2': 0, 'displayable': False},\n  {'id': 'v-Lh0XaHD6ND', 'type': 1, 'name': '\u6570\u503c3', 'initValue': 0, 'initValue2': 0, 'displayable': False},\n  {'id': 'v-as5TbzlglR', 'type': 1, 'name': '\u6570\u503c4', 'initValue': 0, 'initValue2': 0, 'displayable': False},\n  {'id': 'v-Lwe1HHANpM', 'type': 2, 'name': '\u968f\u673a\u503c', 'initValue': 1, 'initValue2': 100, 'displayable': False}]\n```\n\u663e\u800c\u6613\u89c1\uff0c\u5176\u4e2d\n  * `id` \u662f `v-[10 characters]`\n  * `type` int, \u53ef\u8bbe\u7f6e\u56fa\u5b9a\u521d\u59cb\u503c\u7684\u4e3a 1\uff0c \u968f\u673a\u4ea7\u751f\u7684\u4e3a 2\n  * `name` str, \u53ef\u4ee5\u81ea\u5df1\u8bbe\u7f6e, \u5c31\u662f\u53d8\u91cf\u540d\n  * `initValue`: int, \u5728 type \u4e3a1\u7684\u65f6\u5019\uff0c\u521d\u59cb\u503c\uff1b\u5728 type \u4e3a2\u65f6\uff0c\u5c31\u662f\u968f\u673a\u6570\u7684\u53d6\u503c\u4e0b\u9650\n  * `initValue2`: int, \u5728 type \u4e3a1\u7684\u65f6\u5019\uff0c\u6ca1\u7528\u5230\uff1b\u5728 type \u4e3a2\u65f6\uff0c\u5c31\u662f\u968f\u673a\u6570\u7684\u53d6\u503c\u4e0a\u9650\n  * `displayable`: bool, \u662f\u5426\u5728\u64ad\u653e\u89c6\u9891\u65f6\u663e\u793a\u6570\u503c\n* `data[\"graph\"][\"regional_vars\"]` \u548c `data[\"graph\"][\"script\"][\"variables\"]` \u540c\u6b65\u5c31\u53ef\u4ee5, \u996e\u7528\u4e00\u5c0f\u6bb5\u4ee3\u7801\uff0c\u663e\u800c\u6613\u89c1\n```\ndef _sync_vars(self):\n  for v in self.graph[\"script\"][\"variables\"]:\n    _v = {\n      \"name\": v[\"name\"],\n      \"type\": v[\"type\"],\n      \"init_min\": v[\"initValue\"],\n      \"init_max\": v[\"initValue2\"],\n      \"is_show\": 1 if v[\"displayable\"] else 0,\n      \"id\": v[\"id\"] \n    }\n  \n    self.graph[\"regional_vars\"].append(_v)\n```\n\n# \u5b9e\u73b0\u60c5\u8282\u6811\u7684\u65b9\u5f0f\n\n* \u5904\u7406 `graph[\"script\"]` \u548c\u753b\u56fe\u63cf\u8ff0\u4e00\u81f4\uff0c\u505a\u4e24\u4e2a\u8282\u70b9(`ScriptNode`)\uff0c\u505a\u4e2a\u8fde\u7ebf(`ScriptLink`), \u8bbe\u7f6e\u53d8\u91cf(`ScriptVariable`)\n* \u5904\u7406 `graph[\"nodes\"]` \u53ea\u9700\u8981\u540c\u6b65 `graph[\"script\"]` \u5c31\u53ef\u4ee5\u4e86, \u540c\u6b65\u63a5\u53e3\u4f1a\u5904\u7406\u5177\u4f53\u4e8b\u60c5\n* \u5904\u7406 `graph[\"regional_vars\"]` \u53ea\u9700\u8981\u540c\u6b65 `graph[\"script\"]` \u5c31\u53ef\u4ee5\u4e86\uff0c\u540c\u6b65\u63a5\u53e3\u4f1a\u5904\u7406\u5177\u4f53\u4e8b\u60c5\n\n\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/phigrey/bilibili-storytree.git",
            "keywords": "",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "bilibili-storytree",
            "package_url": "https://pypi.org/project/bilibili-storytree/",
            "platform": "",
            "project_url": "https://pypi.org/project/bilibili-storytree/",
            "project_urls": {
                "Homepage": "https://github.com/phigrey/bilibili-storytree.git",
                "Repository": "https://github.com/phigrey/bilibili-storytree.git"
            },
            "release_url": "https://pypi.org/project/bilibili-storytree/0.1.1/",
            "requires_dist": [
                "PyExecJS (>=1.5.1,<2.0.0)"
            ],
            "requires_python": ">=3.8,<4.0",
            "summary": "API to create story graph for interactivate video in bilibili",
            "version": "0.1.1",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 10699005,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "48e78d4e812b5cf60d5e6bc15c59f64a",
                    "sha256": "6ca9e1f09a9b2114282e6ee8d5a03bd0dfc616c5283b2e4076eef7ebe2db29b5"
                },
                "downloads": -1,
                "filename": "bilibili_storytree-0.1.1-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "48e78d4e812b5cf60d5e6bc15c59f64a",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.8,<4.0",
                "size": 10072,
                "upload_time": "2021-06-21T06:20:55",
                "upload_time_iso_8601": "2021-06-21T06:20:55.719573Z",
                "url": "https://files.pythonhosted.org/packages/eb/1a/e130ae98131f0073c2243ce2b79a155705e8a5fa0a61d4c31e2b182a9129/bilibili_storytree-0.1.1-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "31e449c62c09dd9b9879ea0341eceba3",
                    "sha256": "c3eb433ade3fa03d2fd92b9d4a27b600ead19a337ae8516170acd980c805e0a9"
                },
                "downloads": -1,
                "filename": "bilibili_storytree-0.1.1.tar.gz",
                "has_sig": false,
                "md5_digest": "31e449c62c09dd9b9879ea0341eceba3",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.8,<4.0",
                "size": 11174,
                "upload_time": "2021-06-21T06:20:57",
                "upload_time_iso_8601": "2021-06-21T06:20:57.111661Z",
                "url": "https://files.pythonhosted.org/packages/d3/07/904f07d5b4e149b70c7bc64d69d64b2cf344a2aed2f63e76168ee1b70e5b/bilibili_storytree-0.1.1.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}