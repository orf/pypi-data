{
    "0.0.1": {
        "info": {
            "author": "",
            "author_email": "davidlion <david.lion@yscope.com>",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: Apache Software License"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "",
            "keywords": "",
            "license": "Apache License 2.0",
            "maintainer": "",
            "maintainer_email": "",
            "name": "clp-logging",
            "package_url": "https://pypi.org/project/clp-logging/",
            "platform": null,
            "project_url": "https://pypi.org/project/clp-logging/",
            "project_urls": {
                "Bug Tracker": "https://github.com/y-scope/clp-loglib-py/issues",
                "Homepage": "https://github.com/y-scope/clp-loglib-py"
            },
            "release_url": "https://pypi.org/project/clp-logging/0.0.1/",
            "requires_dist": [
                "python-dateutil (>=2.8.2)",
                "typing-extensions (>=4.1.1)",
                "zstandard (>=0.18.0)"
            ],
            "requires_python": ">=3.6",
            "summary": "Logging/encoding/decoding using CLP's IR stream format",
            "version": "0.0.1",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 16044797,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "80e44c88f38e11b0c3ee8ae52cb17085",
                    "sha256": "5590cf1a9465c83c6218a45e4bf545dfd03ca14857fbe8d5154c51fe6853ef17"
                },
                "downloads": -1,
                "filename": "clp_logging-0.0.1-1-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "80e44c88f38e11b0c3ee8ae52cb17085",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.6",
                "size": 21569,
                "upload_time": "2022-10-27T18:52:34",
                "upload_time_iso_8601": "2022-10-27T18:52:34.106508Z",
                "url": "https://files.pythonhosted.org/packages/75/2f/873b32fc2fd6cad375254ec3a66e11efd8ff9c115616ac7318997fbc99a4/clp_logging-0.0.1-1-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "946f7fc5d4b35c3126ec92183163d60d",
                    "sha256": "f8c4b3612d6b7de245c937fdb76bf393ea0b31846e5d6fae8e3f5a5b11902606"
                },
                "downloads": -1,
                "filename": "clp_logging-0.0.1-1.tar.gz",
                "has_sig": false,
                "md5_digest": "946f7fc5d4b35c3126ec92183163d60d",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.6",
                "size": 23925,
                "upload_time": "2022-10-27T18:54:21",
                "upload_time_iso_8601": "2022-10-27T18:54:21.965837Z",
                "url": "https://files.pythonhosted.org/packages/3e/df/3ed66f8f8cfc1df33a1dfcc262b7f7b4fea7676e90f1a5054e019232fe79/clp_logging-0.0.1-1.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.0.2": {
        "info": {
            "author": "",
            "author_email": "davidlion <david.lion@yscope.com>",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: Apache Software License"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "",
            "keywords": "",
            "license": "Apache License 2.0",
            "maintainer": "",
            "maintainer_email": "",
            "name": "clp-logging",
            "package_url": "https://pypi.org/project/clp-logging/",
            "platform": null,
            "project_url": "https://pypi.org/project/clp-logging/",
            "project_urls": {
                "Bug Tracker": "https://github.com/y-scope/clp-loglib-py/issues",
                "Homepage": "https://github.com/y-scope/clp-loglib-py"
            },
            "release_url": "https://pypi.org/project/clp-logging/0.0.2/",
            "requires_dist": [
                "python-dateutil (>=2.8.2)",
                "typing-extensions (>=4.1.1)",
                "zstandard (>=0.18.0)"
            ],
            "requires_python": ">=3.6",
            "summary": "Logging/encoding/decoding using CLP's IR stream format",
            "version": "0.0.2",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 16044797,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "9023ca85d676ebaede884ecfbc599051",
                    "sha256": "b680d1bb52116d30e68072fe1739ee5408cd9eb31eadf512d44d2c65fbea2b48"
                },
                "downloads": -1,
                "filename": "clp_logging-0.0.2-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "9023ca85d676ebaede884ecfbc599051",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.6",
                "size": 21815,
                "upload_time": "2022-10-28T17:50:35",
                "upload_time_iso_8601": "2022-10-28T17:50:35.189570Z",
                "url": "https://files.pythonhosted.org/packages/2e/38/4de27bf360b9e8ec6133c775bf3b9fbdb2693ee81b779a120d78b80935d8/clp_logging-0.0.2-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "85df684f99a1c7f2c977e835da21dad5",
                    "sha256": "3309f90b6968a552195797cc286144c72c2d46c7e224ca86d1ebe53b07f18d9b"
                },
                "downloads": -1,
                "filename": "clp_logging-0.0.2.tar.gz",
                "has_sig": false,
                "md5_digest": "85df684f99a1c7f2c977e835da21dad5",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.6",
                "size": 24280,
                "upload_time": "2022-10-28T17:50:37",
                "upload_time_iso_8601": "2022-10-28T17:50:37.173544Z",
                "url": "https://files.pythonhosted.org/packages/27/f8/07f9c41f80e49faa7050503a0eb6076440dec048ba1de0772dfdca358e23/clp_logging-0.0.2.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.0.3": {
        "info": {
            "author": "",
            "author_email": "david lion <david.lion@yscope.com>",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: Apache Software License"
            ],
            "description": "# CLP Logging\nThis is a Python `logging` library meant to supplement CLP. To learn more about\nCLP check out the [repository][0] and [Uber's blog][1].\n\nTo achieve the best compression ratio, CLP should be used to compress large\nbatches of related log events, one batch at a time. However, individual log\nfiles are generally small and are generated across a long period of time.\n\nThis logging library helps solve this problem by logging directly in CLP's\ninternal representation (IR). A log created with a CLP logging handler is first\nparsed and then appended to a compressed output stream in IR form.\nSee [README-protocol.md](README-protocol.md) for more details on the format of\nCLP IR.\n\nThese log files containing the compressed CLP IR streams can then all be\ningested into CLP together at a later time.\n\n[0]: https://github.com/y-scope/clp\n[1]: https://www.uber.com/blog/reducing-logging-cost-by-two-orders-of-magnitude-using-clp/\n\n## Quick Start\nThe package is hosted with pypi (https://pypi.org/project/clp-logging/), so it\ncan be installed with `pip`:\n\n`python3 -m pip install --upgrade clp-logging`\n\n## Logger handlers\n### CLPStreamHandler\n- Writes encoded logs directly to a stream\n### CLPFileHandler\n- Simple wrapper around CLPStreamHandler that calls open\n#### Example: CLPFileHandler\n```python\nimport logging\nfrom pathlib import Path\nfrom clp_logging.handlers import CLPFileHandler\n\nclp_handler = CLPFileHandler(Path(\"example.clp.zst\"))\nlogger = logging.getLogger(__name__)\nlogger.addHandler(clp_handler)\nlogger.warn(\"example warning\")\n```\n\n### CLPSockHandler + CLPSockListener\n- A Unix domain socket logging handler and listener server to enable multiple\n  concurrent handlers across multiple processes to log to the same log file.\n- The handler writes encoded logs and sends them over the socket to the\n  separate listener process\n    - Socket name is the log file path passed to CLPSockHandler with a \".sock\"\n      suffix\n- On creation a CLPSockHandler will try to connect to the listener associated\n  with its socket name\n- CLPSockListener is essentially a namespace as it is a class, but only\n  contains static methods and data\n- A CLPSockListener can be explicitly created (and will run as a daemon) by\n  calling:\n    - `CLPSockListener.fork(log_path, sock_path, timezone, timestamp_format)`\n- Alternatively CLPSockHandlers can transparently start an associated\n  CLPSockListener\n    - Call `CLPSockHandler` with `create_listener=True`\n- Multiple CLPSockHandlers logging to the same file will use the same socket\n  and therefore the same listener\n    - It is safe for these handlers to all use `create_listener=True`\n        - They will race to create a listener with only one successfully\n          binding the socket and living on\n        - All the handlers will then connect to the one successful listener\n- CLPSockListener must be explicitly stopped once logging is completed\n    - Send CLPSockListener process SIGTERM\n    - Use an existing handler or create a new handler with the same log path\n      and call `stop_listener`\n        - `clp_sock_handler.stop_listener()` or\n          `CLPSockHandler(Path(\"example.clp.zst\")).stop_listener()`\n\n#### Example: CLPSockHandler + CLPSockListener\nIn the handler processes or threads:\n```python\nimport logging\nfrom pathlib import Path\nfrom clp_logging.handlers import CLPSockHandler\n\nclp_handler = CLPSockHandler(Path(\"example.clp.zst\"), create_listener=True)\nlogger = logging.getLogger(__name__)\nlogger.addHandler(clp_handler)\nlogger.warn(\"example warning\")\n```\nIn a single process or thread once logging is completed:\n```python\nfrom pathlib import Path\nfrom clp_logging.handlers import CLPSockHandler\n\nCLPSockHandler(Path(\"example.clp.zst\")).stop_listener()\n```\n\n## CLP readers (decoders)\n### CLPStreamReader\n- Read/decode any arbitrary stream\n- Can be used as an iterator that returns each log message as an object\n- Can skip n logs: `clp_reader.skip_nlogs(N)`\n- Can skip to first log after given time (since unix epoch):\n    - `clp_reader.skip_to_time(TIME)`\n\n### CLPFileReader\n- Simple wrapper around CLPStreamHandler that calls open\n\n#### Example code: CLPFileReader\n```python\nimport logging\nfrom pathlib import Path\nfrom clp_logging.readers import CLPFileReader, Log\n\n# create a list of all Log objects\nlog_objects: List[Log] = []\nwith CLPFileReader(Path(\"example.clp.zst\") as clp_reader:\n    for log in clp_reader:\n        log_objects.append(log)\n```\n\n## Compatibility\nTested on Python 3.6 and 3.8 and should work on any newer version.\nBuilt/packaged on Python 3.8 for convenience regarding type annotation.\n\n## Building/Packaging\n1. Create and enter a virtual environment:\n    `python3.8 -m venv venv; . ./venv/bin/activate`\n2. Install development dependencies:\n    `pip install -r requirements-dev.txt`\n3. Build:\n    `python -m build`\n\n## Testing\nNote the baseline comparison logging handler and the CLP handler both get\nunique timestamps. It is possible for these timestamps to differ, which will\nresult in a test reporting a false positive error.\n1. Create and enter a virtual environment:\n    `python -m venv venv; .  ./venv/bin/activate`\n2. Install:\n    `pip install dist/clp_logging-0.0.1-py3-none-any.whl` or `pip install -e .`\n3. Run unittest:\n    `python -m unittest -bv`\n\n## Contributing\nEnsure to run `mypy` and `black` (found in\n[requirements-dev.txt](requirements-dev.txt)) during development to ensure\nsmooth pull requests.\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "",
            "keywords": "",
            "license": "Apache License 2.0",
            "maintainer": "",
            "maintainer_email": "",
            "name": "clp-logging",
            "package_url": "https://pypi.org/project/clp-logging/",
            "platform": null,
            "project_url": "https://pypi.org/project/clp-logging/",
            "project_urls": {
                "Bug Tracker": "https://github.com/y-scope/clp-loglib-py/issues",
                "Homepage": "https://github.com/y-scope/clp-loglib-py"
            },
            "release_url": "https://pypi.org/project/clp-logging/0.0.3/",
            "requires_dist": [
                "python-dateutil (>=2.7)",
                "typing-extensions (>=4.1.1)",
                "zstandard (>=0.18.0)"
            ],
            "requires_python": ">=3.6",
            "summary": "Logging/encoding/decoding using CLP's IR stream format",
            "version": "0.0.3",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 16044797,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "52ce3636be0be0f0e31d3fc948b9496a",
                    "sha256": "370f0fb80d3bbeb1cbce6e23e02db76c70a83c566b94789648a36e761d748bd5"
                },
                "downloads": -1,
                "filename": "clp_logging-0.0.3-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "52ce3636be0be0f0e31d3fc948b9496a",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.6",
                "size": 21815,
                "upload_time": "2022-12-09T07:42:28",
                "upload_time_iso_8601": "2022-12-09T07:42:28.943816Z",
                "url": "https://files.pythonhosted.org/packages/c6/e0/82171cf44969fded91a3114390c5bf12d8359f5e96ebc3314e8b169589e0/clp_logging-0.0.3-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "97d5a285af80c181d40514f13111f586",
                    "sha256": "7fec95f50d8c37d630db40a046dcec87129b315130def9428a0a7c8cd0bde5e2"
                },
                "downloads": -1,
                "filename": "clp_logging-0.0.3.tar.gz",
                "has_sig": false,
                "md5_digest": "97d5a285af80c181d40514f13111f586",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.6",
                "size": 24282,
                "upload_time": "2022-12-09T07:42:30",
                "upload_time_iso_8601": "2022-12-09T07:42:30.444164Z",
                "url": "https://files.pythonhosted.org/packages/4e/b7/758131b68e26d1056df1fb6e54ec0870f59a3ace13f1ee3ed033a988251d/clp_logging-0.0.3.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}