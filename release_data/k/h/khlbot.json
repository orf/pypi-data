{
    "0.2": {
        "info": {
            "author": "RMT",
            "author_email": "d.rong@outlook.com",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: MIT License",
                "Operating System :: OS Independent",
                "Programming Language :: Python :: 3.8"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/RMTT/khlbot",
            "keywords": "",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "khlbot",
            "package_url": "https://pypi.org/project/khlbot/",
            "platform": "",
            "project_url": "https://pypi.org/project/khlbot/",
            "project_urls": {
                "Homepage": "https://github.com/RMTT/khlbot"
            },
            "release_url": "https://pypi.org/project/khlbot/0.2/",
            "requires_dist": [
                "requests",
                "websockets"
            ],
            "requires_python": "",
            "summary": "Robot framework for KaiHeiLa",
            "version": "0.2",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 10318254,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "a10df09e5de07dd6ac2085063de570e3",
                    "sha256": "21167fa2183530abb2c57f02b3416d52baef7881c13129a0006ce6873a9b9de1"
                },
                "downloads": -1,
                "filename": "khlbot-0.2-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "a10df09e5de07dd6ac2085063de570e3",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": null,
                "size": 10883,
                "upload_time": "2021-05-08T02:32:14",
                "upload_time_iso_8601": "2021-05-08T02:32:14.914451Z",
                "url": "https://files.pythonhosted.org/packages/21/83/b8042246a4755277156f854f384e63e0c73b376d3aad74c4a1f30187dfe1/khlbot-0.2-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.21": {
        "info": {
            "author": "RMT",
            "author_email": "d.rong@outlook.com",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: MIT License",
                "Operating System :: OS Independent",
                "Programming Language :: Python :: 3.8"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/RMTT/khlbot",
            "keywords": "",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "khlbot",
            "package_url": "https://pypi.org/project/khlbot/",
            "platform": "",
            "project_url": "https://pypi.org/project/khlbot/",
            "project_urls": {
                "Homepage": "https://github.com/RMTT/khlbot"
            },
            "release_url": "https://pypi.org/project/khlbot/0.21/",
            "requires_dist": [
                "requests",
                "websockets"
            ],
            "requires_python": "",
            "summary": "Robot framework for KaiHeiLa",
            "version": "0.21",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 10318254,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "d6715608dda30e3f1437a6229fb295a5",
                    "sha256": "eb5c48ed9b0ff1a63892b4bb8a4db938b7005833d33aa75616afe06a372c2879"
                },
                "downloads": -1,
                "filename": "khlbot-0.21-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "d6715608dda30e3f1437a6229fb295a5",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": null,
                "size": 13918,
                "upload_time": "2021-05-09T00:35:42",
                "upload_time_iso_8601": "2021-05-09T00:35:42.496897Z",
                "url": "https://files.pythonhosted.org/packages/4f/a3/998bd10be6a63657eb7ef4a5a17fd3cf2b7a78337023568bf480eb85258e/khlbot-0.21-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.22": {
        "info": {
            "author": "RMT",
            "author_email": "d.rong@outlook.com",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: MIT License",
                "Operating System :: OS Independent",
                "Programming Language :: Python :: 3.8"
            ],
            "description": "# \u5f00\u9ed1\u5566\u673a\u5668\u4eba\n\n## \u4ecb\u7ecd\n\nkhlbot\u662f[\u5f00\u9ed1\u5566](https://www.kaiheila.cn)\u7684\u4e00\u6b3e\u673a\u5668\u4eba\u6846\u67b6\uff0c\u652f\u6301\u534f\u7a0b\u548c\u591a\u8fdb\u7a0b\n\n## \u4f7f\u7528\u673a\u5668\u4eba\n\n### \u521b\u5efa\u673a\u5668\u4eba\u5b9e\u4f8b\n\n```python\nfrom khlbot import Bot\n\nbot = Bot(token=\"\", _config={})\n```\n\n\u521b\u5efa\u662f\u673a\u5668\u4eba\u65f6\uff0c`token`\u662f\u5fc5\u987b\u7684\uff08\u76ee\u524d\u53ea\u652f\u6301websocket\uff09\uff0c\u540c\u65f6\u63a5\u6536\u4e00\u4e2a\u5305\u542b\u914d\u7f6e\u4fe1\u606f\u7684dict\u5bf9\u8c61\uff0c\u76ee\u524d\u652f\u6301\u5982\u4e0b\u914d\u7f6e\u9879\uff1a\n\n+ `MAX_PROCESSING_NUMBER`: \u5de5\u4f5c\u8fdb\u7a0b\u7684\u6700\u5927\u6570\u76ee\uff0c\u9ed8\u8ba4\u4e3acpu\u7684\u6838\u5fc3\u6570\n+ `MAX_CONSUMER_NUMBER`: \u6bcf\u4e2a\u5de5\u4f5c\u8fdb\u7a0b\u4e2d\u7684\u6d88\u8d39\u8005\u6570\u76ee\uff0c\u6d88\u8d39\u8005\u90fd\u662f\u534f\u7a0b\uff0c \u6240\u4ee5\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u53ef\u4ee5\u8fd0\u884c\u591a\u4e2a\uff0c\u9ed8\u8ba4\u4e3a4\n+ `MAX_EVENT_QUEUE_SIZE`: \u4e8b\u4ef6\u961f\u5217\u7684\u6700\u5927\u957f\u5ea6\uff0c\u4eceKHL\u63a5\u6536\u7684\u6d88\u606f\u90fd\u4f1a\u5148\u653e\u5165\u4e8b\u4ef6\u961f\u5217\uff0c\u9ed8\u8ba4\u4e3a10000\n+ `PROCESSING_IDLE_TIMEOUT`: \u5de5\u4f5c\u8fdb\u7a0b\u7684\u6700\u5927\u7a7a\u95f2\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a60\u79d2\uff0c\u5f53\u5de5\u4f5c\u8fdb\u7a0b\u957f\u65f6\u95f4\u6ca1\u6709\u5904\u7406\u6d88\u606f\u65f6\uff0c\u5c06\u81ea\u52a8\u5173\u95ed\u8fdb\u7a0b\u4e2d\u7684\u6240\u6709\u6d88\u8d39\u8005\u4ee5\u8282\u7701\u8d44\u6e90\n\n\u9ed8\u8ba4\u914d\u7f6e\u5982\u4e0b\uff1a\n\n```python\nimport os\n\n{\n    \"MAX_PROCESSING_NUMBER\": os.cpu_count(),\n    \"MAX_CONSUMER_NUMBER\": 4,\n    \"MAX_EVENT_QUEUE_SIZE\": 10000,\n    \"PROCESSING_IDLE_TIMEOUT\": 60\n}\n```\n\n### \u8bbe\u7f6e\u673a\u5668\u4eba\u4efb\u52a1\n\n```python\nfrom khlbot import Commander\n\ncommander = Commander(prefix=\"-\")\n```\n\n`Commander`\u7c7b\u7528\u6765\u8bbe\u7f6e\u6307\u4ee4\u4ee5\u53ca\u5404\u79cd\u4efb\u52a1\u7684\u8bbe\u7f6e\uff0c\u5b9e\u4f8b\u5316`Commander`\u65f6\u9700\u8981\u6307\u5b9a\u4e00\u4e2a\u524d\u7f00\n\n#### \u6dfb\u52a0\u6307\u4ee4\n\n```python\n@commander.command(\"hello\", \"name\", \"id\")\nasync def handle_function(name, _id, **kwargs):\n    pass\n```\n\n\u6dfb\u52a0\u6307\u4ee4\u53ef\u4ee5\u4f7f\u7528`commander.command`\u4fee\u9970\u5668\uff0c\u4fee\u9970\u5668\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u5e94\u8be5\u4e3a \u5177\u4f53\u7684\u6307\u4ee4\uff0c \u5176\u540e\u4fbf\u662f\u6307\u4ee4\u7684\u53c2\u6570 \uff0c\u673a\u5668\u4eba\u89e3\u6790\u547d\u4ee4\u540e\u5c06\u4f1a\u628a\u89e3\u6790\u5230\u7684\u53c2\u6570\u6309\u4fee\u9970\u5668\u4e2d\u7684\u987a\u5e8f\u4f20\u7ed9`handle_function`\n\u3002\u9664\u6b64\u4e4b\u5916\uff0c`handle_function`\u8fd8\u63a5\u6536\u4e00\u4e2a`kwargs`\uff0c\u7528\u4e8e\u4f20\u9012\u989d\u5916\u7684\u4fe1\u606f\uff0c\u5728\u4efb\u4f55\u65f6\u5019\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7`kwargs[\"event\"]`\u6765\u83b7\u53d6\u5b8c\u6574\u7684\u4e8b\u4ef6\u5bf9\u8c61\uff08\u53ef\u6309json\u5bf9\u8c61\u4f7f\u7528)\u3002\n> \u6ce8\u610f\uff0c`handle_function`\u5fc5\u987b\u4f7f\u7528`async def`\u6765\u5b9a\u4e49\n\n\u4fee\u9970\u5668\u53ef\u4ee5\u5bf9\u540c\u4e00\u4e2a`handle_function`\u591a\u6b21\u4f7f\u7528\uff0c\u800c\u4e14\u53ef\u4ee5\u7528\u7c7b\u4f3c`functools.partial`\u7684\u65b9\u6cd5\u6765\u8bbe\u7f6e\u504f\u51fd\u6570\u7684\u53c2\u6570\uff0c\u5982\uff1a\n\n```python\n@commander.command(\"hello\", partial=(1,))\n@commander.command(\"hello2\", partial=(2,))\ndef handle_function(_type):\n    print(_type)\n```\n\n> \u6ce8\u610f\uff1a`partial`\u4e2d\u7684\u53c2\u6570\u5c06\u4f1a\u6309\u987a\u5e8f\u81ea\u52a8\u4f20\u9012\u5230`handle_function`\u7684\u6700\u524d\u9762\n\n#### \u6dfb\u52a0\u5468\u671f\u4efb\u52a1\n\n\u5468\u671f\u4efb\u52a1\u53ef\u4ee5\u4f7f\u7528`commander.interval`\u4fee\u9970\u5668\u6765\u521b\u5efa\uff1a\n\n```python\n@commander.interval(period=5, times=10)\nasync def handle_function():\n    pass\n```\n\n\u4fee\u9970\u5668\u53ea\u63a5\u6536\u4e24\u4e2a\u53c2\u6570:\n\n+ `period`: \u8fd0\u884c\u5468\u671f\uff0c\u5355\u4f4d\u4e3a\u79d2\n+ `times`: \u8fd0\u884c\u7684\u6b21\u6570\uff0c\u5982\u679c\u4e3a0\u5219\u8868\u793a\u6ca1\u6709\u6b21\u6570\u9650\u5236\n\n> \u5468\u671f\u4efb\u52a1\u6ca1\u6709\u989d\u5916\u7684`kwargs`\n\n#### \u8ba2\u9605\u7cfb\u7edf\u6d88\u606f\n\n\u8ba2\u9605\u7cfb\u7edf\u6d88\u606f\u53ef\u4ee5\u4f7f\u7528`commander.subscribe`\u4fee\u9970\u5668\uff1a\n\n```python\nimport khlbot.config as CONFIG\n\n\n@commander.subscribe(_type=CONFIG.KHL_EVENT_TYPE_GUILD_MEMBER_ONLINE, conditions={})\nasync def handle_function(**kwargs):\n    pass\n```\n\n\u4fee\u9970\u5668\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a\n\n+ `_type`: \u7cfb\u7edf\u6d88\u606f\u7684\u7c7b\u578b\n+ `conditions`: \u8fc7\u6ee4\u7cfb\u7edf\u6d88\u606f\u7684\u6761\u4ef6\n\n> \u8ba2\u9605\u4efb\u52a1\u6709\u989d\u5916\u7684`kwargs`\uff0c\u53ef\u4ee5\u901a\u8fc7`kwargs[\"event\"]`\u6765\u83b7\u53d6\u5b8c\u6574\u7684\u4e8b\u4ef6\u5bf9\u8c61\uff08\u53ef\u6309json\u5bf9\u8c61\u4f7f\u7528\uff09\u3002\n\n## TODO\n+ [ ] \u5b8c\u5584\u5468\u671f\u4efb\u52a1\u7684\u8fc7\u6ee4\u6761\u4ef6\n+ \u5c01\u88c5\u63a5\u53e3:\n  + [x] \u670d\u52a1\u5668\u76f8\u5173\u63a5\u53e3\n  + [ ] \u9891\u9053\u76f8\u5173\u63a5\u53e3\n  + [x] \u9891\u9053\u6d88\u606f\u76f8\u5173\u63a5\u53e3\n  + [ ] \u79c1\u4fe1\u804a\u5929\u4f1a\u8bdd\u63a5\u53e3\n  + [ ] \u7528\u6237\u79c1\u804a\u6d88\u606f\u63a5\u53e3\n  + [ ] \u7528\u6237\u76f8\u5173\u63a5\u53e3\n  + [ ] \u5a92\u4f53\u6a21\u5757\n  + [ ] \u670d\u52a1\u5668\u89d2\u8272\u6743\u9650\u76f8\u5173\u63a5\u53e3\n  + [ ] \u4eb2\u5bc6\u5ea6\u76f8\u5173\u63a5\u53e3\n  + [ ] \u670d\u52a1\u5668\u8868\u60c5\u76f8\u5173\u63a5\u53e3\n\n+ \u5c01\u88c5\u4e8b\u4ef6\u7ed3\u6784\uff1a\n  + [ ] \u9891\u9053\u76f8\u5173\u4e8b\u4ef6\n  + [ ] \u79c1\u804a\u6d88\u606f\u4e8b\u4ef6\n  + [ ] \u670d\u52a1\u5668\u6210\u5458\u76f8\u5173\u4e8b\u4ef6\n  + [ ] \u670d\u52a1\u5668\u89d2\u8272\u76f8\u5173\u4e8b\u4ef6\n  + [ ] \u670d\u52a1\u5668\u76f8\u5173\u4e8b\u4ef6\n  + [ ] \u6d88\u606f\u76f8\u5173\u4e8b\u4ef6\n  + [ ] \u7528\u6237\u76f8\u5173\u4e8b\u4ef6\n\n## \u4f7f\u7528\u6837\u4f8b\n\n```python\nfrom khlbot.core.Bot import Bot\nfrom khlbot.core.Commander import Commander\nimport khlbot.config as CONFIG\nfrom khlbot.khl.ChannelMessageAPI import ChannelMessage\n\ncommander = Commander(prefix=\"-\")\n\n\n# \u5904\u7406\"-hello\" \u548c \"-hello2\"\n@commander.command(\"hello\", partial=(2,))\n@commander.command(\"hello2\", partial=(1,))\nasync def hello(i, **kwargs):\n  event = kwargs[\"event\"]\n  payload = {\n    \"content\": \"**Hello**\",\n    \"target_id\": event.target_id,\n    \"quote\": event.msg_id,\n    \"type\": CONFIG.KHL_MSG_MARKDOWN\n  }\n  json_rep = await ChannelMessage.create(body=payload, token=\"\")\n\n\n# \u5468\u671f\u4efb\u52a1\uff0c\u95f4\u96943\u79d2\uff0c\u8fd0\u884c3\u6b21\n@commander.interval(period=3, times=3)\nasync def interval_test():\n  payload = {\n    \"content\": \"**Hello**\",\n    \"target_id\": \"\",\n    \"quote\": \"\",\n    \"type\": CONFIG.KHL_MSG_MARKDOWN\n  }\n  json_rep = await ChannelMessage.create(body=payload, token=\"\")\n\n\n# \u8ba2\u9605\u7cfb\u7edf\u6d88\u606f\uff0c\u670d\u52a1\u5668\u6709\u7528\u6237\u66f4\u65b0\u4fe1\u606f\u65f6\u5c06\u88ab\u8c03\u7528\n@commander.subscribe(_type=CONFIG.KHL_EVENT_TYPE_UPDATED_GUILD_MEMBER)\nasync def online(**kwargs):\n  event = kwargs[\"event\"]\n  payload = {\n    \"content\": \"**Hello**\",\n    \"target_id\": \"\",\n    \"type\": CONFIG.KHL_MSG_MARKDOWN\n  }\n  json_rep = await ChannelMessage.create(body=payload, token=\"\")\n\n\nconfig = {\n  \"MAX_CONSUMER_NUMBER\": 4,\n  \"MAX_PROCESSING_NUMBER\": 2\n}\n\nbot = Bot(token=\"\", _config=config)\nbot.add_commander(commander)\nbot.run()\n```\n\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/RMTT/khlbot",
            "keywords": "",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "khlbot",
            "package_url": "https://pypi.org/project/khlbot/",
            "platform": "",
            "project_url": "https://pypi.org/project/khlbot/",
            "project_urls": {
                "Homepage": "https://github.com/RMTT/khlbot"
            },
            "release_url": "https://pypi.org/project/khlbot/0.22/",
            "requires_dist": [
                "requests",
                "websockets"
            ],
            "requires_python": "",
            "summary": "Robot framework for KaiHeiLa",
            "version": "0.22",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 10318254,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "795abf51fb65e773508d491e30515fd7",
                    "sha256": "3617bc2d3e9faac86077e1dc92631c3d767631e385f6dbc16e47d9aa73912c08"
                },
                "downloads": -1,
                "filename": "khlbot-0.22-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "795abf51fb65e773508d491e30515fd7",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": null,
                "size": 19925,
                "upload_time": "2021-05-11T03:28:20",
                "upload_time_iso_8601": "2021-05-11T03:28:20.278310Z",
                "url": "https://files.pythonhosted.org/packages/a2/39/d6ca5b5f6c6835938333654198f0adab6981c23e6570200169a5610b968e/khlbot-0.22-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}