{
    "1.1.0": {
        "info": {
            "author": "Nicolas Marcq",
            "author_email": "nicolas.marcq@hpe.com",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 5 - Production/Stable",
                "Environment :: Console",
                "Intended Audience :: Developers",
                "Intended Audience :: Information Technology",
                "Intended Audience :: System Administrators",
                "License :: OSI Approved :: GNU General Public License v3 (GPLv3)",
                "Operating System :: POSIX :: Linux",
                "Programming Language :: Python",
                "Programming Language :: Python :: 3",
                "Programming Language :: Python :: 3.10",
                "Programming Language :: Python :: 3.6",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8",
                "Programming Language :: Python :: 3.9",
                "Topic :: Utilities"
            ],
            "description": "<p align=\"center\">\n    <img src=\"docs/images/monkeyble_logo.png\">\n</p>\n\n<h3 align=\"center\">End-to-end testing framework for Ansible</h3>\n\n<p align=\"center\">\n<a href=\"https://hewlettpackard.github.io/monkeyble\"><img alt=\"Doc\" src=\"https://img.shields.io/badge/read-documentation-1abc9c?style=flat-square\"></a>\n<a href=\"https://makeapullrequest.com\"><img alt=\"PR\" src=\"https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square\"></a>\n</p>\n\n# Monkeyble\n\nMonkeyble is a callback plugin for Ansible that allow to execute end-to-end tests on Ansible playbooks with a \nPythonic testing approach. \ud83e\uddd0\n\nMonkeyble allows, at task level, to:\n\n- \ud83d\udc35 Check that a module has been called with expected argument values\n- \ud83d\ude4a Check that a module returned the expected result dictionary\n- \ud83d\ude48 Check the task state (changed, skipped, failed)\n- \ud83d\ude49 Mock a module and return a defined dictionary as result\n\nMonkeyble is designed to be executed by a CI/CD in order to detect regressions when updating an Ansible code base. \ud83d\ude80 \n\n## Quick tour\n\nComplete documentation available [here](https://hewlettpackard.github.io/monkeyble).\n\nAnsible resources are models of desired-state. Ansible modules have their own unit tests and guarantee you of their correct functioning.\nAs such, it's not necessary to test that services are started, packages are installed, or other such things. \nAnsible is the system that will ensure these things are declaratively true.\n\nThat being said, an Ansible playbook is commonly a bunch of data manipulation before calling a module that will perform a particular action.\nFor example, we get data from an API endpoint, or from the result of a module, we register a variable, then use a filter transform the data like combining two dictionary, \ntransforming into a list, changing the type, extract a specific value, etc... to finally call another module in a new task with the transformed data..\n\nGiven a defined list of variable as input we want to be sure that a particular task: \n\n- is well called with the expected instantiated arguments\n- produced this exact result\n- has been skipped, changed or has failed\n\n### Check input\n\nMonkeyble allows to check each instantiated argument value when the task is called:\n\n```yml\n  - task: \"my_task_name\"\n    test_input:\n      - assert_equal:\n          arg_name: module_argument\n          expected: \"my_value\"\n```\n\nMonkeyble support multiple test methods:\n\n- assert_equal\n- assert_not_equal\n- assert_in\n- assert_not_in\n- assert_true\n- assert_false\n- assert_is_none\n- assert_is_not_none\n- assert_list_equal\n- assert_dict_equal\n\n### Check output\n\nMonkeyble allows to check the output result dictionary of a task\n\n```yml\n  - task: \"my_task_name\"\n    test_output:\n      - assert_dict_equal:\n          dict_key: \"result.key.name\"\n          expected: \n            key1: \"my_value\"\n            key2: \"my_other_value\"\n```\n\nSame methods as the `test_input` are supported.\n\n### Task states\n\nMonkeyble allow to check the states of a task\n\n```yml\n  - task: \"my_task_name\"\n    should_be_skipped: false\n    should_be_changed: true\n    should_failed: false\n```\n\n### Cli \n\nMonkeyble comes with a CLI that allow to execute all tests from a single command and return a summary of test executions.\n```bash\nmonkeyble test\n\nPlaybook   | Scenario        | Test passed\n-----------+-----------------+-------------\n play1.yml | validate_test_1 | \u2705\n play1.yml | validate_test_2 | \u2705\n play2.yml | validate_this   | \u2705\n play2.yml | validate_that   | \u2705\n \n \ud83d\udc35 Monkeyble test result - Tests passed: 4 of 4 tests\n```\n\n### Monkey patching\n\nMonkey patching is a technique that allows you to intercept what a function would normally do, substituting its full execution with a return value of your own specification. \nIn the case of Ansible, the function is actually a module and the returned value is the \"result\" dictionary.\n\nConsider a scenario where you are working with public cloud API or infrastructure module. \nIn the context of testing, you do not want to create a real instance of an object in the cloud like a VM or a container orchestrator.\nBut you still need eventually the returned dictionary so the playbook can be executed entirely.\n\nMonkeyble allows to mock a task and return a specific value:\n```yml\n- task: \"my_task_name\"\n  mock:\n    config:\n      monkeyble_module:\n        consider_changed: true\n        result_dict:\n          my_key: \"mock value\"\n```\n\n## Do I need Monkeyble?\n\nThe common testing strategy when using Ansible is to deploy to a staging environment that simulates the production.\nWhen a role or a playbook is updated, we usually run an integration test battery against staging again before pushing in production.\n\nBut when our playbooks are exposed in an [Ansible Controller/AWX](https://www.ansible.com/products/controller) (ex Tower)\nor available as a service in a catalog like [Squest](https://github.com/HewlettPackard/squest), we need to be sure that we don't have any regressions \nwhen updating the code base, especially when modifying a role used by multiple playbooks. This is where Monkeyble is helpful. Placed in a CI/CD it will \nbe in charge of validating that the legacy code is always working as expected.\n\nMonkeyble is a tool that can help you to enhance the quality of your Ansible code base and can be coupled \nwith [official best practices](https://docs.ansible.com/ansible/latest/reference_appendices/test_strategies.html).\n\n## Contribute\n\nFeel free to fill an issue containing feature request(s), or (even better) to send a Pull request, we would be happy to collaborate with you.\n\n> If you like the project, star it \u2b50, it motivates us a lot \ud83d\ude42\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://hewlettpackard.github.io/monkeyble/",
            "keywords": "",
            "license": "GNU General Public License v3 (GPLv3)",
            "maintainer": "",
            "maintainer_email": "",
            "name": "monkeyble",
            "package_url": "https://pypi.org/project/monkeyble/",
            "platform": null,
            "project_url": "https://pypi.org/project/monkeyble/",
            "project_urls": {
                "Homepage": "https://hewlettpackard.github.io/monkeyble/"
            },
            "release_url": "https://pypi.org/project/monkeyble/1.1.0/",
            "requires_dist": [
                "tabulate (>=0.9.0)",
                "PyYAML (>=6.0)"
            ],
            "requires_python": ">=3.6",
            "summary": "End-to-end testing framework for Ansible",
            "version": "1.1.0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 15891459,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "7ba89741f43939313dab35d2c7651cb8",
                    "sha256": "1fcef62b4493000d4284df53bf5e86b679aac6624ccfd34a25bca329bc118ae4"
                },
                "downloads": -1,
                "filename": "monkeyble-1.1.0-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "7ba89741f43939313dab35d2c7651cb8",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.6",
                "size": 27317,
                "upload_time": "2022-11-25T15:45:56",
                "upload_time_iso_8601": "2022-11-25T15:45:56.181058Z",
                "url": "https://files.pythonhosted.org/packages/3a/d8/aaddf06509ece375953ecd027ecfb1838c842b9c1509894c2d398bc56fa6/monkeyble-1.1.0-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "9a9248d3d9b43f3aa6f3597ad04ca82b",
                    "sha256": "c0e260613f5e8792a4c2ef085fe0c2db0ccd4b081682d881d828bb406d18d1c7"
                },
                "downloads": -1,
                "filename": "monkeyble-1.1.0.tar.gz",
                "has_sig": false,
                "md5_digest": "9a9248d3d9b43f3aa6f3597ad04ca82b",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.6",
                "size": 32519,
                "upload_time": "2022-11-25T15:45:58",
                "upload_time_iso_8601": "2022-11-25T15:45:58.310199Z",
                "url": "https://files.pythonhosted.org/packages/59/6f/19de3a9b0960aad62f7aec208e9c9001edfc7eda48765095f0076a7785c7/monkeyble-1.1.0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}