{
    "0.0.1.0": {
        "info": {
            "author": "Lukas Hameury",
            "author_email": "lukas.hameury@libriciel.fr",
            "bugtrack_url": null,
            "classifiers": [],
            "description": "# Introduction\n\nC'est principalement une librairie \u00e9crite en Python permettant la communication avec le i-Parapheur en version 4.2+, au travers de l'API REST ou via webservice SOAP.\n\nElle offre des commandes accessibles depuis un shell standard, pour faciliter certaines op\u00e9rations d'exploitation.\n\n# Installation\n\nSur une distribution Ubuntu 18.04 LTS :\n\n* une instance i-Parapheur accessible en v4.4.0 ou plus\n* un environnement Python fonctionnel !\n* ajout de l'outil ` pip ` depuis un terminal BASH :\n\n```bash\nsudo bash\ncurl https://bootstrap.pypa.io/get-pip.py | python\n```\n\n* installation du paquet python `iparapheur-utils`, depuis un terminal BASH :\n\n```bash\nsudo pip install iparapheur-utils\n```\n\nSupport CentOS / RHEL :\n\n* Version 6 : Cette version n'est plus support\u00e9e, en cause une version de python trop ancienne (2.6)\n* Version 7 : Cette version requiert l'installation de paquets suppl\u00e9mentaires :  \n  `yum install libffi-devel gcc openssl-devel`\n\n# Usage\n\nCes commandes sont actuellement disponibles :\n\n- [`ph-init`](#ph-init)\n- [`ph-check`](#ph-check)\n- [`ph-echo`](#ph-echo)\n- [`ph-recupArchives`](#ph-recuparchives)\n- [`ph-export`](#ph-export)\n- [`ph-import`](#ph-import)\n- [`ph-rename`](#ph-rename)\n- [`ph-removeldap`](#ph-removeldap)\n- [`ph-pushdoc`](#ph-pushdoc)\n\n> Remarques : Elles sont con\u00e7ues pour \u00eatre ex\u00e9cut\u00e9es en environnement bash standard: ligne de commande, ou script BASH.  \nAucune qualification \u00e0 ce stade pour l'usage de ces commandes dans un interpr\u00e9teur Python.\n\n## `ph-init`\n\nCette commande permet la g\u00e9n\u00e9ration d'un fichier de configuration \"par d\u00e9faut\", qu'il faut bien s\u00fbr adapter au serveur.\n\nExemple d'utilisation :\n```bash\nusage: ph-init [-h] [-p P] [-c {recuparchives,export,import}]\n\nG\u00e9n\u00e8re un fichier de configuration par d\u00e9faut dans le r\u00e9pertoire courant\n\nArguments:\n  -h, --help            Affiche ce message et quitte\n  -p P                  Chemin du fichier de configuration\n  -c {recuparchives,export,import}\n                        Commande pour laquelle g\u00e9n\u00e9rer le fichier de\n                        configuration\n```\n\nLe lancement de la commande g\u00e9n\u00e8re un fichier `iparapheur-utils.cfg`, lu par d\u00e9faut lors de l'appel des autres fonctions\n\n## `ph-check`\n\nLance le script de check d'installation. Pas de pr\u00e9-requis particulier.\n\n## `ph-echo`\n\nLance la fonction `echo` vers le i-Parapheur d\u00e9sign\u00e9 dans le fichier de configuration.\n\nExemple d'utilisation :\n```bash\nph-echo -h\n---\nusage: ph-echo [-h] [-s S] [-c C] [-u U] [-p P]\n\nLance un echo via webservice sur un iParapheur\n\nArguments:\n  -h, --help  Affiche ce message et quitte\n  -s S        URL du serveur iParapheur\n  -c C        Fichier de configuration\n  -u U        Utilisateur\n  -p P        Mot de passe\n```\n\n## `ph-recupArchives`\n\nLance la fonction de r\u00e9cup\u00e9ration ou/et de purge des archives.\nIl est vivement conseill\u00e9 d'utiliser la commande `ph-init -c recuparchives` afin de g\u00e9n\u00e9rer un squelette de fichier de configuration complet.\n\nExemple d'utilisation :\n```bash\nph-recupArchives -h\n---\nusage: ph-recupArchives [-h] [-s S] [-c C] [-u U] [-p P] [-f F] [-ps PS]\n                        [-r {true,false}] [-pu {true,false}] [-d {true,false}]\n                        [-t T] [-st ST] [-w W]\n\nLance une r\u00e9cup\u00e9ration / purge des archives\n\nArguments:\n  -h, --help        Affiche ce message et quitte\n  -s S              URL du serveur iParapheur\n  -c C              Fichier de configuration\n  -u U              Utilisateur\n  -p P              Mot de passe\n  -f F              R\u00e9pertoire de destination\n  -ps PS            Taille des pages \u00e0 r\u00e9cup\u00e9rer\n  -r {true,false}   Chemins r\u00e9duis des t\u00e9l\u00e9chargements\n  -pu {true,false}  Active la purge les donn\u00e9es\n  -d {true,false}   T\u00e9l\u00e9charge les donn\u00e9es\n  -t T              Filtre sur type\n  -st ST            Filtre sur sous-type\n  -w W              D\u00e9lai de conservation des donn\u00e9es\n```\n\n## `ph-export`\n\nLance la fonction d'exporation de la configuration du parapheur vers un dossier.\nIl est vivement conseill\u00e9 d'utiliser la commande `ph-init -c export` afin de g\u00e9n\u00e9rer un squelette de fichier de configuration complet.\n\n**ATTENTION** : Seule la **configuration** du parapheur est export\u00e9e. Comprendre qu'aucun dossier, archive, statistique ou historique n'est conserv\u00e9.\n\nExemple d'utilisation :\n```bash\nusage: ph-export [-h] [-s S] [-c C] [-u U] [-p P] [-i I] [-dh DH] [-dp DP]\n                 [-du DU] [-dpw DPW] [-dd DD]\n\nExporte la configuration du parapheur cibl\u00e9 vers un dossier\n\nArguments:\n  -h, --help  Affiche ce message et quitte\n  -s S        URL du serveur iParapheur\n  -c C        Fichier de configuration\n  -u U        Utilisateur administrateur\n  -p P        Mot de passe\n  -i I        R\u00e9pertoire de destination\n  -dh DH      IP du serveur mysql\n  -dp DP      Port du serveur mysql\n  -du DU      Utilisateur alfresco de mysql\n  -dpw DPW    Mot de passe utilisateur alfresco de mysql\n  -dd DD      Nom de la base mysql\n```\n\n## `ph-import`\n\nLance la fonction d'importation de la configuration du parapheur \u00e0 partir d'un dossier.\nIl est vivement conseill\u00e9 d'utiliser la commande `ph-init -c import` afin de g\u00e9n\u00e9rer un squelette de fichier de configuration complet.\n\n**ATTENTION** : Seule la **configuration** du parapheur est import\u00e9e. Comprendre qu'aucun dossier, archive, statistique ou historique n'est conserv\u00e9.\n\nExemple d'utilisation :\n```bash\nusage: ph-import [-h] [-s S] [-c C] [-u U] [-p P] [-i I] [-dh DH] [-dp DP]\n                 [-du DU] [-dpw DPW] [-dd DD]\n\nImporte la configuration cibl\u00e9e dans un parapheur vierge\n\nArguments:\n  -h, --help  Affiche ce message et quitte\n  -s S        URL du serveur iParapheur\n  -c C        Fichier de configuration\n  -u U        Utilisateur administrateur\n  -p P        Mot de passe\n  -i I        R\u00e9pertoire \u00e0 importer\n  -dh DH      IP du serveur mysql\n  -dp DP      Port du serveur mysql\n  -du DU      Utilisateur alfresco de mysql\n  -dpw DPW    Mot de passe utilisateur alfresco de mysql\n  -dd DD      Nom de la base mysql\n```\n\n## `ph-rename`\n\nCette commande permet de changer l'URL d'acc\u00e8s au i-Parapheur\n\nExemple d'utilisation :\n```bash\nusage: ph-rename [-h] -n N\n\nChange l'URL d'acc\u00e8s du i-Parapheur\n\nArguments:\n  -h, --help  Affiche ce message et quitte\n  -n N        Nouvelle URL du serveur iParapheur\n\n```\n\nLe lancement de la commande modifie l'URL d'acc\u00e8s au i-Parapheur mais ne change pas la configuration du certificat serveur.\n\nIl est important de suivre la proc\u00e9dure de changement de certificat serveur donn\u00e9e apr\u00e8s le lancement de la commande.\n\n```bash\nATTENTION ! Le certificat configur\u00e9 dans le fichier /etc/nginx/conf.d/parapheur_ssl.conf \nne correspond potentiellement plus avec le nouveau nom du parapheur. \nIl convient de remplacer ce certificat (localis\u00e9 dans le dossier /etc/nginx/ssl/) \npour que le parapheur soit totalement fonctionnel.\n\nPropri\u00e9t\u00e9s \u00e0 modifier dans le fichier de configuration /etc/nginx/conf.d/parapheur_ssl.conf :\n- ssl_certficiate /etc/nginx/ssl/test.pem;     # Partie publique\n- ssl_certficiate_key /etc/nginx/ssl/test.key; # Partie priv\u00e9e\n\nUne fois les modifications de certificat effectu\u00e9es, relancer le service NginX :\nservice nginx restart\n```\n\n## `ph-removeldap`\n\nCette commande permet de supprimer les utilisateurs synchronis\u00e9s avec un LDAP n'ayant aucun bureau li\u00e9s.\n\nExemple d'utilisation :\n```bash\nusage: ph-removeldap [-h]\n\nSupprime les utilisateurs synchronis\u00e9s LDAP n'ayant aucune liaison avec un bureau\n\nArguments:\n  -h, --help  Affiche ce message et quitte\n\n```\n\n## `ph-pushdoc`\n\nLance la fonction d'importation de dossier via le connecteur g\u00e9n\u00e9rique Pushdoc.\nIl est vivement conseill\u00e9 d'utiliser la commande ` ph-init -c pushdoc ` afin de g\u00e9n\u00e9rer un squelette de fichier de configuration complet.\n\n**ATTENTION** : Des pr\u00e9-requis sont n\u00e9c\u00e9ssaires avant l'utilisation de cette commande :\n- Un jar pushdoc en derni\u00e8re version dans le m\u00eame dossier que ce script\n- Tout le n\u00e9c\u00e9ssaire pour faire fonctionner pushdoc (wsdl, conf.cf, keystore, truststore)\n- Le fichier par d\u00e9faut pour le visuel pdf des flux PES (template-visuelPDF.pdf)\n\nExemple d'utilisation :\n```bash\nusage: ph-pushdoc [-h] [-c C] [-j J] [-i I] [-e E] [-x X] [-v V]\n\nImporte la configuration cibl\u00e9e dans un parapheur vierge\n\nArguments:\n  -h, --help  Affiche ce message et quitte\n  -c C        Fichier de configuration\n  -j J        Fichier JAR du pushdoc\n  -i I        R\u00e9pertoire \u00e0 traiter\n  -e E        Courriel de l'utilisateur webservice\n  -x X        xPath par d\u00e9faut dans le cas d'un envoi de flux PES\n  -v V        Visuel PDF \u00e0 utiliser dans le cas d'un envoi de flux PES\n```\n\n\n# Utilisation en librairie\n\nD\u00e9finir un fichier de configuration `script.cfg` dans le r\u00e9pertoire racine via la commande `ph-init`, qui aura la forme suivante :\n\n```ini\n[Parapheur]\nusername = admin\npassword = admin\nserver = secure-iparapheur.dom.local\n```\n\nPuis, cr\u00e9er un script python avec utilisation de l'API REST :\n\n```python\n#!/usr/bin/env python\n# coding=utf-8\n\nimport parapheur\n\n# Init REST API client\nclient = parapheur.getrestclient()\n\nif client.islogged:\n    # Do a lot of things...\n```\n\nOu, pour une utilisation avec l'API SOAP :\n\n```python\n#!/usr/bin/env python\n# coding=utf-8\n\nimport parapheur\n\n# Init SOAP API client\nwebservice = parapheur.getsoapclient()\n\nwebservice.call().echo('Coucou, ici python !')\n```\n\nLe rendre \u00e9xecutable, puis le lancer depuis une console bash :\n\n```bash\nchmod +x ./script.py\n./script.py\n```\n\n# Cas sp\u00e9cifiques\n\n## Proxy\n\nIl est possible de contourner l'usage d'un proxy pour les appels Webservices ou API REST, \nsi le script \u00e0 lancer doit communiquer directement avec le serveur i-Parapheur \nsans passer par un \u00e9ventuel proxy d\u00e9fini sur le syst\u00e8me.\n\nPour cela, il suffit d'ajouter la variable **NO_PROXY** avant l'appel d'une fonction ou d'un script.\nPar exemple, pour un appel de `ph-echo` vers `secure-iparapheur.dom.local`, la commande sera :\n\n```bash\nNO_PROXY=\"secure-iparapheur.dom.local\" ph-echo\n```\n",
            "description_content_type": "",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://gitlab.libriciel.fr/i-parapheur/client-python",
            "keywords": "",
            "license": "CeCILL v2",
            "maintainer": "",
            "maintainer_email": "",
            "name": "iparapheur-utils.branches",
            "package_url": "https://pypi.org/project/iparapheur-utils.branches/",
            "platform": "",
            "project_url": "https://pypi.org/project/iparapheur-utils.branches/",
            "project_urls": {
                "Homepage": "https://gitlab.libriciel.fr/i-parapheur/client-python"
            },
            "release_url": "https://pypi.org/project/iparapheur-utils.branches/0.0.1.0/",
            "requires_dist": null,
            "requires_python": "",
            "summary": "Client python pour i-Parapheur",
            "version": "0.0.1.0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 4739151,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "185ae1ce190caa8ea1ff070e9a2625ec",
                    "sha256": "cb5910d8673db8c389351e8f8ff194608ba35d4d6005ddfb099d70575b3db329"
                },
                "downloads": -1,
                "filename": "iparapheur-utils.branches-0.0.1.0.tar.gz",
                "has_sig": false,
                "md5_digest": "185ae1ce190caa8ea1ff070e9a2625ec",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": null,
                "size": 46760,
                "upload_time": "2019-01-25T09:01:32",
                "upload_time_iso_8601": "2019-01-25T09:01:32.940490Z",
                "url": "https://files.pythonhosted.org/packages/0e/25/d7587bee5e6e6bf79aba128570da31c9aa3f68743f81c47ecf87f8db9822/iparapheur-utils.branches-0.0.1.0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}