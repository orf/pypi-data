{
    "0.1.2": {
        "info": {
            "author": "Martin Schrodt (spheenik)",
            "author_email": "martin@schrodt.org",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 3 - Alpha",
                "Intended Audience :: System Administrators",
                "License :: OSI Approved :: MIT License",
                "Operating System :: POSIX :: Linux",
                "Programming Language :: Python :: 3.6",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8",
                "Topic :: System :: Systems Administration"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/spheenik/vfio-isolate",
            "keywords": "vfio cpu isolation",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "vfio-isolate",
            "package_url": "https://pypi.org/project/vfio-isolate/",
            "platform": "",
            "project_url": "https://pypi.org/project/vfio-isolate/",
            "project_urls": {
                "Homepage": "https://github.com/spheenik/vfio-isolate"
            },
            "release_url": "https://pypi.org/project/vfio-isolate/0.1.2/",
            "requires_dist": [
                "click (~=7.1.2)",
                "psutil (~=5.7.0)",
                "parsimonious (~=0.8.1)"
            ],
            "requires_python": ">=3.6, <4",
            "summary": "Commandline tool to facilitate CPU core isolation",
            "version": "0.1.2",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 11212743,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "8a14181fe6dae92ba541c3de4ceb9dbe",
                    "sha256": "ad018f229390ade15a66487a0761ff04c8f8ef7b58a797e68ce6a577fbf9783a"
                },
                "downloads": -1,
                "filename": "vfio_isolate-0.1.2-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "8a14181fe6dae92ba541c3de4ceb9dbe",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.6, <4",
                "size": 7614,
                "upload_time": "2020-05-03T13:35:42",
                "upload_time_iso_8601": "2020-05-03T13:35:42.501672Z",
                "url": "https://files.pythonhosted.org/packages/32/b3/5f510b1d8105355dce1ff55f43d4f9d1cb2444de1b75f76f8cb163ddff3e/vfio_isolate-0.1.2-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "ddbc22fe8f619051012c36534d3a5c37",
                    "sha256": "3f7ea311a69e959a089f64e533800d411c596bd203922d03b8c16f54c0d5d36e"
                },
                "downloads": -1,
                "filename": "vfio-isolate-0.1.2.tar.gz",
                "has_sig": false,
                "md5_digest": "ddbc22fe8f619051012c36534d3a5c37",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.6, <4",
                "size": 6853,
                "upload_time": "2020-05-03T13:35:44",
                "upload_time_iso_8601": "2020-05-03T13:35:44.393273Z",
                "url": "https://files.pythonhosted.org/packages/8a/92/e3d1abb028ea6ca902b86a887d4a3f1c5db1f8f8b132dcffe3e0ef28ec6e/vfio-isolate-0.1.2.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.1.3": {
        "info": {
            "author": "Martin Schrodt (spheenik)",
            "author_email": "martin@schrodt.org",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 3 - Alpha",
                "Intended Audience :: System Administrators",
                "License :: OSI Approved :: MIT License",
                "Operating System :: POSIX :: Linux",
                "Programming Language :: Python :: 3.6",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8",
                "Topic :: System :: Systems Administration"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/spheenik/vfio-isolate",
            "keywords": "vfio cpu isolation",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "vfio-isolate",
            "package_url": "https://pypi.org/project/vfio-isolate/",
            "platform": "",
            "project_url": "https://pypi.org/project/vfio-isolate/",
            "project_urls": {
                "Homepage": "https://github.com/spheenik/vfio-isolate"
            },
            "release_url": "https://pypi.org/project/vfio-isolate/0.1.3/",
            "requires_dist": [
                "click (~=7.1.2)",
                "psutil (~=5.7.0)",
                "parsimonious (~=0.8.1)"
            ],
            "requires_python": ">=3.6, <4",
            "summary": "Commandline tool to facilitate CPU core isolation",
            "version": "0.1.3",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 11212743,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "a9dbb17f64a40a4e40b0f250e3f06baa",
                    "sha256": "c3ccea4e27484de1e3617c9814899f3fcf87eaaafb0a1091dda14c6ff033fd76"
                },
                "downloads": -1,
                "filename": "vfio_isolate-0.1.3-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "a9dbb17f64a40a4e40b0f250e3f06baa",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.6, <4",
                "size": 7612,
                "upload_time": "2020-05-03T13:36:15",
                "upload_time_iso_8601": "2020-05-03T13:36:15.774166Z",
                "url": "https://files.pythonhosted.org/packages/6f/7a/2ce39cde30a8df15b44c38decbe1f848dc96a9702d7fdcfbb61cd999df92/vfio_isolate-0.1.3-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "c1c486a0003defab7fc45f278950cd45",
                    "sha256": "87b3e4c68d9c769dca1f57ef5f301be57abb44d93561ca10a11ec9570eebc9b7"
                },
                "downloads": -1,
                "filename": "vfio-isolate-0.1.3.tar.gz",
                "has_sig": false,
                "md5_digest": "c1c486a0003defab7fc45f278950cd45",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.6, <4",
                "size": 6850,
                "upload_time": "2020-05-03T13:36:17",
                "upload_time_iso_8601": "2020-05-03T13:36:17.132599Z",
                "url": "https://files.pythonhosted.org/packages/ef/74/5ddaf9af25fdb4a479e8529ea3e3fabe22fdf45ce297527bc524d1fadbf5/vfio-isolate-0.1.3.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.2.0": {
        "info": {
            "author": "Martin Schrodt (spheenik)",
            "author_email": "martin@schrodt.org",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 3 - Alpha",
                "Intended Audience :: System Administrators",
                "License :: OSI Approved :: MIT License",
                "Operating System :: POSIX :: Linux",
                "Programming Language :: Python :: 3.6",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8",
                "Topic :: System :: Systems Administration"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/spheenik/vfio-isolate",
            "keywords": "vfio cpu isolation",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "vfio-isolate",
            "package_url": "https://pypi.org/project/vfio-isolate/",
            "platform": "",
            "project_url": "https://pypi.org/project/vfio-isolate/",
            "project_urls": {
                "Homepage": "https://github.com/spheenik/vfio-isolate"
            },
            "release_url": "https://pypi.org/project/vfio-isolate/0.2.0/",
            "requires_dist": null,
            "requires_python": ">=3.6, <4",
            "summary": "Commandline tool to facilitate CPU core isolation",
            "version": "0.2.0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 11212743,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "64a3c4666bcd59f8e1cf1348937a8be1",
                    "sha256": "9e5079d1514831a2ffcdade2b1e34400c8ea5ad356161d61834de7aec12225c1"
                },
                "downloads": -1,
                "filename": "vfio-isolate-0.2.0.tar.gz",
                "has_sig": false,
                "md5_digest": "64a3c4666bcd59f8e1cf1348937a8be1",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.6, <4",
                "size": 11876,
                "upload_time": "2020-05-24T13:27:31",
                "upload_time_iso_8601": "2020-05-24T13:27:31.611866Z",
                "url": "https://files.pythonhosted.org/packages/d8/93/f6b42aba1e54d08fc398190a42d33e8bb7008b07a0e006bac1fd0992007d/vfio-isolate-0.2.0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.2.1": {
        "info": {
            "author": "Martin Schrodt (spheenik)",
            "author_email": "martin@schrodt.org",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 3 - Alpha",
                "Intended Audience :: System Administrators",
                "License :: OSI Approved :: MIT License",
                "Operating System :: POSIX :: Linux",
                "Programming Language :: Python :: 3.6",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8",
                "Topic :: System :: Systems Administration"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/spheenik/vfio-isolate",
            "keywords": "vfio cpu isolation",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "vfio-isolate",
            "package_url": "https://pypi.org/project/vfio-isolate/",
            "platform": "",
            "project_url": "https://pypi.org/project/vfio-isolate/",
            "project_urls": {
                "Homepage": "https://github.com/spheenik/vfio-isolate"
            },
            "release_url": "https://pypi.org/project/vfio-isolate/0.2.1/",
            "requires_dist": null,
            "requires_python": ">=3.6, <4",
            "summary": "Commandline tool to facilitate CPU core isolation",
            "version": "0.2.1",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 11212743,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "2a6e1085fd51c90c5228417ff46e04c5",
                    "sha256": "f33fcf123578d4670dd28e2b2c3c750c54daa33aad0dc6afc1b93992638eecc3"
                },
                "downloads": -1,
                "filename": "vfio-isolate-0.2.1.tar.gz",
                "has_sig": false,
                "md5_digest": "2a6e1085fd51c90c5228417ff46e04c5",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.6, <4",
                "size": 11881,
                "upload_time": "2020-05-24T14:36:42",
                "upload_time_iso_8601": "2020-05-24T14:36:42.093200Z",
                "url": "https://files.pythonhosted.org/packages/11/4d/9d0150bae656fee56ba64a7ab22a86f426cd9941450b76e8dd47d7cc3248/vfio-isolate-0.2.1.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.2.2": {
        "info": {
            "author": "Martin Schrodt (spheenik)",
            "author_email": "martin@schrodt.org",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 3 - Alpha",
                "Intended Audience :: System Administrators",
                "License :: OSI Approved :: MIT License",
                "Operating System :: POSIX :: Linux",
                "Programming Language :: Python :: 3.6",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8",
                "Topic :: System :: Systems Administration"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/spheenik/vfio-isolate",
            "keywords": "vfio cpu isolation",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "vfio-isolate",
            "package_url": "https://pypi.org/project/vfio-isolate/",
            "platform": "",
            "project_url": "https://pypi.org/project/vfio-isolate/",
            "project_urls": {
                "Homepage": "https://github.com/spheenik/vfio-isolate"
            },
            "release_url": "https://pypi.org/project/vfio-isolate/0.2.2/",
            "requires_dist": null,
            "requires_python": ">=3.6, <4",
            "summary": "Commandline tool to facilitate CPU core isolation",
            "version": "0.2.2",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 11212743,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "9897c424ac9034e8a03b1ad980853750",
                    "sha256": "2ba5e40c5163335255029cc09b7a72e0929b685992a3e72458506affba8dc335"
                },
                "downloads": -1,
                "filename": "vfio-isolate-0.2.2.tar.gz",
                "has_sig": false,
                "md5_digest": "9897c424ac9034e8a03b1ad980853750",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.6, <4",
                "size": 11913,
                "upload_time": "2020-05-24T15:06:03",
                "upload_time_iso_8601": "2020-05-24T15:06:03.654823Z",
                "url": "https://files.pythonhosted.org/packages/60/a3/39d392f39e1515f5514358aebe3ecdc2a48733be531b091b67cf36b9d10a/vfio-isolate-0.2.2.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.3.0": {
        "info": {
            "author": "Martin Schrodt (spheenik)",
            "author_email": "martin@schrodt.org",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 3 - Alpha",
                "Intended Audience :: System Administrators",
                "License :: OSI Approved :: MIT License",
                "Operating System :: POSIX :: Linux",
                "Programming Language :: Python :: 3.6",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8",
                "Topic :: System :: Systems Administration"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/spheenik/vfio-isolate",
            "keywords": "vfio cpu isolation",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "vfio-isolate",
            "package_url": "https://pypi.org/project/vfio-isolate/",
            "platform": "",
            "project_url": "https://pypi.org/project/vfio-isolate/",
            "project_urls": {
                "Homepage": "https://github.com/spheenik/vfio-isolate"
            },
            "release_url": "https://pypi.org/project/vfio-isolate/0.3.0/",
            "requires_dist": null,
            "requires_python": ">=3.6, <4",
            "summary": "Commandline tool to facilitate CPU core isolation",
            "version": "0.3.0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 11212743,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "b7779bf963ed7b18d85bb308194a0c28",
                    "sha256": "fbbbce99df3718b1aafa124c66039c60f00ad43633d06dbd2befd3f375940926"
                },
                "downloads": -1,
                "filename": "vfio-isolate-0.3.0.tar.gz",
                "has_sig": false,
                "md5_digest": "b7779bf963ed7b18d85bb308194a0c28",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.6, <4",
                "size": 12655,
                "upload_time": "2020-05-24T20:26:05",
                "upload_time_iso_8601": "2020-05-24T20:26:05.848261Z",
                "url": "https://files.pythonhosted.org/packages/8b/ef/8a4e4bbd5c79d34387c4b4348bdc5dded32a415a2981e6a79655919801c9/vfio-isolate-0.3.0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.3.1": {
        "info": {
            "author": "Martin Schrodt (spheenik)",
            "author_email": "martin@schrodt.org",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 3 - Alpha",
                "Intended Audience :: System Administrators",
                "License :: OSI Approved :: MIT License",
                "Operating System :: POSIX :: Linux",
                "Programming Language :: Python :: 3.6",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8",
                "Topic :: System :: Systems Administration"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/spheenik/vfio-isolate",
            "keywords": "vfio cpu isolation",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "vfio-isolate",
            "package_url": "https://pypi.org/project/vfio-isolate/",
            "platform": "",
            "project_url": "https://pypi.org/project/vfio-isolate/",
            "project_urls": {
                "Homepage": "https://github.com/spheenik/vfio-isolate"
            },
            "release_url": "https://pypi.org/project/vfio-isolate/0.3.1/",
            "requires_dist": null,
            "requires_python": ">=3.6, <4",
            "summary": "Commandline tool to facilitate CPU core isolation",
            "version": "0.3.1",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 11212743,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "6ce1d98928a18675039d9322fae27091",
                    "sha256": "a4ace7d32b386ba30a1bdddfa412566b7153c234de023c27d0b427460533a1b6"
                },
                "downloads": -1,
                "filename": "vfio-isolate-0.3.1.tar.gz",
                "has_sig": false,
                "md5_digest": "6ce1d98928a18675039d9322fae27091",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.6, <4",
                "size": 12718,
                "upload_time": "2020-05-26T21:18:09",
                "upload_time_iso_8601": "2020-05-26T21:18:09.472887Z",
                "url": "https://files.pythonhosted.org/packages/e8/c4/e86ec176e1025eda2f856d5c5d280953fb3c5d44effd12ee0d4939d56e13/vfio-isolate-0.3.1.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.4.0": {
        "info": {
            "author": "Martin Schrodt (spheenik)",
            "author_email": "martin@schrodt.org",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 3 - Alpha",
                "Intended Audience :: System Administrators",
                "License :: OSI Approved :: MIT License",
                "Operating System :: POSIX :: Linux",
                "Programming Language :: Python :: 3.6",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8",
                "Topic :: System :: Systems Administration"
            ],
            "description": "# vfio-isolate\n\nvfio-isolate is a command linux tool for Linux, which aims to facilitate CPU and\nmemory isolation for running virtual machines with guaranteed latency.\n\n```\nUsage: vfio-isolate [OPTIONS] COMMAND1 [ARGS]... [COMMAND2 [ARGS]...]...\n\nOptions:\n  -v, --verbose                enable verbose output\n  -d, --debug                  enable debug output\n  -u, --undo-file <undo-file>  Create a file that describes the operations\n                               needed to undo\n\n  --help                       Show this message and exit.\n\nCommands:\n  compact-memory  compact memory\n  cpu-governor    set the CPU governor for the given CPUs\n  cpuset-create   create a cpuset\n  cpuset-delete   delete a cpuset\n  cpuset-modify   modify a cpuset\n  drop-caches     drop caches\n  irq-affinity    manipulate the IRQ affinity\n  move-tasks      move tasks between cpusets\n  restore         restore a previous state using an undo file\n```\n\n#### Usage\n\nTo \"partion\" your CPU between the host and your VM, a mechanism of the Linx kernel, named \"cgroups\" is used.\nThere exist 2 versions of cgroup, v1 and v2. Some options are only available for cgroups v1.\n\nTo find out what version your system is using use the following command\n\n```\nmount | grep cgroup\n```\n\nit will show type cgroup for v1, and cgroup2 vor v2.\n\nCPU sets are part of cgroups, and define the subset of cores processes in a cgroup are allowed to be scheduled on.\n\nFor cgroups v1, they also have some other properties:\n\n| Feature | Description |\n| --- | --- |\n|cpu-exclusivity| prevents other sibling cpusets to use the cpus of this cpuset|\n|mem-exclusivity| prevents other sibling cpusets to use the memory (NUMA) of this cpuset|\n|mem-migration| only effective on NUMA systems: when enabled, processes in this cpuset will have their memory migrated to the node they are running on |\n|scheduler-load-balance | when enabled, the scheduler will try to load balance processes within the available cpus |\n\nFor more information, see the kernel documentation at https://www.kernel.org/doc/Documentation/cgroup-v1/cpusets.txt\n\n#### Non NUMA example (cgroups v2)\n\nIn this example, an AMD 5950x is partitioned between host and VM. \nThe example further assumes that you are using\nsystemd, which has created the cgroups system.slice and user.slice already.\n\nThe VM is configured so that it exclusively uses the 8 cores of the second die.\nThe last core of the first die is used for emulation and IO work, and the first seven are for the host.\n\nThe command to use would be this:\n\n```\n sudo vfio-isolate \\ \n    cpuset-modify --cpus C0-6,16-22 /system.slice \\\n    cpuset-modify --cpus C0-6,16-22 /user.slice\n```\n\nThis will instruct the two existing cgroups that systemd created to only use the first 6 cores.\nTo pin the VM cores, use libvirt:\n\n```\n  <vcpu placement='static'>16</vcpu>\n  <iothreads>1</iothreads>\n  <cputune>\n    <vcpupin vcpu='0' cpuset='8'/>\n    <vcpupin vcpu='1' cpuset='24'/>\n    <vcpupin vcpu='2' cpuset='9'/>\n    <vcpupin vcpu='3' cpuset='25'/>\n    <vcpupin vcpu='4' cpuset='10'/>\n    <vcpupin vcpu='5' cpuset='26'/>\n    <vcpupin vcpu='6' cpuset='11'/>\n    <vcpupin vcpu='7' cpuset='27'/>\n    <vcpupin vcpu='8' cpuset='12'/>\n    <vcpupin vcpu='9' cpuset='28'/>\n    <vcpupin vcpu='10' cpuset='13'/>\n    <vcpupin vcpu='11' cpuset='29'/>\n    <vcpupin vcpu='12' cpuset='14'/>\n    <vcpupin vcpu='13' cpuset='30'/>\n    <vcpupin vcpu='14' cpuset='15'/>\n    <vcpupin vcpu='15' cpuset='31'/>\n    <emulatorpin cpuset='7,23'/>\n    <iothreadpin iothread='1' cpuset='7,23'/>\n    <vcpusched vcpus='0' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='1' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='2' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='3' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='4' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='5' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='6' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='7' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='8' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='9' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='10' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='11' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='12' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='13' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='14' scheduler='rr' priority='1'/>\n    <vcpusched vcpus='15' scheduler='rr' priority='1'/>\n    <iothreadsched iothreads='1' scheduler='fifo' priority='98'/>\n  </cputune>\n```\n\n#### Non NUMA example (cgroups v1)\n\nIn this example, we have a 6 core, 12 thread CPU from Intel, and we want to leave the first 2 cores for host, IO and\nemulation work, while giving the remaining 4 cores to the VM.\n\nThe command to use would be this:\n\n```\n sudo vfio-isolate \\ \n    cpuset-create --cpus C0-1,6-7 /host.slice \\\n    move-tasks / /host.slice\n```\n\nThis will move all the processes from the root cgroup to your newly created host.slice, and assigns only the first two \nphysical cores for execution.\n\nTo now make your VM use the now remaining idle cores, you can use libvirt:\n```\n<vcpu placement='static' cpuset='0-11'>8</vcpu>\n  <vcpupin vcpu=\"0\" cpuset=\"2\"/>\n  <vcpupin vcpu=\"1\" cpuset=\"8\"/>\n  <vcpupin vcpu=\"2\" cpuset=\"3\"/>\n  <vcpupin vcpu=\"3\" cpuset=\"9\"/>\n  <vcpupin vcpu=\"4\" cpuset=\"4\"/>\n  <vcpupin vcpu=\"5\" cpuset=\"10\"/>\n  <vcpupin vcpu=\"4\" cpuset=\"5\"/>\n  <vcpupin vcpu=\"5\" cpuset=\"11\"/>\n  <emulatorpin cpuset=\"0-1,6-7\"/>\n  <iothreadpin iothread=\"1\" cpuset=\"0-1,6-7\"/>\n</cputune>\n```\n\nTo manually undo the previous command:\n\n```\n sudo vfio-isolate \\ \n    cpuset-delete /host.slice\n```\n\nOr you could use the undo feature built into vfio-isolate (see below).\n\nAll processes in a cpuset will be moved to its parent cpuset upon deletion.\n\n#### NUMA example (cgroups v1)\n\nIf you have a system with more than one NUMA nodes, you might want to isolate according to the different nodes.\nFor example, on an AMD Threadripper 1920X (12 core, 24 thread), which has 2 NUMA nodes, you could do the following\n\n```\n sudo vfio-isolate \\ \n    cpuset-create --cpus N0 --mems N0 -mm /host.slice \\\n    move-tasks / /host.slice\n```\n\nThis will configure NUMA Node 0, in this case CPU 0-5,12-17 for the host, while configuring NUMA node 1 for \nthe VM (6-11,18-23). The `-mm` parameter enables memory migration, so that processes moving into either the host or\nthe VM cpuset will have their memory migrated to the right node.\n\n#### Undo\n\nvfio-isolate is able to record all the changes that it did and storing a recipe to undo them into a file, to be executed\nlater.\n\n```\n sudo vfio-isolate -u /tmp/undo_description \\ \n    cpuset-create --cpus C1-4 /test.slice\n```\n\nThis will create the `test.slice` cpuset, and also a file `/tmp/undo_description` that when executed like this\n\n```\n sudo vfio-isolate restore /tmp/undo_description\n```\n\nwill remove `test.slice`. This works with all the subcommands that vfio-isolate supports. \n\n#### IRQ affinity\n\nvfio-isolate contains basic support for disabling IRQ handler execution on certain cpus:\n\n```\n sudo vfio-isolate -u /tmp/undo_irq irq-affinity mask C2-5,8-11\n```\n\nwill prevent IRQ execution on the mentioned cpuset.\nIt will also write an undo description in `/tmp/undo_irq` which can be used to restore the previous state:\n\n```\n sudo vfio-isolate restore /tmp/undo_irq\n```\n\n#### setting CPU governor\n\nvfio-isolate contains basic support for setting the CPU frequency governor for selected CPUs:\n\n```\n sudo vfio-isolate -u /tmp/undo_gov cpu-governor performance C2-5,8-11\n```\n\nwill set the mentioned CPUs to performance mode.\nIt will also write an undo description in `/tmp/undo_gov` which can be used to restore the previous state:\n\n```\n sudo vfio-isolate restore /tmp/undo_gov\n```\n\n#### Fully featured example (/etc/libvirt/hooks/qemu):\n\n```\n#!/bin/bash\n\nHCPUS=0-6,16-22\nMCPUS=8-15,24-31\n\nUNDOFILE=/var/run/libvirt/qemu/vfio-isolate-undo.bin\n\ndisable_isolation () {\n\tvfio-isolate \\\n\t\trestore $UNDOFILE\n\n\ttaskset -pc 0-31 2  # kthreadd reset\n}\n\nenable_isolation () {\n\tvfio-isolate \\\n\t\t-u $UNDOFILE \\\n\t\tdrop-caches \\\n\t\tcpuset-modify --cpus C$HCPUS /system.slice \\\n\t\tcpuset-modify --cpus C$HCPUS /user.slice \\\n\t\tcompact-memory \\\n\t\tirq-affinity mask C$MCPUS\n\n\ttaskset -pc $HCPUS 2  # kthreadd only on host cores\n}\n\ncase \"$2\" in\n\"prepare\")\n\tenable_isolation\n\t;;\n\"started\")\n\t;;\n\"release\")\n\tdisable_isolation\n\t;;\nesac\n```\n\n   \n\n\n\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/spheenik/vfio-isolate",
            "keywords": "vfio cpu isolation",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "vfio-isolate",
            "package_url": "https://pypi.org/project/vfio-isolate/",
            "platform": "",
            "project_url": "https://pypi.org/project/vfio-isolate/",
            "project_urls": {
                "Homepage": "https://github.com/spheenik/vfio-isolate"
            },
            "release_url": "https://pypi.org/project/vfio-isolate/0.4.0/",
            "requires_dist": null,
            "requires_python": ">=3.6, <4",
            "summary": "Commandline tool to facilitate CPU core isolation",
            "version": "0.4.0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 11212743,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "78ecc44526d68ebf9fefade84d99e413",
                    "sha256": "98091428e928183cd20959ce7e3eef3f95deff7487281f4db651074e45662249"
                },
                "downloads": -1,
                "filename": "vfio-isolate-0.4.0.tar.gz",
                "has_sig": false,
                "md5_digest": "78ecc44526d68ebf9fefade84d99e413",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.6, <4",
                "size": 15678,
                "upload_time": "2021-08-18T15:58:01",
                "upload_time_iso_8601": "2021-08-18T15:58:01.704269Z",
                "url": "https://files.pythonhosted.org/packages/df/be/bca8351fb9f775fa95161befb6995c09eebe03b575f4068f6a0766c8e83c/vfio-isolate-0.4.0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}