{
    "0.1.1": {
        "info": {
            "author": "FengLiuFeseliud",
            "author_email": "17351198406@qq.com",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: MIT License",
                "Operating System :: OS Independent",
                "Programming Language :: Python :: 3"
            ],
            "description": "# PyHP-web\n\n\u4e00\u79cd Python \u8f7b\u91cf\u5f02\u6b65 Web \u670d\u52a1\u7aef (\u539f\u751f\u5f02\u6b65 socket \u5b9e\u73b0)\uff0c\u5728\u8bf7\u6c42\u9875\u9762\u65f6\u540e\u7aef\u6267\u884c Html \u6587\u4ef6\u4e2d\u7684 Python \u4ee3\u7801\u52a8\u6001\u751f\u6210\u9875\u9762\n\n\u53ef\u4ee5\u5728 Html \u6587\u4ef6\u4e2d\u4f7f\u7528\u5404\u79cd Python \u5e93\uff0c\u975e\u5e38\u9002\u5408\u4e0d\u7528\u5904\u7406\u5927\u91cf\u8bf7\u6c42\u7684 web \u7ebf\u4e0a\u5de5\u5177\n\n![img](https://img.sakuratools.top/docs/pyhp/pyhp0.png@0x0x0.5x80)\n\n## \u5b89\u88c5\n\npyhp \u5b89\u88c5\u4f7f\u7528 pip\n\n```bash\npip install pyhpweb\n```\n\n## Demo\n\n\u540e\u7aef\u4ee3\u7801\n\n```python\n<?py \n    import time \n\n    time = time.asctime(time.localtime(time.time()))\n?>\n<div>\n    <?py print(f\"<h2>{time}</h2>\") ?>\n    <div>\n        <h3> GET </h3>\n        <form action=\"\" method=\"GET\">\n        First name: <input type=\"text\" name=\"firstName\"><br>\n        Last name: <input type=\"text\" name=\"lastName\"><br>\n        <input type=\"submit\" value=\"\u63d0\u4ea4\">\n        </form>\n    </div>\n    <div>\n        <h3> POST </h3>\n        <form action=\"\" method=\"POST\">\n        First name: <input type=\"text\" name=\"firstName\"><br>\n        Last name: <input type=\"text\" name=\"lastName\"><br>\n        <input type=\"submit\" value=\"\u63d0\u4ea4\">\n        </form>\n    </div>\n</div>\n\n<?py\n    from pyhpweb import __version__\n\n    print(\n        \"<p>http_version: %s</p>\" % request_path[\"http_version\"],\n        \"<p>request_mode: %s</p>\" % request_path[\"mode\"],\n        \"<p>request_path: %s</p>\" % request_path[\"path\"],\n        \"<p>url: %s</p>\" % url,\n        f\"<p>get: {get}</p>\",\n        f\"<p>post: {post}</p>\",\n        f\"<p>cookie: {cookie}</p>\",\n        f\"<p>request_header: {request_header}</p>\",\n        f\"<p>request_data: {request_data}</p>\",\n        f\"<p>PyHP version {__version__}</p>\"\n    ) \n?>\n\n```\n\n\u5ba2\u6237\u7aef\u8bf7\u6c42\u751f\u6210\u52a8\u6001\u9875\u9762\n\n![img](https://img.sakuratools.top/docs/pyhp/pyhp1.png@0x0x0.8x80)\n\n![img](https://img.sakuratools.top/docs/pyhp/pyhp2.png@0x0x0.8x80)\n\n## \u5feb\u901f\u5165\u95e8\n\n\u4f7f\u7528 PyHP \u65f6\u9700\u8981\u5148\u542f\u52a8 PyHP \u670d\u52a1\uff0c\u5982\u4e0b\u521b\u5efa\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u670d\u52a1\u5668\u6587\u4ef6\uff0c\u8fd0\u884c\u540e\u542f\u52a8 PyHP \u670d\u52a1\uff0c\u9ed8\u8ba4\u7f51\u7ad9\u6839\u76ee\u5f55\u4e3a\u670d\u52a1\u5668\u6587\u4ef6\u6240\u5728\u6587\u4ef6\u5939\uff0c\u5982\u679c Linux \u4e0b\u6709\u5b89\u88c5 uvloop PyHP \u5c06\u81ea\u52a8\u542f\u7528\n\n```python\nfrom pyhpweb import PyHP_Server\n\nPyHP_Server().start()\n```\n\n\u9ed8\u8ba4\u542f\u52a8\u540e\u53ef\u4ee5\u8bbf\u95ee [http://127.0.0.1:5000/](http://127.0.0.1:5000/)\n\n### \u4e3b\u9875\n\n\u4f7f\u7528 `.html` `.py` `.pyhtml` `.pyh` \u7684\u6587\u4ef6\u90fd\u4f1a\u88ab pyhp \u89e3\u6790\uff0c\u4e0d\u8fc7\u8fd8\u662f\u63a8\u8350\u4f7f\u7528 `.pyhtml` `.pyh`\uff0cPyHP \u670d\u52a1\u9ed8\u8ba4\u542f\u52a8\u540e\u4e3b\u9875\u4e3a\u7f51\u7ad9\u8def\u5f84\u4e0b\u7684 `index.pyh` \uff0c\u5728\u6ca1\u6709\u4e3b\u9875\u65f6\u8bbf\u95ee [http://127.0.0.1:5000/](http://127.0.0.1:5000/) \u4f1a\u53d1\u751f 404\n\n\u7b80\u5355\u521b\u5efa\u4e00\u4e2a\u4e3b\u9875\u663e\u793a PyHP \u670d\u52a1\u5df2\u7ecf\u542f\u52a8\n\n```python\n<?py\n    from pyhpweb import __version__\n    \n    # \u8fd9\u91cc\u7684 print \u5c06\u5411\u9875\u9762\u8f93\u5165\n    print(f\"<h2>PyHP v{__version__}</h2>\")\n?>\n\n<h3>Run in Server</h3>\n```\n\n\u6548\u679c\n\n![img](https://img.sakuratools.top/docs/pyhp/pyhp3.png@0x0x0.8x80)\n\n### \u4ee3\u7801\u5757\n\nPyHP \u5728 html \u9875\u9762\u4e2d\u7684\u4efb\u4f55\u5730\u65b9\u90fd\u53ef\u4ee5\u6267\u884c Python \u4ee3\u7801\u53ea\u9700\u8981\u4f7f\u7528 `<?py \u4f60\u7684\u4ee3\u7801 ?>` \u8bf4\u660e\n\n\u524d\u9762\u4ee3\u7801\u5757\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u5728\u540e\u9762\u7684\u4ee3\u7801\u5757\u90fd\u53ef\u4ee5\u4f7f\u7528\uff0c\u4f46\u662f\u524d\u9762\u4ee3\u7801\u5757\u5f15\u7528\u7684\u6a21\u5757\uff0c\u5728\u540e\u9762\u7684\u4ee3\u7801\u5757\u4e0d\u53ef\u4ee5\u4f7f\u7528\n\n\u4ee3\u7801\u5757 `print` \u4f1a\u5411\u9875\u9762\u8f93\u51fa\uff0c\u4ee3\u7801\u5757 `print` \u7684\u6570\u636e\u5c06\u5728\u8fd9\u5757\u4ee3\u7801\u5757\u6267\u884c\u5b8c\u540e\uff0c\u66ff\u6362\u8fd9\u5757\u4ee3\u7801\u5757 \uff08\u4ee3\u7801\u5757\u5728\u54ea\u4e2a\u5143\u7d20\u4e2d `print` \u7684\u6570\u636e\u5c31\u4f1a\u5728\u54ea\u4e2a\u5143\u7d20\u4e2d\uff0c\u5982\u679c\u9700\u8981\u76f4\u63a5\u8f93\u51fa\u8bf7\u6c42\u6570\u636e\u4f7f\u7528 `html_encode` \u53ef\u4ee5\u9632\u6b62 xss \u653b\u51fb ,`from pyhp.tools import html_encode` \u5f15\u7528 `html_encode`\n\n```python\n<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<meta charset=\"utf-8\">\n<head>\n    <meta charset=\"utf-8\">\n    <title>\u6d4b\u8bd5\u4ee3\u7801\u5757</title>\n</head>\n\n<!-- \u6807\u51c6\u4ee3\u7801\u5757 -->\n<?py\n    p_style = \"color:blue;text-align:center\"\n    p_text = \"Hi PyHP!!!\"\n?>\n\n<body>\n    <!-- \u884c\u4ee3\u7801\u5757 -->\n\n    <!-- \u53d8\u91cf\u8f93\u51fa \u52a8\u6001\u6837\u5f0f \u52a8\u6001\u5167\u5bb9 -->\n    <p style=\"<?py print(p_style) ?>\"><?py print(p_text) ?></p>\n\n    <!-- \u5355\u884c\u8f93\u51fa\u591a\u4e2a\u5143\u7d20 -->\n    <?py print(f'<p style=\"{p_style}\">print ps {p_text}</p>\\n'*10) ?>\n    \n    <hr>\n\n    <!-- \u5143\u7d20\u4e2d\u7684\u4ee3\u7801\u5757 -->\n\n    <div>\n        <!-- \u5411\u5143\u7d20\u4e2d\u8f93\u51fa\u591a\u4e2a\u5143\u7d20 -->\n        <?py\n        for i in range(0, 10):\n            print(f'<p style=\"{p_style}\">for in {i} {p_text}</p>\\n')\n        ?>\n    </div>\n</body>\n\n```\n\n## \u975e\u963b\u585e\u751f\u6210\u9875\u9762\n\nPyHP \u5982\u679c\u4e00\u4e2a\u9875\u9762\u751f\u6210\u5728\u6267\u884c io \u64cd\u4f5c\u4e0d\u4f1a\u5f71\u54cd\u5176\u4ed6\u9875\u9762\n\n```python\n<?py \n    \"\"\"\n    pyhp \u5728\u6267\u884c\u9875\u9762\u751f\u6210\u65f6\u4e0d\u4f1a\u963b\u585e\u5176\u4ed6\u9875\u9762\n\n    \u6ce8\u610f \u9875\u9762\u4e0d\u8981\u5199\u6c38\u8fdc\u963b\u585e\u7684\u4ee3\u7801\n    \u8bf7\u6c42\u6c38\u8fdc\u963b\u585e\u4ee3\u7801\u6570\u91cf\u4e00\u591a\u5c06\u4f1a\u5bfc\u81f4\u670d\u52a1\u5668\u5361\u6b7b (\u90fd\u53bb\u6267\u884c\u6c38\u8fdc\u963b\u585e\u7684\u4ee3\u7801\u4e86)\n    \"\"\"\n    import time\n    # \u6a21\u62df io \u64cd\u4f5c, \u8fd9\u65f6\u5019\u53ef\u4ee5\u53bb\u770b\u770b\u522b\u7684\u9875\u9762\u662f\u5426\u4f1a\u88ab\u5f71\u54cd\n    time.sleep(30)\n    print(\"ok\")\n?>\n```\n\n## \u8d85\u7ea7\u5168\u5c40\u53d8\u91cf\n\n\u8d85\u7ea7\u5168\u5c40\u53d8\u91cf\u4e3a PyHP \u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u5728\u4ee3\u7801\u5757\u7684\u6240\u6709\u4f5c\u7528\u57df\u4e2d\u90fd\u53ef\u7528\n\n\u8fd9\u91cc\u5217\u51fa\u5e38\u7528\u7684\uff0c\u8be6\u7ec6\u67e5\u770b\u6587\u6863\n\n> **`html`**\uff1a\u5f53\u524d\u4ee3\u7801\u5757\u6240\u5728\u7684 Py_Html \u5bf9\u8c61\n>\n> **`html.header`**\uff1a\u9875\u9762\u54cd\u5e94\u5934, \u8bbe\u7f6e\u54cd\u5e94\u5934html.header = {\"\u54cd\u5e94\u7c7b\u578b\": \u503c}\n>\n> **`html.response`**\uff1a\u9875\u9762\u54cd\u5e94\u884c, \u8bbe\u7f6e\u54cd\u5e94\u884c html.response = {\"\u54cd\u5e94\u7c7b\u578b\": \u503c}, \u54cd\u5e94\u7c7b\u578b: code: \u54cd\u5e94\u7801, msg: \u54cd\u5e94\u5185\u5bb9, http_version: http \u7248\u672c\n>\n> **`request_header`**\uff1a\u8bf7\u6c42\u5934\n>\n> **`request_path`**\uff1a\u8bf7\u6c42\u6a21\u5f0f / \u8bf7\u6c42\u8def\u5f84  /  \u8bf7\u6c42 HTTP \u7248\u672c\n>\n> **`url`**\uff1a\u8bf7\u6c42 URL\n>\n> **`post`**\uff1a POST \u6570\u636e\n>\n> **`get`**\uff1a GET \u6570\u636e\n>\n> **`cookie`**: Cookie \u6570\u636e\n\n\u8f93\u51fa\u6d4b\u8bd5\n\n```python\n<?py\n    from pyhpweb import __version__\n    from pyhpweb.tools import html_encode\n\n    print(\n        html_encode(str(html)),\n        \"<hr>\\n<p>\u8bf7\u6c42\u53c2\u6570</p>\",\n        \"<p>request_path: %s</p>\" % request_path,\n        \"<p>url: %s</p>\" % url,\n        f\"<p>get: {get}</p>\",\n        f\"<p>post: {post}</p>\",\n        f\"<p>cookie: {cookie}</p>\",\n        \"<hr>\\n<p>\u8bf7\u6c42\u5934</p>\",\n        f\"<p>request_header: {request_header}</p>\",\n        \"<hr>\\n<p>\u54cd\u5e94\u5934</p>\",\n        f\"<p>response: {html.response}</p>\",\n        f\"<p>header: {html.header}</p>\",\n        \"<hr>\",\n        f\"<p>PyHP version {__version__}</p>\"\n    )\n```\n\n## include \u5305\u542b\u6587\u4ef6\n\nPyHP \u4e2d\u7684 `include` \u4e0e PHP \u7c7b\u4f3c, \u53ef\u4ee5\u5bfc\u5165\u9875\u9762\u5e76\u6267\u884c\u91cc\u9762\u7684 Python \u4ee3\u7801\u5e76\u628a\u9875\u9762\u5199\u5165\u5f53\u524d\u9875\u9762\n\n\u88ab\u5305\u542b\u9875\u9762\u6267\u884c\u5b8c\u540e\u53ef\u4ee5\u66f4\u65b0\u5305\u542b\u5b83\u7684\u6587\u4ef6\u4e2d\u7684\u53d8\u91cf\u4e0e\u8bbe\u7f6e\u7684 Cookie, \u88ab\u5305\u542b\u7684\u9875\u9762\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5305\u542b\u5b83\u7684\u6587\u4ef6\u4e2d\u7684\u53d8\u91cf\u4e0e\u54cd\u5e94\u5934\u4e0e\u54cd\u5e94\u884c , `include` `update_header` \u4e3a `True` \u65f6, \u88ab\u5305\u542b\u53ef\u4ee5\u5141\u8bb8\u66f4\u65b0\u5305\u542b\u5b83\u7684\u6587\u4ef6\u7684\u54cd\u5e94\u5934\u4e0e\u54cd\u5e94\u884c\n\n`include` \u5bfc\u5165\u9875\u9762\u9519\u8bef\u65f6\u4e0d\u4f1a\u5f71\u54cd\u540e\u9762\u4ee3\u7801\u6267\u884c\n\n```python\n<?py\n    print(\"<h1>include cookie.pyhtml </h1>\")\n\n    # \u76f8\u5bf9\u8def\u5f84\u5f15\u5165\n    include(\"cookie.pyhtml\")\n\n    print(\"<br><br><h1>include vals.pyhtml </h1>\")\n\n    # \u76f8\u5bf9\u8def\u5f84\u5f15\u5165 ./\n    include(\"./vals.pyhtml\")\n\n    print(\"<br><br><h1>include json.pyhtml </h1>\")\n\n    # \u76f8\u5bf9\u8def\u5f84\u5f15\u5165 ../\n    include(\"../demo/json.pyhtml\")\n    \"\"\"\n    \u5c06\u66f4\u65b0\u54cd\u5e94\u5934\u4e3a Content-Type: application/json\n    include(\"../demo/json.pyhtml\", update_header=True)\n    \"\"\"\n\n    print(\"<br><br><h1>include test.pyhtml </h1>\")\n\n    # \u7edd\u5bf9\u8def\u5f84\u5f15\u5165\n    include(\"/home/sakura/pyhp-web/demo/demo/test.pyhtml\")\n?>\n\n<br><br><h1>include end ...</h1>\n```\n\n## \u81ea\u5b9a\u4e49\u9519\u8bef\u9875\n\n\u60f3\u8981\u81ea\u5b9a\u4e49\u9519\u8bef\u9875, \u9996\u5148\u9700\u8981\u6307\u5b9a\u9519\u8bef\u9875\u540d\u79f0 `web_error_page` \u53c2\u6570, \u9519\u8bef\u9875\u5fc5\u987b\u5728\u7f51\u7ad9\u6839\u76ee\u5f55\u4e0b\n\n```python\nfrom pyhpweb import PyHP_Server\n\nPyHP_Server(\n    web_error_page=\"error.pyhtml\"\n).start()\n```\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u4e3a `web_error_page` \u53c2\u6570, \u9519\u8bef\u9875\u4f1a\u989d\u5916\u83b7\u5f97\u9519\u8bef\u6570\u636e\n\n```python\n<h1>\u81ea\u5b9a\u4e49\u9519\u8bef\u9875</h1>\n\n<?py \n    \"\"\"\n    \u9519\u8bef\u9875\u4f1a\u989d\u5916\u63d0\u4f9b error, error_url \u5185\u7f6e\u53d8\u91cf\n    \u5e76\u4e14\u54cd\u5e94\u884c\u4e5f\u4f1a\u88ab\u4fee\u6539\n    \"\"\"\n    print(\n        f\"<p>response: {html.response}</p>\",\n        f\"<p>response_data: {html.get_response()}</p>\",\n        f\"<p>error_url: {error_url}</p>\",\n        f\"<p>error_class_name: {type(error[0]).__name__}</p>\",\n        \"<p>error_msg: %s</p>\" % error[0],\n        f\"<p>error: {error}</p>\"\n    )\n?>\n```\n\n## \u4f7f\u7528 Cookie\n\n\u4f7f\u7528 set_cookie \u8bbe\u7f6e cookie, set_cookie max_age \u9ed8\u8ba4 -1 \u7acb\u523b\u8fc7\u671f, max_age \u4e3a None \u65f6\u4e8e\u5ba2\u6237\u7aef\u88ab\u5173\u95ed\u65f6\u5931\u6548\n\n```python\n<?py\n    from pyhpweb.tools import full_date\n    \n    if not cookie:\n        \"\"\"\n        \u5f53 get \u6570\u636e\u6709 nomaxage \u9879\u65f6 (cookie.pyhtml?nomaxage=)\n        \u8fd9\u4e2a Cookie \u5c06\u5728\u6d4f\u89c8\u5668\u88ab\u5173\u95ed\u65f6\u5931\u6548\n        \"\"\"\n        if not \"nomaxage\" in get:\n            # max_age Cookie \u6709\u6548\u65f6\u957f (\u79d2)\n            # max_age -1 \u6216\u8005 0 Cookie \u7acb\u523b\u8fc7\u671f\n            set_cookies({\n                \"text\": \"30\u79d2\u540e\u8fc7\u671f!!!\",\n                \"set-time\": full_date(),\n            }, max_age=30)\n            print(\"<h1>\u6ca1\u6709 Cookie \u8bbe\u7f6e Cookie</h1>\")\n        else:\n            # max_age \u4e3a None \u65f6\u4e8e\u5ba2\u6237\u7aef\u88ab\u5173\u95ed\u65f6\u5931\u6548\n            set_cookies({\n                \"text\": \"\u6d4f\u89c8\u5668\u88ab\u5173\u95ed\u65f6\u5931\u6548!!!\",\n                \"set-time\": full_date(),\n            }, max_age=None)\n            print(\"<h1>\u6ca1\u6709 Cookie \u8bbe\u7f6e Cookie, \u8fd9\u4e2a Cookie \u5c06\u5728\u6d4f\u89c8\u5668\u88ab\u5173\u95ed\u65f6\u5931\u6548</h1>\")\n\n    elif \"nocookie\" in get:\n        \"\"\"\n        \u5f53 get \u6570\u636e\u6709 nocookie \u9879\u65f6 (cookie.pyhtml?nocookie=)\n        \u5220\u9664\u6240\u6709 cookie\n        \"\"\" \n        # set_cookies max_age \u9ed8\u8ba4 -1 \u7acb\u523b\u8fc7\u671f\n        set_cookies(cookie)\n        print(\"<h1>\u5220\u9664\u6240\u6709 cookie </h1>\")\n\n    else:\n        print(\"<h1>cookie str: %s</h1>\" % request_header[\"cookie\"])\n        print(\"<h1>cookie: %s</h1>\" % cookie)\n?>\n```\n\n## Json Api\n\n```python\n<?py\n    from pyhpweb import Content_Type, __version__\n    import json\n\n    # \u8bbe\u7f6e\u8bf7\u6c42\u5934 Content-Type \u4e3a json\n    html.header = {\n        \"Content-Type\": Content_Type[\"json\"],\n    }\n\n    data = {\n        \"code\": 200, \n        \"msg\": \"OK\",\n        \"data\": {   \n            \"request_path\": request_path,\n            \"request_header\": request_header,\n            \"url\": url,\n            \"get\": get,\n            \"post\": post,\n            \"version\": __version__\n        }\n    }\n\n    # json.dumps json \u5e8f\u5217\u5316\u540e\u8f93\u51fa\u81f3\u9875\u9762\n    print(json.dumps(data))\n?>\n```",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/FengLiuFeseliud/PyHP-web",
            "keywords": "web,server,html,Hypertext-Preprocessor",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "pyhpweb",
            "package_url": "https://pypi.org/project/pyhpweb/",
            "platform": "any",
            "project_url": "https://pypi.org/project/pyhpweb/",
            "project_urls": {
                "Homepage": "https://github.com/FengLiuFeseliud/PyHP-web"
            },
            "release_url": "https://pypi.org/project/pyhpweb/0.1.1/",
            "requires_dist": null,
            "requires_python": ">=3.9",
            "summary": "Web \u670d\u52a1\u7aef\uff0c\u5728\u8bf7\u6c42\u9875\u9762\u65f6\u540e\u7aef\u6267\u884c Html \u6587\u4ef6\u4e2d\u7684 Python \u4ee3\u7801\u751f\u6210\u52a8\u6001\u7f51\u9875 \uff08\u7c7b\u4f3c PHP\uff09",
            "version": "0.1.1",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 15064885,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "c06c6802a37d8e5ecddb2b2d588f757e",
                    "sha256": "364158812dc8679f62987933b02b74541074ff7dcd8c31fbe46824465b01ad58"
                },
                "downloads": -1,
                "filename": "pyhpweb-0.1.1.tar.gz",
                "has_sig": false,
                "md5_digest": "c06c6802a37d8e5ecddb2b2d588f757e",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.9",
                "size": 17701,
                "upload_time": "2022-09-12T09:04:16",
                "upload_time_iso_8601": "2022-09-12T09:04:16.145938Z",
                "url": "https://files.pythonhosted.org/packages/d8/58/4b1937d8a7dc68a0864b79950ea8f13e433b53ffdda6d66af50555c3461d/pyhpweb-0.1.1.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}