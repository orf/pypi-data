{
    "0.0.1": {
        "info": {
            "author": "",
            "author_email": "Eric Lin <ericlingit@users.noreply.github.com>",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: GNU General Public License v3 (GPLv3)",
                "Operating System :: OS Independent",
                "Programming Language :: Python :: 3",
                "Topic :: Utilities"
            ],
            "description": "# Weibo trending posts scraper\n\nScrap trending posts from Weibo front page.\n\n\n## Weibo API\n\nTo understand how Weibo fetches new posts, a network inspection is performed on the mobile website.\n\nA request to this API endpoint is observed: `https://m.weibo.cn/api/container/getIndex?containerid=102803&openApp=0`\n\n\n![Screenshot of content API request](./img/inspect-api-url.png)\n\nIts response looks like this:\n\n![Screenshot of content API response](./img/inspect-response-cards.png)\n\nThe response is a nested JSON object. We're interested in the items in `data`'s `cards` array.\n\nEach *card* contains a `mblog` (microblog) object that encapsulates the content as well as metadata about the content.\n\nOne call to the API returns ten cards. When the device viewport scrolls toward the bottom of the page, the API is called again to fetch 10 more posts.\n\nweibo-trending extracts the following fields from `mblog`:\n- `text`: post text; can contain HTML tags when a video stream is included\n- `id`: post ID (str)\n- `url`: link to the post\n- `user`: the poster\n- `pics`: the URLs to the images included in this post (array of objects)\n- `created_at`: post date (str)\n- `source`: the device the post is submitted from\n\nIn addition, the following `user` fields are also extracted:\n- `id`: user ID (int)\n- `profile_url`: link to user profile\n- `screen_name`: screen name\n- `gender`: `\"f\"` for female, `\"m\"` for male. Weibo does not provide codes for those who are non-binary\n- `followers_count`: the str number of followers in units of 10,000. For example: `\"433.8\u4e07\"` (4,338,000).\n\nNote that repeated calls sometimes return posts that have been returned before.\n\n\n## weibo-trending usage guide\n\n### As a library\n\nInstall\n\n`pip install weibo_trending`\n\nGet and parse posts\n\n```python\nfrom weibo_trending import get_new_posts, parse_response\n\nresp = get_new_posts()\nmblogs = parse_response(resp)\nfor mblog in mblogs:\n    print(mblog)\n```\n\n\n### As a command line tool\n\nInstall\n\n`pip install weibo_trending`\n\nUsage\n\n```\npython -m weibo_trending --help\n\n    usage: weibo_trending [-h] [-d DIR] [-s]\n\n    Scrape and parse Weibo trending posts.\n\n    optional arguments:\n    -h, --help          show this help message and exit\n    -d DIR, --dir DIR   specify the output directory. Defaults to the current working directory\n    -s, --skip-parsing  whether to skip parsing and dump the raw JSON response from Weibo\n\n\npython -m weibo_trending\n```\n\nweibo_trending will save each scraped post with the following filename format:\n- `weibo_<user ID>_<post ID>.json`\n- Example: `weibo_1631153043_4834313265233660.json`\n\nEach call to weibo_trending usually saves 10 new files. If you get fewer than 10, that means the response contains one or more deleted posts. They are not saved.\n\n## Develop\n\n```\ngit clone https://github.com/ericlingit/weibo-trending.git\ncd weibo-trending\npython3 -m venv venv\nsource venv/bin/activate\npip install -U pip wheel\npip install -r requirements.txt\npip install -e .\npytest\n```\n\n### Packaging\n\n```\npython -m build --wheel\n```\n\nThe built wheel is in `./dist/`.\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "",
            "keywords": "",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "weibo-trending",
            "package_url": "https://pypi.org/project/weibo-trending/",
            "platform": null,
            "project_url": "https://pypi.org/project/weibo-trending/",
            "project_urls": {
                "Bug Tracker": "https://github.com/ericlingit/weibo-trending/issues",
                "Homepage": "https://github.com/ericlingit/weibo-trending"
            },
            "release_url": "https://pypi.org/project/weibo-trending/0.0.1/",
            "requires_dist": [
                "beautifulsoup4",
                "lxml",
                "requests"
            ],
            "requires_python": ">=3.7",
            "summary": "Weibo trending posts scraper",
            "version": "0.0.1",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 15756177,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "f5e214ddd90279e74d1901e4b563447b",
                    "sha256": "d1106aeeda013900ade4c9f6a83be0c8222a5a54c691e000f8654af13e564346"
                },
                "downloads": -1,
                "filename": "weibo_trending-0.0.1-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "f5e214ddd90279e74d1901e4b563447b",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.7",
                "size": 17076,
                "upload_time": "2022-11-14T04:06:59",
                "upload_time_iso_8601": "2022-11-14T04:06:59.691033Z",
                "url": "https://files.pythonhosted.org/packages/d7/d2/60f07933c59b368a3bd88ccc558fdfb7147aef98321abf1e8db47682412c/weibo_trending-0.0.1-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "7748d33e969ebb55aa4d5ae52b71a52d",
                    "sha256": "5cb08db462d7bc77a5d924bf40fa5c970c3e50c97ab6c13929d5d1ff22c58c03"
                },
                "downloads": -1,
                "filename": "weibo_trending-0.0.1.tar.gz",
                "has_sig": false,
                "md5_digest": "7748d33e969ebb55aa4d5ae52b71a52d",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.7",
                "size": 1246876,
                "upload_time": "2022-11-14T04:07:03",
                "upload_time_iso_8601": "2022-11-14T04:07:03.376247Z",
                "url": "https://files.pythonhosted.org/packages/72/91/d0027046a063fda75045a0695558a546491697bd08a21cdb1af687ea4b6d/weibo_trending-0.0.1.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}