{
    "2021.4.28": {
        "info": {
            "author": "zwczou",
            "author_email": "zwczou@gmail.com",
            "bugtrack_url": null,
            "classifiers": [],
            "description_content_type": "",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/catroll/python-wechat",
            "keywords": "wechat,wechat pay,wechat login,wechat mp,wechat python",
            "license": "BSD",
            "maintainer": "catroll",
            "maintainer_email": "ninedoors@126.com",
            "name": "python-wechat",
            "package_url": "https://pypi.org/project/python-wechat/",
            "platform": "any",
            "project_url": "https://pypi.org/project/python-wechat/",
            "project_urls": {
                "Homepage": "https://github.com/catroll/python-wechat"
            },
            "release_url": "https://pypi.org/project/python-wechat/2021.4.28/",
            "requires_dist": [
                "lxml",
                "requests"
            ],
            "requires_python": "",
            "summary": "Wechat for Python",
            "version": "2021.4.28",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 10193217,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "e864bfcd3dee91f165ab193813798e6d",
                    "sha256": "75f2c47330c8ddb09ed34d5a3722b2bb2d9f02468f537c0763774d7b83f4600b"
                },
                "downloads": -1,
                "filename": "python_wechat-2021.4.28-py2.py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "e864bfcd3dee91f165ab193813798e6d",
                "packagetype": "bdist_wheel",
                "python_version": "py2.py3",
                "requires_python": null,
                "size": 16286,
                "upload_time": "2021-04-28T05:00:07",
                "upload_time_iso_8601": "2021-04-28T05:00:07.647867Z",
                "url": "https://files.pythonhosted.org/packages/0d/3e/eaf1a4ec0502bfea4bbe12ac3d1b19f0a6552e1931624aac87a7417a3d65/python_wechat-2021.4.28-py2.py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "caa255619c493d54412cd8dc4dedd5bc",
                    "sha256": "68565fe66e6b7391778f648197f6fa63a03f86b2af5d099534bf0ee94fcc9b75"
                },
                "downloads": -1,
                "filename": "python-wechat-2021.4.28.tar.gz",
                "has_sig": false,
                "md5_digest": "caa255619c493d54412cd8dc4dedd5bc",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": null,
                "size": 15484,
                "upload_time": "2021-04-28T05:00:09",
                "upload_time_iso_8601": "2021-04-28T05:00:09.368431Z",
                "url": "https://files.pythonhosted.org/packages/c1/0b/559b85cb852f2d2c7ff3a8bc92f536d516f0098012bab8329579885211c9/python-wechat-2021.4.28.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "2021.4.29": {
        "info": {
            "author": "zwczou",
            "author_email": "zwczou@gmail.com",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: BSD License",
                "Programming Language :: Python :: 3",
                "Programming Language :: Python :: 3.6",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8",
                "Programming Language :: Python :: 3.9",
                "Programming Language :: Python :: Implementation :: CPython",
                "Programming Language :: Python :: Implementation :: PyPy"
            ],
            "description": "\u5feb\u901f\u5f00\u59cb\n==============\n\n\u5b89\u88c5\n----\n\n\u4f7f\u7528pip\n\n::\n\n    sudo pip install python-wechat\n\n\u4f7f\u7528easy_install\n\n::\n\n    sudo easy_install python-wechat\n\n\u5b89\u88c5\u5f00\u53d1\u7248\u672c\n\n::\n\n    sudo pip install git+https://github.com/catroll/python-wechat@dev\n\n\u529f\u80fd\n----\n\n-  \u5fae\u4fe1\u767b\u9646\n-  \u5fae\u4fe1\u652f\u4ed8\n-  \u5fae\u4fe1\u516c\u4f17\u53f7\n-  \u5fae\u4fe1\u6d88\u606f\n\n\u7528\u6cd5\n----\n\n\u5f02\u5e38\n~~~~~~~~~~\n\n\u7236\u5f02\u5e38\u7c7b\u540d\u4e3a ``WechatError`` \u5b50\u5f02\u5e38\u7c7b\u540d\u5206\u522b\u4e3a ``WechatAuthError``\n``WechatPayError`` ``WechatMPError`` ``WechatMsgError``\n\n\u53c2\u6570\n~~~~~~~~~~\n\n-  ``WEIXIN_TOKEN`` \u5fc5\u586b\uff0c\u5fae\u4fe1\u4e3b\u52a8\u63a8\u9001\u6d88\u606f\u7684TOKEN\n-  ``WEIXIN_SENDER`` \u9009\u586b\uff0c\u5fae\u4fe1\u53d1\u9001\u6d88\u606f\u7684\u53d1\u9001\u8005\n-  ``WEIXIN_EXPIRES_IN`` \u9009\u586b\uff0c\u5fae\u4fe1\u63a8\u9001\u6d88\u606f\u7684\u6709\u6548\u65f6\u95f4\n-  ``WEIXIN_MCH_ID`` \u5fc5\u586b\uff0c\u5fae\u4fe1\u5546\u6237ID\uff0c\u7eaf\u6570\u5b57\n-  ``WEIXIN_MCH_KEY`` \u5fc5\u586b\uff0c\u5fae\u4fe1\u5546\u6237KEY\n-  ``WEIXIN_NOTIFY_URL`` \u5fc5\u586b\uff0c\u5fae\u4fe1\u56de\u8c03\u5730\u5740\n-  ``WEIXIN_MCH_KEY_FILE`` \u53ef\u9009\uff0c\u5982\u679c\u9700\u8981\u7528\u9000\u6b3e\u7b49\u9700\u8981\u8bc1\u4e66\u7684api\uff0c\u5fc5\u9009\n-  ``WEIXIN_MCH_CERT_FILE`` \u53ef\u9009\n-  ``WEIXIN_APP_ID`` \u5fc5\u586b\uff0c\u5fae\u4fe1\u516c\u4f17\u53f7appid\n-  ``WEIXIN_APP_SECRET`` \u5fc5\u586b\uff0c\u5fae\u4fe1\u516c\u4f17\u53f7appkey\n\n\u4e0a\u9762\u53c2\u6570\u7684\u5fc5\u586b\u90fd\u662f\u6839\u636e\u5177\u4f53\u5f00\u542f\u7684\u529f\u80fd\u6709\u5173,\n\u5982\u679c\u4f60\u53ea\u9700\u8981\u5fae\u4fe1\u767b\u9646\uff0c\u5c31\u53ea\u8981\u9009\u62e9 ``WEIXIN_APP_ID`` ``WEIXIN_APP_SECRET``\n\n-  \u5fae\u4fe1\u6d88\u606f\n\n   -  ``WEIXIN_TOKEN``\n   -  ``WEIXIN_SENDER``\n   -  ``WEIXIN_EXPIRES_IN``\n\n-  \u5fae\u4fe1\u767b\u9646\n\n   -  ``WEIXIN_APP_ID``\n   -  ``WEIXIN_APP_SECRET``\n\n-  \u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\n\n   -  ``WEIXIN_APP_ID``\n   -  ``WEIXIN_APP_SECRET``\n\n-  \u5fae\u4fe1\u652f\u4ed8\n\n   -  ``WEIXIN_APP_ID``\n   -  ``WEIXIN_MCH_ID``\n   -  ``WEIXIN_MCH_KEY``\n   -  ``WEIXIN_NOTIFY_URL``\n   -  ``WEIXIN_MCH_KEY_FILE``\n   -  ``WEIXIN_MCH_CERT_FILE``\n\n\u521d\u59cb\u5316\n~~~~~~~\n\n\u5982\u679c\u4f7f\u7528flask\n\n::\n\n    # -*- coding: utf-8 -*-\n\n\n    from datetime import datetime, timedelta\n    from flask import Flask, jsonify, request, url_for\n    from wechat import Wechat, WechatError\n\n\n    app = Flask(__name__)\n    app.debug = True\n\n\n    # \u5177\u4f53\u5bfc\u5165\u914d\n    # \u6839\u636e\u9700\u6c42\u5bfc\u5165\u4ec5\u4f9b\u53c2\u8003\n    app.config.fromobject(dict(WEIXIN_APP_ID='', WEIXIN_APP_SECRET=''))\n\n\n    # \u521d\u59cb\u5316\u5fae\u4fe1\n    wechat = Wechat()\n    wechat.init_app(app)\n    # \u6216\u8005\n    # wechat = Wechat(app)\n\n\u5982\u679c\u4e0d\u4f7f\u7528flask\n\n::\n\n    # \u6839\u636e\u9700\u6c42\u5bfc\u5165\u4ec5\u4f9b\u53c2\u8003\n    config = dict(WEIXIN_APP_ID='', WEIXIN_APP_SECRET='')\n    wechat = Wechat(config)\n\n\u5fae\u4fe1\u6d88\u606f\n~~~~~~~~\n\n\u5982\u679c\u4f7f\u7528django\uff0c\u6dfb\u52a0\u89c6\u56fe\u51fd\u6570\u4e3a\n\n::\n\n    url(r'^/$', wechat.django_view_func(), name='index'),\n\n\u5982\u679c\u4e3aflask\uff0c\u6dfb\u52a0\u89c6\u56fe\u51fd\u6570\u4e3a\n\n::\n\n    app.add_url_rule(\"/\", view_func=wechat.view_func)\n\n::\n\n    @wechat.all\n    def all(**kwargs):\n        \"\"\"\n        \u76d1\u542c\u6240\u6709\u6ca1\u6709\u66f4\u7279\u6b8a\u7684\u4e8b\u4ef6\n        \"\"\"\n        return wechat.reply(kwargs['sender'], sender=kwargs['receiver'], content='all')\n\n\n    @wechat.text()\n    def hello(**kwargs):\n        \"\"\"\n        \u76d1\u542c\u6240\u6709\u6587\u672c\u6d88\u606f\n        \"\"\"\n        return \"hello too\"\n\n\n    @wechat.text(\"help\")\n    def world(**kwargs):\n        \"\"\"\n        \u76d1\u542chelp\u6d88\u606f\n        \"\"\"\n        return dict(content=\"hello world!\")\n\n\n    @wechat.subscribe\n    def subscribe(**kwargs):\n        \"\"\"\n        \u76d1\u542c\u8ba2\u9605\u6d88\u606f\n        \"\"\"\n        print kwargs\n        return \"\u6b22\u8fce\u8ba2\u9605\u6211\u4eec\u7684\u516c\u4f17\u53f7\"\n\n\u5fae\u4fe1\u767b\u9646\n~~~~~~~~\n\n::\n\n    @app.route(\"/login\")\n    def login():\n        \"\"\"\u767b\u9646\u8df3\u8f6c\u5730\u5740\"\"\"\n        openid = request.cookies.get(\"openid\")\n        next = request.args.get(\"next\") or request.referrer or \"/\",\n        if openid:\n            return redirect(next)\n\n        callback = url_for(\"authorized\", next=next, _external=True)\n        url = wechat.authorize(callback, \"snsapi_base\")\n        return redirect(url)\n\n\n    @app.route(\"/authorized\")\n    def authorized():\n        \"\"\"\u767b\u9646\u56de\u8c03\u51fd\u6570\"\"\"\n        code = request.args.get(\"code\")\n        if not code:\n            return \"ERR_INVALID_CODE\", 400\n        next = request.args.get(\"next\", \"/\")\n        data = wechat.access_token(code)\n        openid = data.openid\n        resp = redirect(next)\n        expires = datetime.now() + timedelta(days=1)\n        resp.set_cookie(\"openid\", openid, expires=expires)\n        return resp\n\n\u5fae\u4fe1\u652f\u4ed8\n~~~~~~~~\n\n\u6ce8\u610f: \u5fae\u4fe1\u7f51\u9875\u652f\u4ed8\u7684timestamp\u53c2\u6570\u5fc5\u987b\u4e3a\u5b57\u7b26\u4e32\n\n::\n\n\n    @app.route(\"/pay/jsapi\")\n    def pay_jsapi():\n        \"\"\"\u5fae\u4fe1\u7f51\u9875\u652f\u4ed8\u8bf7\u6c42\u53d1\u8d77\"\"\"\n        try:\n            out_trade_no = wechat.nonce_str\n            raw = wechat.jsapi(openid=\"openid\", body=u\"\u6d4b\u8bd5\", out_trade_no=out_trade_no, total_fee=1)\n            return jsonify(raw)\n        except WechatError, e:\n            print e.message\n            return e.message, 400\n\n\n    @app.route(\"/pay/notify\")\n    def pay_notify():\n        \"\"\"\n        \u5fae\u4fe1\u5f02\u6b65\u901a\u77e5\n        \"\"\"\n        data = wechat.to_dict(request.data)\n        if not wechat.check(data):\n            return wechat.reply(\"\u7b7e\u540d\u9a8c\u8bc1\u5931\u8d25\", False)\n        # \u5904\u7406\u4e1a\u52a1\u903b\u8f91\n        return wechat.reply(\"OK\", True)\n\n\n    if __name__ == '__main__':\n        app.run(host=\"0.0.0.0\", port=9900)\n\n\u5fae\u4fe1\u516c\u4f17\u53f7\n~~~~~~~~~~\n\n**\u6ce8\u610f**:\n\u5982\u679c\u4f7f\u7528\u5206\u5e03\u5f0f\uff0c\u9700\u8981\u81ea\u5df1\u5b9e\u73b0\\ ``access_token``\\ \u8ddf\\ ``jsapi_ticket``\\ \u51fd\u6570\n\n``access_token``\\ \u9ed8\u8ba4\u4fdd\u5b58\u5728\\ ``~/.access_token``\n``jsapi_ticket``\\ \u9ed8\u8ba4\u4fdd\u5b58\u5728\\ ``~/.jsapi_ticket``\n\n\u9ed8\u8ba4\u5728(HOME)\u76ee\u5f55\u4e0b\u9762\uff0c\u5982\u679c\u9700\u8981\u66f4\u6539\u5230\u6307\u5b9a\u7684\u76ee\u5f55\uff0c\u53ef\u4ee5\u5bfc\u5165\u5e93\u4e4b\u540e\u4fee\u6539\uff0c\u5982\u4e0b\n\n::\n\n    import wechat\n\n    DEFAULT_DIR = \"/tmp\"\n\n\u83b7\u53d6\u516c\u4f17\u53f7\u552f\u4e00\u51ed\u8bc1\n\n::\n\n    wechat.access_token\n\n\u83b7\u53d6ticket\n\n::\n\n    wechat.jsapi_ticket\n\n\u521b\u5efa\u4e34\u65f6qrcode\n\n::\n\n    data = wechat.qrcode_create(123, 30)\n    print wechat.qrcode_show(data.ticket)\n\n\u521b\u5efa\u6c38\u4e45\u6027qrcode\n\n::\n\n    # scene_id\u7c7b\u578b\n    wechat.qrcode_create_limit(123)\n    # scene_str\u7c7b\u578b\n    wechat.qrcode_create_limit(\"456\")\n\n\u957f\u94fe\u63a5\u53d8\u77ed\u94fe\u63a5\n\n::\n\n    wechat.shorturl(\"http://example.com/test\")\n\n\n\n",
            "description_content_type": "",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/catroll/python-wechat",
            "keywords": "wechat,wechat pay,wechat login,wechat mp,wechat python",
            "license": "BSD",
            "maintainer": "catroll",
            "maintainer_email": "ninedoors@126.com",
            "name": "python-wechat",
            "package_url": "https://pypi.org/project/python-wechat/",
            "platform": "any",
            "project_url": "https://pypi.org/project/python-wechat/",
            "project_urls": {
                "Homepage": "https://github.com/catroll/python-wechat"
            },
            "release_url": "https://pypi.org/project/python-wechat/2021.4.29/",
            "requires_dist": [
                "lxml",
                "requests"
            ],
            "requires_python": "",
            "summary": "Wechat for Python",
            "version": "2021.4.29",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 10193217,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "b7ede90b6e61b2f690ca584658253146",
                    "sha256": "763929e17b603a6c3db3c732667d9766a6a3b3ba49760db9d2106127b1311db6"
                },
                "downloads": -1,
                "filename": "python_wechat-2021.4.29-py2.py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "b7ede90b6e61b2f690ca584658253146",
                "packagetype": "bdist_wheel",
                "python_version": "py2.py3",
                "requires_python": null,
                "size": 16820,
                "upload_time": "2021-04-28T07:51:57",
                "upload_time_iso_8601": "2021-04-28T07:51:57.051889Z",
                "url": "https://files.pythonhosted.org/packages/b0/40/1e96f5db8d58cc942d6382aab29c3ee8010a57de487e31922b87f5a3c898/python_wechat-2021.4.29-py2.py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "81fae39941724900dd938816ff1d821b",
                    "sha256": "0456d2c6d075a00e8846fd902cebe5441ab552a9248857816d0bef75db1cc41c"
                },
                "downloads": -1,
                "filename": "python-wechat-2021.4.29.tar.gz",
                "has_sig": false,
                "md5_digest": "81fae39941724900dd938816ff1d821b",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": null,
                "size": 16219,
                "upload_time": "2021-04-28T07:51:59",
                "upload_time_iso_8601": "2021-04-28T07:51:59.098658Z",
                "url": "https://files.pythonhosted.org/packages/68/e8/5f1a273c654ec48a3df2d3c16a9bdf322deff72da3dde80e5252d64efac6/python-wechat-2021.4.29.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}