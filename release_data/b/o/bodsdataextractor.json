{
    "0.9.0": {
        "info": {
            "author": "",
            "author_email": "Ali Partner <ali.partner@kpmg.co.uk>, Spencer Brittain <spencer.brittain@kpmg.co.uk>",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: MIT License",
                "Operating System :: OS Independent",
                "Programming Language :: Python :: 3"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "",
            "keywords": "",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "BODSDataExtractor",
            "package_url": "https://pypi.org/project/BODSDataExtractor/",
            "platform": null,
            "project_url": "https://pypi.org/project/BODSDataExtractor/",
            "project_urls": {
                "Homepage": "https://github.com/department-for-transport-BODS/bods-data-extractor"
            },
            "release_url": "https://pypi.org/project/BODSDataExtractor/0.9.0/",
            "requires_dist": [
                "pandas (>=1.4.2)",
                "bods-client (>=0.9.1)",
                "protobuf (==3.20)",
                "lxml (==4.9.1)",
                "xmltodict (==0.13.0)"
            ],
            "requires_python": ">=3.7",
            "summary": "This project was created to lower the barrier to entry for analysis of UK Bus Open Data. It facilitates the fetching and extraction of clean data, currently focussed on Timetables, into tables to be used for analysis or your own projects.",
            "version": "0.9.0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 15737652,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "f926313badfaf131c9f9b9ce2a764be5",
                    "sha256": "9e812a1de5dc019ac49ba56ca0ce528738bf82eb75d34aa96b90f34ea417bb06"
                },
                "downloads": -1,
                "filename": "BODSDataExtractor-0.9.0-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "f926313badfaf131c9f9b9ce2a764be5",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.7",
                "size": 32164,
                "upload_time": "2022-11-09T14:45:48",
                "upload_time_iso_8601": "2022-11-09T14:45:48.155065Z",
                "url": "https://files.pythonhosted.org/packages/da/1a/53d2ae2873ef63f544f831a22f5ec19103ac39da730ba059c77bf5b78df8/BODSDataExtractor-0.9.0-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "b0b89c1a16bf78bab5c18ded37e667df",
                    "sha256": "8296d8212cc4f48b5b5338afe01716098be157194fffa4de42dbc4a45763fec0"
                },
                "downloads": -1,
                "filename": "BODSDataExtractor-0.9.0.tar.gz",
                "has_sig": false,
                "md5_digest": "b0b89c1a16bf78bab5c18ded37e667df",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.7",
                "size": 39885,
                "upload_time": "2022-11-09T14:45:51",
                "upload_time_iso_8601": "2022-11-09T14:45:51.437003Z",
                "url": "https://files.pythonhosted.org/packages/3a/40/499150519a7ed17cf2ad1e2ec6508a65d066984ace195b645ff4d08223a4/BODSDataExtractor-0.9.0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.9.1": {
        "info": {
            "author": "",
            "author_email": "\"Ali Partner, Spencer Brittain\" <bodshelpdesk@kpmg.co.uk>",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: MIT License",
                "Operating System :: OS Independent",
                "Programming Language :: Python :: 3"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "",
            "keywords": "",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "BODSDataExtractor",
            "package_url": "https://pypi.org/project/BODSDataExtractor/",
            "platform": null,
            "project_url": "https://pypi.org/project/BODSDataExtractor/",
            "project_urls": {
                "Homepage": "https://github.com/department-for-transport-BODS/bods-data-extractor"
            },
            "release_url": "https://pypi.org/project/BODSDataExtractor/0.9.1/",
            "requires_dist": [
                "pandas (>=1.4.2)",
                "bods-client (>=0.9.1)",
                "protobuf (==3.20)",
                "lxml (==4.9.1)",
                "xmltodict (==0.13.0)"
            ],
            "requires_python": ">=3.8",
            "summary": "This project was created to lower the barrier to entry for analysis of UK Bus Open Data. It facilitates the fetching and extraction of clean data, currently focussed on Timetables, into tables to be used for analysis or your own projects.",
            "version": "0.9.1",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 15737652,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "418da76cad0a3c08d7efbf6d265e1495",
                    "sha256": "da5768d1b9f27705a193447aebe85e0304c726e1f1fa1bf0493e8aad7e244c75"
                },
                "downloads": -1,
                "filename": "BODSDataExtractor-0.9.1-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "418da76cad0a3c08d7efbf6d265e1495",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.8",
                "size": 32153,
                "upload_time": "2022-11-09T15:24:11",
                "upload_time_iso_8601": "2022-11-09T15:24:11.836826Z",
                "url": "https://files.pythonhosted.org/packages/45/a5/67fe8cffcb4d537370d1fd0da991039ecee20e61e265f0484d59d14b9875/BODSDataExtractor-0.9.1-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "7bf5413d7284e8212ecd01f90553038b",
                    "sha256": "8730e24bb9e107935050d560c7f0fd357bb536a09c4f7f67d847574b2f278083"
                },
                "downloads": -1,
                "filename": "BODSDataExtractor-0.9.1.tar.gz",
                "has_sig": false,
                "md5_digest": "7bf5413d7284e8212ecd01f90553038b",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.8",
                "size": 39796,
                "upload_time": "2022-11-09T15:24:15",
                "upload_time_iso_8601": "2022-11-09T15:24:15.110505Z",
                "url": "https://files.pythonhosted.org/packages/27/e9/11239d688d5ce95100c95f8efa84805cc98ef047bd70791d088d6d8a88ba/BODSDataExtractor-0.9.1.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "1.0.0": {
        "info": {
            "author": "",
            "author_email": "\"Ali Partner, Spencer Brittain\" <bodshelpdesk@kpmg.co.uk>",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: MIT License",
                "Operating System :: OS Independent",
                "Programming Language :: Python :: 3"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "",
            "keywords": "",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "BODSDataExtractor",
            "package_url": "https://pypi.org/project/BODSDataExtractor/",
            "platform": null,
            "project_url": "https://pypi.org/project/BODSDataExtractor/",
            "project_urls": {
                "Homepage": "https://github.com/department-for-transport-BODS/bods-data-extractor"
            },
            "release_url": "https://pypi.org/project/BODSDataExtractor/1.0.0/",
            "requires_dist": [
                "pandas (>=1.4.2)",
                "bods-client (>=0.9.1)",
                "protobuf (==3.20)",
                "lxml (==4.9.1)",
                "xmltodict (==0.13.0)"
            ],
            "requires_python": ">=3.8",
            "summary": "This project was created to lower the barrier to entry for analysis of UK Bus Open Data. It facilitates the fetching and extraction of clean data, currently focussed on Timetables, into tables to be used for analysis or your own projects.",
            "version": "1.0.0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 15737652,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "9ffef6e8cf32f5b7bf09555304d2e36f",
                    "sha256": "eb965dd8755cf29770ea9500f59b8398c1f82b48dbdee438785956480789de51"
                },
                "downloads": -1,
                "filename": "BODSDataExtractor-1.0.0-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "9ffef6e8cf32f5b7bf09555304d2e36f",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.8",
                "size": 32173,
                "upload_time": "2022-11-10T11:47:34",
                "upload_time_iso_8601": "2022-11-10T11:47:34.141262Z",
                "url": "https://files.pythonhosted.org/packages/b0/37/9bdd4f65ab2928bcd1841b7a78762aa8c447dcc75330ee5cc9fbdce7ee40/BODSDataExtractor-1.0.0-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "83cbade09aa98169908c5c5abdebd1da",
                    "sha256": "11224a0c680710cbd9e1cbe620827da7f279b3808b4562b5e3e586ed61c3ff6d"
                },
                "downloads": -1,
                "filename": "BODSDataExtractor-1.0.0.tar.gz",
                "has_sig": false,
                "md5_digest": "83cbade09aa98169908c5c5abdebd1da",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.8",
                "size": 39814,
                "upload_time": "2022-11-10T11:47:36",
                "upload_time_iso_8601": "2022-11-10T11:47:36.207547Z",
                "url": "https://files.pythonhosted.org/packages/4f/11/7444835a372a84be634527442a24873a29b67fbd64254372f9ecfc0717be/BODSDataExtractor-1.0.0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "1.0.1": {
        "info": {
            "author": "",
            "author_email": "\"Ali Partner, Spencer Brittain\" <bodshelpdesk@kpmg.co.uk>",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: MIT License",
                "Operating System :: OS Independent",
                "Programming Language :: Python :: 3"
            ],
            "description": "\n<!-- PROJECT LOGO -->\n<br />\n<div align=\"center\">\n  <a href=\"https://github.com/github_username/repo_name\">\n    <img src=\"https://user-images.githubusercontent.com/105863784/190128076-b6630a01-5809-4018-ae11-b7da83ce131c.png\" alt=\"Logo\" width=\"427\" height=\"66\">\n    \n  </a>\n\n<h3 align=\"center\">BODS Data Extractor</h3>\n\n  <p align=\"center\">\n    A python client for downloading and extracting data from the UK Bus Open Data Service \n    <br />\n    <a href=\"https://github.com/department-for-transport-BODS/bods-data-extractor\"><strong>Explore the docs \u00bb</strong></a>\n    <br />\n    <br />\n    <a href=\"https://github.com/department-for-transport-BODS/bods-data-extractor/blob/main/src/BODSDataExtractor/example.py\">View Demo</a>\n    \u00b7\n    <a href=\"https://github.com/department-for-transport-BODS/bods-data-extractor/issues\">Report Bug</a>\n    \u00b7\n    <a href=\"https://github.com/department-for-transport-BODS/bods-data-extractor/issues\">Request Feature</a>\n  </p>\n</div>\n\n\n\n\n\n# Table of contents\n\n- [About The Project](#about-the-project)\n  - [Built With](#built-with)\n- [Getting Started](#getting-started)\n  - [Prerequisites](#prerequisites)\n  - [Installation](#installation)\n- [Usage](#usage)\n  - [Quick Reference](#quick-reference)\n  - [Example of timetables output](#example-of-timetables-output)\n  - [Fundamentals of extracting data using this package](#fundamentals-of-extracting-data-using-this-package)\n  - [How to extract Dataset Level data](#how-to-extract-dataset-level-data)\n  - [How to extract Service Line Level data](#how-to-extract-service-line-level-data)\n  - [How to extract Stop Level data](#how-to-extract-stop-level-data)\n  - [Expected run times and performance](#expected-run-times-and-performance)\n  - [How to fine tune your results using additional parameters](#how-to-fine-tune-your-results-using-additional-parameters)\n  - [ATCO Code to Local Authority Lookup Table](#atco-code-to-local-authority-lookup-table)\n  - [Using Previously Downloaded Data](#using-previously-downloaded-data)\n  - [OTC Database](#otc-database)\n  - [Reporting and Analytics](#reporting-and-analytics)\n- [Roadmap & Limitations](#roadmap--limitations)\n    - [Handling non standard files](#handling-non-standard-files)\n    - [Handling vehicle journeys that cross midnight](#handling-vehicle-journeys-that-cross-midnight)\n    - [Providing additional detail about services](#providing-additional-detail-about-services)\n    - [Incorporating AVL and Fares data](#incorporating-avl-and-fares-data)\n    - [Optimising performance](#optimising-performance)\n    - [And more!](#and-more)\n- [Contact / Contribute](#contact--contribute)\n  - [Contact the Bus Open Data Service](#contact-the-bus-open-data-service)\n- [License](#license)\n\n<!-- ABOUT THE PROJECT -->\n## About The Project\n\n\n![image](https://user-images.githubusercontent.com/105863784/190125659-b5dc1d1f-820c-405b-aa9b-5b3b6738dddc.png)\n\n\n\n\nThis project was created to lower the barrier to entry for analysis of UK Bus Open Data. It facilitates the fetching and extraction of data, currently focussed on Timetables, into tables to be used for analysis or your own projects.\n\n<p align=\"right\">(<a href=\"#readme-top\">back to top</a>)</p>\n\n\n\n### Built With\n\n\n[![Python][python.com]][python-url]\n\n\n<p align=\"right\">(<a href=\"#readme-top\">back to top</a>)</p>\n\n\n\n<!-- GETTING STARTED -->\n## Getting Started\n\nFollow these simple steps to get started with the project. It is recommended that you use a Python IDE rather than a console.\n\n### Prerequisites\n\nDownload and install Python \n\n(If you are unfamiliar with Python, do not worry. This package is designed to be very easy to use, and once you have python installed you can copy and paste example code from below and through only making small tweaks to input parameters get the data or reporting metrics you require.\n\nFor those unsure how to install Python, we recommend downloading Anaconda, an open-source distribution for Python, using the following link: \n\nhttps://www.anaconda.com/distribution/\n\nOnce this is installed, open Anaconda Navigator GUI and ensure 'Spyder' is installed, before launching it. Here you will be able to run code from the examples below, in order to make use of this package's functionalities. \n\nPlease check this is inline with your organisation's policy before installing)\n\n### Installation\n\n1. Get a free API Key by creating an account at: [https://data.bus-data.dft.gov.uk/](https://data.bus-data.dft.gov.uk/). Your API key can be found under 'Account Settings'\n\nMake sure to do step 2 in the terminal or command line (if using Anaconda Navigator open Anaconda Prompt and install using the above code here). All other code is to be run in the python IDE of your choice (we recommend Spyder if using Anaconda)\n  \n2. Install BODS Data Extractor package \n    ```commandline\n      pip install BODSDataExtractor\n      ```\n3. Open up a .py file and save your API to a variable\n   ```python\n   api = 'ENTER YOUR API KEY'\n   ```\n4. Follow the steps below in the Usage section. The code examples are ready to copy and paste into your .py file.\n   \n\n<p align=\"right\">(<a href=\"#readme-top\">back to top</a>)</p>\n\n\n\n<!-- USAGE EXAMPLES -->\n\n\n## Usage\n\n### Quick Reference\n\nThe below code acts as a quick reference guide to calling the attributes of a TimetableExtractor object at each level as explained below in this document.\n\n```python\n\n#Dataset Level\nTimetableExtractor.metadata\n\n#Service Line Level\nTimetableExtractor.service_line_extract\n\n#Stop Level\nTimetableExtractor.timetable_dict\n```\n\n### Example of timetables output\n\nTimetable data can be extracted at 3 levels (note that these examples are restricted to 1 dataset, of ID 322):\n\n* Dataset level - High level overview of key dataset information (each row represents 1 dataset on BODS platform)\n\n<img width=\"1408\" alt=\"image\" src=\"https://user-images.githubusercontent.com/81578708/189095249-79a51be0-0145-4712-b538-65d80b76e99a.png\">\n\n* Service Line Level - Detailed information about each service and line extracted from individual files within datasets (each row represents 1 timetables xml file)\n\n<img width=\"1400\" alt=\"image\" src=\"https://user-images.githubusercontent.com/81578708/189094457-ee19dc5b-97b8-409c-a75d-04ca4adb5016.png\">\n\n* Stop level - Stop level data in the form of a traditional timetable (1 timetable from each xml file)\n\n<img width=\"1362\" alt=\"image\" src=\"https://user-images.githubusercontent.com/81578708/189094683-ce047d25-051c-470e-be8e-70e6b5d47eab.png\">\n\n### Fundamentals of extracting data using this package\n\nThis package is written using object orientated python principles. Put simply, one must initiate an object based upon the subset of BODS timetables data they wish to extract data on, or analyse. Upon initiating an instance of this object, parameters can be specified to select the desired subset. Once this object instance has been initiated, there is no immediate output in the python console. One can now access attributes of the instance by calling them. \n\nNote that for the data extraction, all of the processing is done in the initiation of the object instance, and not in the accessing of the attributes. This means it make take some time to initiate the object instance, but should take almost no time to access your desired data once the object instance has been initiated.\n\nThe examples below should bring this to life.\n\n### How to extract Dataset Level data\n\n```python\n#intiate an object instance called my_bus_data_object with desired parameters\nfrom BODSDataExtractor.extractor import TimetableExtractor\n\nmy_bus_data_object = TimetableExtractor(api_key=api # Your API Key Here\n                                 ,limit=1 # How many datasets to view\n                                 ,status = 'published' # Only view published datasets\n                                 ,service_line_level=False # True if you require Service line data \n                                 ,stop_level=False # True if you require stop level data\n                                 )\n\n#save the extracted dataset level data to dataset_level variable\ndataset_level = my_bus_data_object.metadata\n\n#save this data to a csv file in your downloads directory\n#note that entries in the 'localities' field may be truncated to comply with excel cell limits\nmy_bus_data_object.save_metadata_to_csv()\n```\n### How to extract Service Line Level data\n```python\n#intiate an object instance called my_bus_data_object with desired parameters\nfrom BODSDataExtractor.extractor import TimetableExtractor\n\nmy_bus_data_object = TimetableExtractor(api_key=api # Your API Key Here\n                                 ,limit=1 # How many datasets to view\n                                 ,status = 'published' # Only view published datasets\n                                 ,service_line_level=True # True if you require Service line data \n                                 ,stop_level=False # True if you require stop level data\n                                 )\n\n#save the extracted service line level data to service_line_level variable\nservice_line_level = my_bus_data_object.service_line_extract\n\n#note that in downloading the service line level data, the dataset level will also be downloaded. Can access this as below:\ndataset_level = my_bus_data_object.metadata\n\n#save these data to a csv file in your downloads directory\nmy_bus_data_object.save_metadata_to_csv()\nmy_bus_data_object.save_service_line_extract_to_csv()\n```\n### How to extract Stop Level data\n```python\n#intiate an object instance called my_bus_data_object with desired parameters\nfrom BODSDataExtractor.extractor import TimetableExtractor\n\nmy_bus_data_object = TimetableExtractor(api_key=api # Your API Key Here\n                                 ,limit=1 # How many datasets to view\n                                 ,status = 'published' # Only view published datasets\n                                 ,service_line_level=True # True if you require Service line data \n                                 ,stop_level=True # True if you require stop level data\n                                 )\n\n#save the extracted stop level data to stop_level variable\nstop_level = my_bus_data_object.timetable_dict\n\n#note that in downloading stop level the  data, the dataset and service line level will also be downloaded. Can access this as below:\ndataset_level = my_bus_data_object.metadata\nservice_line_level = my_bus_data_object.service_line_extract\n\n#save meta data and service line level data to csv file in your downloads directory\nmy_bus_data_object.save_metadata_to_csv()\nmy_bus_data_object.save_service_line_extract_to_csv()\n\n#stop_level variable is a dictionary of dataframes, which can be saved to csv as follows (saves in downloads directory)\nmy_bus_data_object.save_all_timetables_to_csv()\n\n#or can filter to filter timetable results to a specfic licence number of service code (saves in downloads directory)\nmy_bus_data_object.save_filtered_timetables_to_csv('PC0001838:41')\n\n```\n### Expected run times and performance\n\nThe volume of timetables data available on the BODS platform is very significant, and while this package simplifies the extraction of this data, and processes it into a analytical ready form, the sheer amount of data dictates that it can take a non trivial amount of time to initiate the above object instances. \n\nOne way of getting around this problem is to narrow your requested data request using additional parameters. Another is to run the download once, and save the output to disk as a csv, to allow re loading of this at a later data for reporting analysis. Both of these approaches are outlined in more detail in below sections.\n\nDirectly below are some sample expected run times for extracting data using this package. This should still give you a very approximate idea of how long to expect your code to execute, depending on how much data you are trying to extract.\n\nIt is important to note that this can vary depending on your local processing power, internet connection and on the nature of the datasets you are extracting (a dataset may contain one xml file, or several hundred).\n\n| Granularity of data extraction    | 1 dataset timing  | 20 dataset timing | 200 datasets timing      |\n| --------------------------------- | ----------------- |-------------------|--------------------------|\n| Dataset                           | > 0 hrs 1 min     | > 0 hrs 1 min     | 0 hrs 2 min              |\n| Service line                      | > 0 hrs 1 min     | > 0 hrs 1 min     | 0 hrs 6 min              |\n| Stop                              | 0 hrs 3 min       | > 0 hrs 6 min     | Memory issues @ 16Gb RAM |\n\n\n### How to fine tune your results using additional parameters\n\nAs well as specifying the granularity of data to extract (dataset, service line or stop level), limiting the number of datasets, and restricting to just published datasets, there are a number of additional parameters that the object instance can be initiated with. These are as follows:\n\n- nocs - _accepts list input of valid National Operator Codes e.g. ['HIPK', 'YCST']_\n- search -  _accepts string input of key words to filter for the data set name, data set description, organisation name, or admin name e.g. 'Arriva'_\n- bods_compliant - _accepts boolean input (True or False), where True filters for only BODS Compliant datasets. Default value is True_\n- atco_code - _accepts list input of the first three characters of ATCO codes (ATCO codes are unique identifiers of UK bus stops, where first three characters signify the admin area they are within). This filters datasets and/or service lines that have stops within the specified admin areas. e.g. ['320','450']_\n\nExample of this:\n```python\n#intiate an object instance called my_bus_data_object with desired parameters\nfrom BODSDataExtractor.extractor import TimetableExtractor\n\nmy_bus_data_object = TimetableExtractor(api_key=api # Your API Key Here\n                                 #,limit=1 # commented out limit so will return all results within other parameters\n                                 ,status = 'published' \n                                 ,service_line_level=True \n                                 ,stop_level=False \n                                 ,nocs=['FSCE','FGLA','FCYM'] #values must be entered in this list format - each noc within quotes, separated by comma, all within []\n                                 ,search='First Bus' # this is actually redundant as nocs are specific to this operator, but included for demo purpose\n                                 ,bods_compliant=True\n                                 ,atco_code=['320', '450'] # filter to stops within just north and west yorkshire. Values must be entered in this list format - each code within quotes, separated by comma, all within []\n                                 )\n\n#save the extracted dataset level data to filtered_dataset_level variable\nfiltered_dataset_level = my_bus_data_object.metadata\n\n#save the extracted service line level data to dataset_level variable\nfiltered_service_line_level = my_bus_data_object.service_line_extract\n\n#export to csv if you wish to save this data\nfiltered_service_line_level.to_csv('filtered_service_line_level_export.csv')\n```\n### ATCO Code to Local Authority Lookup Table\n\nThe package contains an unofficial lookup table used to map bus stop ATCO codes to Local Authorities. This may be useful as a rough guide to filtering services around a certain area of England. \n\nPlease note that this is not an official definition of ATCO / LA mappings and has been manually created.\n\nThe table can be accessed using the code below.\n\n```python\n#import the csv file as a text string from the BODSDataExtractor package\natco_lookup_file = importlib.resources.read_text('BODSDataExtractor','ATCO_code_to_LA_lookup.csv')\n\n#wrap lookup_file string into a stringIO object so it can be read by pandas\natco_lookup_string = io.StringIO(atco_lookup_file)\n\n#load into a DataFrame\nla_lookup = pd.read_csv(atco_lookup_string ,dtype={'ATCO Code':str})\n```\n\n### Using Previously Downloaded Data\n\nThe previous examples are based on using the same TimetableMetadata object instance created in the first example. This is good for most cases but there may be times when the user wishes to use previously saved exports, without having to extract all the datasets again. In this case, the user can initiate an object, and manually set the `metadata`, `service_line_extract` and `stop_level` attributes. This will then allow the user to run all relevant reporting functions.\n\n```python\nfrom BODSDataExtractor.extractor import TimetableExtractor\n\nservice_data_path = \"path to your service line level data here\"\nservice_data = pd.read_csv(bods_data_path)\n\nmy_bus_data_object = TimetableExtractor(api_key=api  # Your API Key Here\n                                     , limit=1)  # set the limit to 1 to avoid waiting for many datasets to be downloaded                                    \n\nmy_bus_data_object.full_data_extract = service_data #set the 'full_data_extract' attribute to the service_data variable loaded from the saved csv file\n\nall_sc = my_bus_data_object.count_service_codes() #this function counts all the service codes in a given service line level dataset\n```\n### OTC Database\n\nThe package is also able to pull the latest copy of the OTC Database (Currently England only) from the [gov.uk](https://www.data.gov.uk/dataset/9ea90ed8-de54-4274-92c6-272edd518bfb/traffic-commissioners-local-bus-service-registration) website. The code below demonstrates how this can be done in a single line of code.\nThere are two options to downloading the latest copy of the OTC Database using the `otc_db_download` file. The `save_otc_db` function creates a local folder named as the current date and saves a copy of the OTC DB there.\nIt also returns a dataframe containing the OTC DB. The second option is to use the `fetch_otc_db` function which only saves the OTC DB to a variable, and does not save it to a folder.\n\n```python\nfrom BODSDataExtractor import otc_db_download\n\nlocal_otc = otc_db_download.save_otc_db() # download and save a copy of the otc database, as well as assigning it to the 'otc' variable\n\notc = otc_db_download.fetch_otc_db() #assign a copy of the otc database to the 'otc' variable\n```\n\nThis code is executed automatically when calling a reporting function that requires the OTC database.\n\n### Reporting and Analytics\n\nAs well as delivering analytical ready data extracts from the BODS platform, this package also contains a variety of functions for analysing both the specific timetables data you have requested, as well as all of the timetables data on the platform.\n\n#### Custom reporting on your specified data\n\nEach of these functions (below) run on a variable containing the data you have extracted, as outlined earlier in this READme. This allows you to generate custom report metrics on the particular slice of BODS timetables data you are interested in, rather than on all of the data in the platform. The reporting functions, and how to run them, are detailed below. Of course, any of these can be run on the whole dataset too if that is the slice you specify for when initiating your object instance.\n\n```python\n\ncount_of_operators = my_bus_data_object.count_operators() #returns count of distinct operators (measured by operator_name) in a chosen dataset\n\ncount_of_service_codes = my_bus_data_object.count_service_codes()# returns count of unique service codes chosen dataset\n\nvalid_service_codes = my_bus_data_object.valid_service_codes()# returns count of unique and valid service codes chosen dataset, a dataframe with all the records with valid service codes and a dataframe with all the invalid service codes.\n\nservices_published_in_TXC_2_4 = my_bus_data_object.services_published_in_TXC_2_4()#returns percentage of services published in TXC 2.4 schema, and a dataframe of these records, and a dataframe of the records that are not published in this schema\n\ndatasets_published_in_TXC_2_4 = my_bus_data_object.datasets_published_in_TXC_2_4()# returns percentage of datasets published in TXC 2.4 schema, and a dataframe of these records, and a dataframe of the records that are not published in this schema\n\nred_dq = my_bus_data_object.red_dq_scores() #returns the number of operators in a table with red dq scores\n\nless_than_10 = my_bus_data_object.dq_less_than_x(90) # takes an integer as input (in this case 10) and returns a list of operators with a data quality score less than that integer\n\nno_lic_no = my_bus_data_object.no_licence_no() # returns a report listing which datasets contain files which do not have a licence number\n\n```\n\n#### Reporting on all of the published timetables data in BODS\n\nThe below functions are to be run on all of the published timetables data in the BODS platform. The general purpose of these is to cross check the timetables data published in BODS with the services registered on the OTC database. \n\n```python\nservices_by_area = my_bus_data_object.services_on_bods_or_otc_by_area() #Generates a dataframe of all service codes published on BODS and/or in the OTC database, indicates whether they are published on both or one of BODS and OTC, and provides the admin area the services has stops within\n\nservices_by_area_MI = my_bus_data_object.services_on_bods_or_otc_by_area_mi() #Generates MI from dataframe that lists all service codes from BODS and/or OTC database, by admin area. Specifically notes the number of services from these sources, and the fraction of all within BODS and OTC respectively.\n\npercent_published_licences = my_bus_data_object.percent_published_licences() #percentage of registered licences with at least one published service\n\nunpublished_services = my_bus_data_object.registered_not_published_services() #feed in a copy of the BODS timetable data and otc database to return a list of unpublished service codes\n\npublished_not_registered_services = my_bus_data_object.published_not_registered_services()#returns a dataframe of services found in the published data from the api which are not found in the otc database\n```\n\nReporting and analytics can be performed with the builtin functions as shown above. This code first fetches the latest copy of the otc database and compares it to a copy of the service line level data extracted using `service_line_extract`. The code returns a dataframe listing information about service codes registered with OTC but not published in the BODS data.\n\n\n<p align=\"right\">(<a href=\"#readme-top\">back to top</a>)</p>\n\n\n\n<!-- ROADMAP & Limitations -->\n## Roadmap & Limitations\n\nAs the first release of this project, the focus was on getting analytical ready timetable data in the hands of consumers. As a result, there are a number of limitations to bear in mind when using this package. These aim to be addressed in subsequent releases. \n\n#### Handling non standard files\nWhilst all BODS compliant files meet a certain set of standards, there is still variation in exactly how timetables xml files can be populated. This pacakge currently handles files that meet the most common structure, and a number of notable exceptions, however there are some files that stop level timetables will not be generated for. It will, however, generate dataset level and service line level data for all published files. Future releases will aim to close this gap so timetables can be generated for most, if not all files.\n\n#### Handling vehicle journeys that cross midnight\nAs the PTI standards dictate, sequence number logic is different for services that have stop times which cross midnight. This currently results in the stop level timetable output having vehicle journeys that do not start at sequence number 1. Future releases will include logic that better handles this to provide a more uniform output for such vehicle journeys.\n\n#### Providing additional detail about services\nFuture releases will extract additional data from timetables xml files in order to provide further detail on services; for example details regarding the days of operation and exceptions around bank holidays, as well as more detailed route information including distance between stops, in addition to time.\n\n#### Incorporating AVL and Fares data\nThe BODS platform also provides live vehicle location data (AVL), as well as Fares data. Future releases will aim to incorporate functionality for downloading and analysis AVL data initially, and subsequently Fares data once this has been validated. \n\n#### Optimising performance\nGenerating stop level timetables requires downloading and parsing a significant volume of data. It therefore takes quite some time to run the code. Future releases will aim to reduce execution time through optimisations.\n\n#### And more!\nThis project has consumers of BODS data at its heart, and so if any other features would be valuable, or any bugs are noticed please get in touch. Details of how to do this can be found in the 'Contributing' section below.\n\nSee the [open issues](https://github.com/KPMG-UK/bods_pseudo_test/issues) for a full list of proposed features (and known issues).\n\n<p align=\"right\">(<a href=\"#readme-top\">back to top</a>)</p>\n\n\n\n<!-- CONTRIBUTING -->\n## Contact / Contribute\n\n### Contact the Bus Open Data Service\n\n\nIf you require support or are experiencing issues, please contact the Bus Open Data Service Help Desk.\n\nThe Help Desk is available Monday to Friday, 9am to 5pm (excluding Bank Holidays in England and Wales, and the 24th December).\n\nThe Help Desk can be contacted by telephone or email as follows.\n\nTelephone: +44 (0) 800 028 0930\n\nEmail: bodshelpdesk@kpmg.co.uk\n\nThere is a discord server for consumers of BODS Data:\n\nhttps://discord.gg/4mMg5VXm5A\n\nContributions are what make the open source community such an amazing place to learn, inspire, and create. Any contributions you make are **greatly appreciated**.\n\nIf you have a suggestion that would make this better, please fork the repo and create a pull request. You can also simply open an issue with the tag \"enhancement\".\nDon't forget to give the project a star! Thanks again!\n\n\n<p align=\"right\">(<a href=\"#readme-top\">back to top</a>)</p>\n\n\n\n<!-- LICENSE -->\n## License\n\nDistributed under the MIT License. See `LICENSE.txt` for more information.\n\n<p align=\"right\">(<a href=\"#readme-top\">back to top</a>)</p>\n\n\n\n\n\n\n<!-- MARKDOWN LINKS & IMAGES -->\n<!-- https://www.markdownguide.org/basic-syntax/#reference-style-links -->\n[contributors-shield]: https://img.shields.io/github/contributors/github_username/repo_name.svg?style=for-the-badge\n[contributors-url]: https://github.com/KPMG-UK/bods_pseudo_test/graphs/contributors\n[forks-shield]: https://img.shields.io/github/forks/github_username/repo_name.svg?style=for-the-badge\n[forks-url]: https://github.com/github_username/repo_name/network/members\n[stars-shield]: https://img.shields.io/github/stars/github_username/repo_name.svg?style=for-the-badge\n[stars-url]: https://github.com/github_username/repo_name/stargazers\n[issues-shield]: https://img.shields.io/github/issues/github_username/repo_name.svg?style=for-the-badge\n[issues-url]: https://github.com/github_username/repo_name/issues\n[license-shield]: https://img.shields.io/github/license/github_username/repo_name.svg?style=for-the-badge\n[license-url]: https://github.com/github_username/repo_name/blob/master/LICENSE.txt\n\n[linkedin-shield]: https://img.shields.io/badge/-LinkedIn-black.svg?style=for-the-badge&logo=linkedin&colorB=555\n[linkedin-url]: https://linkedin.com/in/linkedin_username\n[python.com]: https://img.shields.io/badge/Python-0769AD?style=for-the-badge&logo=python&logoColor=white\n[python-url]: https://www.python.org\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "",
            "keywords": "",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "BODSDataExtractor",
            "package_url": "https://pypi.org/project/BODSDataExtractor/",
            "platform": null,
            "project_url": "https://pypi.org/project/BODSDataExtractor/",
            "project_urls": {
                "Homepage": "https://github.com/department-for-transport-BODS/bods-data-extractor"
            },
            "release_url": "https://pypi.org/project/BODSDataExtractor/1.0.1/",
            "requires_dist": [
                "pandas (>=1.4.2)",
                "bods-client (>=0.9.1)",
                "protobuf (==3.20)",
                "lxml (==4.9.1)",
                "xmltodict (==0.13.0)"
            ],
            "requires_python": ">=3.8",
            "summary": "This project was created to lower the barrier to entry for analysis of UK Bus Open Data. It facilitates the fetching and extraction of clean data, currently focussed on Timetables, into tables to be used for analysis or your own projects.",
            "version": "1.0.1",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 15737652,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "f16d60c2e25b1c2e849eec96111650cf",
                    "sha256": "09bb9590e8373e0bd0c66209bff1c2d99080b5e6863b974cbe9c040893b918d8"
                },
                "downloads": -1,
                "filename": "BODSDataExtractor-1.0.1-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "f16d60c2e25b1c2e849eec96111650cf",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.8",
                "size": 32172,
                "upload_time": "2022-11-11T16:48:35",
                "upload_time_iso_8601": "2022-11-11T16:48:35.346508Z",
                "url": "https://files.pythonhosted.org/packages/88/e5/865619635a4a6ac94342e5007dcd55489f43e1c76940b3f9ff7122a49f37/BODSDataExtractor-1.0.1-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "276a2fa344b6beb8b4a8821bdacde8cd",
                    "sha256": "b7e3b66fb82a8bad8eddf79ca562c5bf1453add26f25ef1a270a2df830e2d930"
                },
                "downloads": -1,
                "filename": "BODSDataExtractor-1.0.1.tar.gz",
                "has_sig": false,
                "md5_digest": "276a2fa344b6beb8b4a8821bdacde8cd",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.8",
                "size": 39823,
                "upload_time": "2022-11-11T16:48:37",
                "upload_time_iso_8601": "2022-11-11T16:48:37.601212Z",
                "url": "https://files.pythonhosted.org/packages/4c/f1/ae1bce665aac1ae7d96c190d557cc36dbc5d3abee0e31a7cb6eb591c3e74/BODSDataExtractor-1.0.1.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}