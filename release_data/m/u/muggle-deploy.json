{
    "1.0.0": {
        "info": {
            "author": "kerlomz",
            "author_email": "",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: MIT License",
                "Operating System :: OS Independent",
                "Programming Language :: Python :: 3"
            ],
            "description": "# 1. \u90e8\u7f72\u9879\u76ee\r\n\r\n| \u6587\u4ef6                      | \u529f\u80fd                                                         |\r\n| ------------------------- | ------------------------------------------------------------ |\r\n| fastapi_app.py            | FastAPI \u670d\u52a1\u5e94\u7528\u5806\u6808\uff0c\u5305\u62ec\u670d\u52a1\u7684\u8def\u7531\u5b9a\u4e49\u7b49\u7b49\uff0c\u53ef\u5728\u8fd9\u91cc\u4fee\u6539API\u8def\u7531 |\r\n| config.py                 | \u914d\u7f6e\u6587\u4ef6\uff0c\u5b9a\u4e49\u4e00\u4e9b\u57fa\u672c\u4f20\u53c2\uff0c\u8be6\u7ec6\u89c1\u9644\u5f55                       |\r\n| constants.py              | \u9759\u6001\u53d8\u91cf\u5b9a\u4e49\uff0c\u539f\u672c\u8fd9\u4e2a\u6846\u67b6\u662f\u5305\u542b\u6388\u6743\uff0c\u8bd5\u7528\u6a21\u5f0f\uff0c\u52a0\u5bc6\uff0c\u7f51\u7edc\u9a8c\u8bc1\u7b49\u7b49\u7684\uff0c\u8fd8\u6709\u914d\u7f6e\u6587\u4ef6\u5316\uff0c\u4e0d\u8fc7\u56e0\u4e3a\u662f\u52a0\u5bc6\u7684\uff0c\u4e0e\u9879\u76ee\u65e0\u5173\uff0c\u5c31\u90fd\u4f18\u5316\u6389\u4e86\uff0c\u53ea\u4fdd\u7559\u6700\u57fa\u672c\u7684\u51e0\u4e2a\u914d\u7f6e\uff0c\u9700\u8981\u5173\u6ce8\u7684\u53ea\u6709 modules_enabled\uff0c\u8be5\u6a21\u5f0f\u4e5f\u65b9\u4fbf\u540e\u7eed\u81ea\u5df1\u6dfb\u52a0\u4e2d\u95f4\u4ef6\uff0c\u63a7\u5236\u5f00\u542f\u6216\u5173\u95ed\u3002 |\r\n| engine/*                  | \u5305\u542b\u8fd0\u884c\u65f6\u5f15\u64ce\uff0c\u6a21\u578b\u5f15\u64ce\uff0c\u9879\u76ee\u5f15\u64ce\uff0c\u4f1a\u8bdd\u5f15\u64ce\u7b49\u5f15\u64ce\u57fa\u7c7b       |\r\n| entity.py                 | \u8fd9\u5757\u4e3b\u8981\u662f\u9488\u5bf9\u70b9\u9009\u62d3\u5c55\u7684\uff0c\u57fa\u7840\u6570\u636e\u7ed3\u6784\u5982\u5750\u6807\u8fd9\u4e9b\u7684           |\r\n| exception.py              | \u81ea\u5b9a\u4e49\u5f02\u5e38                                                   |\r\n| handler.py                | WEB\u670d\u52a1\u7684\u6838\u5fc3\u903b\u8f91\uff0c\u6700\u7cbe\u7b80\u5b9e\u73b0\u53ef\u4ee5\u53c2\u8003SDK\u6838\u5fc3\u903b\u8f91             |\r\n| logger.py                 | \u65e5\u5fd7                                                         |\r\n| main.py                   | Web\u670d\u52a1\u542f\u52a8\u6587\u4ef6                                              |\r\n| sdk.py                    | SDK\u670d\u52a1\u7684\u6838\u5fc3\u903b\u8f91                                            |\r\n| utils.py                  | \u7cfb\u7edf\u5de5\u5177\u7c7b\uff0c\u52a8\u6001\u52a0\u8f7d\u4e2d\u95f4\u4ef6\uff0cWEB\u670d\u52a1\u53c2\u6570\u89e3\u6790\u7b49                |\r\n| requirements.txt          | \u4f9d\u8d56\u58f0\u660e\uff0c\u4f7f\u7528pip install -r requirements.txt \u4e00\u952e\u5b89\u88c5\u4f9d\u8d56   |\r\n| logic/base.py             | \u903b\u8f91\u6a21\u5757\u7684\u57fa\u672c\u903b\u8f91                                           |\r\n| logic/cls.py              | Cls \u6a21\u578b\u903b\u8f91                                                 |\r\n| logic/ctc.py              | CTC \u6a21\u578b\u903b\u8f91                                                 |\r\n| logic/click.py            | \u70b9\u9009\u903b\u8f91                                                     |\r\n| middleware                | \u4e2d\u95f4\u4ef6\uff0c\u5305\u62ec\u5c55\u793a\u9875\u9762\uff08\u4e3b\u8981\u65b9\u4fbf\u6d4b\u8bd5\uff09\uff0c\u6388\u6743\u903b\u8f91\u7b49\uff0c\u76ee\u524d\u8be5\u9879\u76ee\u6ca1\u7528\u5230\uff0c\u56fe\u50cf\u5c55\u793a (Draw) \u9ed8\u8ba4\u5f00\u542f\u3002http://127.0.0.1:19199/preview \u53ef\u4ee5\u8bbf\u95ee\u6d4b\u8bd5\u9875\u9762\u3002 |\r\n| /projects/*               | \u5de5\u7a0b\u8def\u5f84\uff0c \u8def\u5f84\u4e0b\u7684\u6587\u4ef6\u5939\u5373\u4e3a\u5b9e\u9645\u8c03\u7528\u65f6\u7684\u9879\u76ee\u540d [project_name] \u53c2\u6570 |\r\n| /ext/engine/*             | \u9644\u52a0\u6a21\u578b\u5f15\u64ce\u7684\u5b9e\u73b0\u7c7b                                         |\r\n| /logic/*                  | \u9644\u52a0\u9879\u76ee\u903b\u8f91\u7684\u5b9e\u73b0\u7c7b                                         |\r\n| server/gunicorn_server.py | gunicorn server, \u901a\u8fc7config.py\u542f\u52a8\u53c2\u6570\u63a7\u5236                   |\r\n\r\n\r\n\r\n| \u9879\u76ee\u5de5\u7a0b\uff08Projects\uff09 |       |\r\n|----------------|-------|\r\n| xxx            | xxx\u8bc6\u522b |\r\n\r\n\r\n\r\n## 1.1 \u7cfb\u7edf\u8981\u6c42\r\n\r\n\u6700\u4f4e\uff1aWindows 2012 \u5185\u6838\u4ee5\u4e0a / Ubuntu18\u4ee5\u4e0a\r\n\r\n| Linux                     | Windows                      |\r\n| ------------------------- | ---------------------------- |\r\n| Ubuntu 20/18\uff1bCentOS 7.6+ | Windows 2012/2016/2019/10/11 |\r\n\r\n\r\n\r\n\r\n## 1.2 \u73af\u5883\u8981\u6c42\r\n\r\nPython3.9 (:=\u8868\u8fbe\u5f0f\u6240\u4ee5\u6700\u4f4e\u53ea\u80fd3.8)\r\n\r\n\r\n\r\n## 1.3 \u9879\u76ee\u90e8\u7f72\u6838\u5fc3\u6d41\u7a0b\r\n\r\n1. \u5b89\u88c5 Python3.9\r\n\r\n2. ```pip install muggle-deploy-1.0.0.tar.gz -i https://mirrors.cloud.tencent.com/pypi/simple ``` \u5728\u81ea\u5df1\u7684\u9879\u76ee\u4e2d\uff0c\u5b89\u88c5\u9879\u76ee\u4f9d\u8d56\u3002\r\n\r\n3. \u670d\u52a1\u90e8\u7f72\uff1a\r\n\r\n   1. SDK\u65b9\u5f0f\u8c03\u7528\uff1a\u53c2\u8003 test_sdk.py\r\n\r\n   2. WEB\u90e8\u7f72\uff1a``` python test_server.py --port 19199 ``` \u542f\u52a8\u9879\u76ee\u4e3b\u670d\u52a1\r\n\r\n4. \u7f16\u8bd1\u53ef\u6267\u884c\u6587\u4ef6\uff08\u53ef\u79fb\u690d\u65e0\u9700Python\u8fd0\u884c\u73af\u5883\u90e8\u7f72\u6846\u67b6\uff09\uff1a\r\n\r\n    ```python3.9 test_compile.py --projects \u9879\u76ee1 \u9879\u76ee2``\r\n\r\n   \u9ed8\u8ba4\u7f16\u8bd1\u8def\u5f84\u5728 %TEMP%/muggle_dist \u4e0b\u3002\r\n\r\n\r\n\r\n**test_server.py**\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n# -*- coding:utf-8 -*-\r\nfrom muggle import serve\r\n\r\nif __name__ == '__main__':\r\n    serve()\r\n```\r\n\r\n\r\n\r\n### 1.3.1 CentOS\u90e8\u7f72\u5168\u6d41\u7a0b\r\n\r\n```shell\r\n# \u5de5\u4f5c\u8def\u5f84\u4e3a muggle-deploy-1.0.0 \u9879\u76ee\u4e2d\r\n\r\n# 1. \u5b89\u88c5 Python3.9.9 \u73af\u5883\r\nsudo yum -y update\r\nsudo yum install gcc openssl-devel bzip2-devel libffi-devel zlib-devel git -y\r\n\r\ncd muggle/package/lib && tar -xvf Python-3.9.9.tar.gz && cd Python-3.9.9/\r\nsudo ./configure --enable-optimizations --enable-shared\r\nmake clean &&  make altinstall\r\n\r\n# \u914d\u7f6e\u73af\u5883\u53d8\u91cf & \u5b89\u88c5 muggle \u6a21\u5757\r\ncd ../../../../ && echo \"/usr/local/lib\" >> /etc/ld.so.conf && ldconfig -v\r\npython3.9 -m pip install muggle-deploy-1.0.0.tar.gz -i https://mirrors.cloud.tencent.com/pypi/simple\r\n\r\n# 2. \u628a projects / logic \u7ed3\u6784\u7684\u6a21\u578b\u548c\u76f8\u5173\u914d\u7f6e\u653e\u7f6e\u4e8e\u9879\u76ee\u6839\u76ee\u5f55\r\n\r\n# 3.1 \u524d\u53f0\u542f\u52a8\uff0c\u7528\u4e8e\u6d4b\u8bd5\u73af\u5883\u5b89\u88c5\u662f\u5426\u6709\u8bef \r\n# python3.9 test_server.py --port 19199 \r\n# 3.2 \u540e\u53f0\u542f\u52a8\r\nnohup python3.9 test_server.py --port 19199 &\r\n\r\n# 4. \u67e5\u770b nohup \u65e5\u5fd7\r\ntail -f -n 100 nohup.out \u67e5\u770b\u5b9e\u65f6\u65e5\u5fd7\r\n```\r\n\r\n\r\n\r\n### 1.3.2 Ubuntu\u90e8\u7f72\u6d41\u7a0b\r\n\r\n```bash\r\n# \u5de5\u4f5c\u8def\u5f84\u4e3a muggle-deploy-1.0.0 \u9879\u76ee\u4e2d\r\n\r\n# 1. \u5b89\u88c5 Python3.9.9 \u73af\u5883\r\nsudo wget -O /etc/apt/sources.list http://mirrors.cloud.tencent.com/repo/ubuntu20_sources.list\r\nsudo apt-get clean all\r\nsudo apt-get update\r\nsudo apt install software-properties-common -y\r\nsudo add-apt-repository ppa:deadsnakes/ppa -y\r\nsudo apt update\r\nsudo apt install python3.9 -y\r\nsudo apt install python3.9-dev -y\r\nsudo apt install python3-pip -y\r\nsudo apt-get install ccache -y\r\nsudo apt install chrpath -y\r\nsudo apt-get install patchelf\r\n\r\n# \u914d\u7f6e\u73af\u5883\u53d8\u91cf & \u5b89\u88c5 muggle \u6a21\u5757\r\npython3.9 -m pip install git+git://github.com/benoitc/gunicorn.git --no-cache-dir --force-reinstall\r\npython3.9 -m pip install muggle-deploy-1.0.0.tar.gz -i https://mirrors.cloud.tencent.com/pypi/simple\r\n\r\n# 2. \u628a projects / logic  \u7ed3\u6784\u7684\u6a21\u578b\u548c\u76f8\u5173\u914d\u7f6e\u653e\u7f6e\u4e8e\u9879\u76ee\u6839\u76ee\u5f55\r\n\r\n# 3.1 \u524d\u53f0\u542f\u52a8\uff0c\u7528\u4e8e\u6d4b\u8bd5\u73af\u5883\u5b89\u88c5\u662f\u5426\u6709\u8bef \r\n# python3.9 test_server.py --port 19199 \r\n# 3.2 \u540e\u53f0\u542f\u52a8\r\nnohup python3.9 test_server.py --port 19199 &\r\n\r\n# 4. \u67e5\u770b nohup \u65e5\u5fd7\r\ntail -f -n 100 nohup.out \u67e5\u770b\u5b9e\u65f6\u65e5\u5fd7\r\n```\r\n\r\n\r\n\r\n### 1.3.3 Linux\u7f16\u8bd1\u7248\u90e8\u7f72\r\n\r\n```shell\r\ncd main.dist\r\n\r\n# 1. \u628a projects / logic \u7ed3\u6784\u7684\u6a21\u578b\u548c\u76f8\u5173\u914d\u7f6e\u653e\u7f6e\u4e8e\u9879\u76ee\u6839\u76ee\u5f55\r\n\r\n# 2.1 \u524d\u53f0\u542f\u52a8\uff0c\u7528\u4e8e\u6d4b\u8bd5\u73af\u5883\u5b89\u88c5\u662f\u5426\u6709\u8bef \r\n# ./main --port 19199 \r\n# 2.2 \u540e\u53f0\u542f\u52a8\r\nnohup ./main.bin --port 19199 &\r\n\r\n# 3. \u67e5\u770b nohup \u65e5\u5fd7\r\ntail -f -n 100 nohup.out \u67e5\u770b\u5b9e\u65f6\u65e5\u5fd7\r\n```\r\n\r\n\r\n\r\n\r\n\r\n### 1.3.2 \u542f\u52a8\u53c2\u6570\u9644\u5f55\r\n\r\n| \u542f\u52a8\u53c2\u6570 | \u4ecb\u7ecd                        |\r\n| -------- | --------------------------- |\r\n| host     | \u670d\u52a1\u76d1\u542c\u5730\u5740\uff0c\u9ed8\u8ba4\u4e3a0.0.0.0 |\r\n| port     | \u670d\u52a1\u76d1\u542c\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a19199   |\r\n| workers  | \u8fdb\u7a0b\u6570                      |\r\n| threads  | \u7ebf\u7a0b\u6570                      |\r\n\r\n\r\n\r\n## 1.4 \u670d\u52a1\u8c03\u7528\r\n\r\n\u670d\u52a1\u542f\u52a8\u4e4b\u540e\u6839\u636e\u670d\u52a1\u65e5\u5fd7\u53ef\u89c1\u63d0\u793a\uff1a\r\n\r\n\u8c03\u7528\u6587\u6863\uff1ahttp://127.0.0.1:19199/runtime/api/guide\uff0c\u7aef\u53e3\u53f7\u82e5\u81ea\u5b9a\u4e49\u9700\u81ea\u884c\u4fee\u6539\uff08\u8c03\u7528\u6587\u6863\u8bf7\u4f7f\u7528\u8be5\u5730\u5740\u8bbf\u95ee\uff0c\u56e0\u4e3a\u751f\u6210\u4e4b\u540e\u7684\u6587\u6863\u6709\u4e00\u5b9a\u7684\u65f6\u6548\uff0c\u82e5404\u8bf7\u5237\u65b0\u8be5\u5f15\u5bfc\u9875\u9762\u91cd\u8bd5\u3002\r\n\r\n\r\n\r\nSDK\u8c03\u7528\u65b9\u5f0f\uff08\u53ef\u7528\u4e8e\u5d4c\u5165Python\u7684\u8de8\u8bed\u8a00\u8c03\u7528\uff09\uff1a\r\n\r\n```python\r\nimport os\r\n\r\nimport PIL.Image\r\nfrom muggle import SDK\r\n\r\n# \u6f14\u793a\u9879\u76ee\u4e2d\u83b7\u53d6demo\u56fe\u7247\u793a\u4f8b\r\nproject_name = \"\u9879\u76ee\u540d\"\r\nproject_dir = rf\"projects/{project_name}/demo\"\r\nimage_path = [os.path.join(project_dir, name) for name in os.listdir(project_dir) if name.startswith(\"image\")][0]\r\ntitle_paths = [os.path.join(project_dir, name) for name in os.listdir(project_dir) if name.startswith(\"title\")]\r\n\r\nif len(title_paths) > 1:\r\n    title = [PIL.Image.open(path) for path in title_paths]\r\nelif len(title_paths) == 1:\r\n    title = PIL.Image.open(title_paths[0])\r\nelse:\r\n    title = None\r\n    \r\nimage = PIL.Image.open(image_path)\r\n\r\n# \u8fd9\u90e8\u5206\u5f00\u59cb\u624d\u662f\u6838\u5fc3\u8c03\u7528\uff0c\r\n# image \u662f [\u4e3b\u56fe: PIL.Image \u683c\u5f0f]\uff0c \r\n# title \u770b\u5177\u4f53\u9879\u76ee\u903b\u8f91\uff0c\u53ef\u4ee5\u662fList[PIL.Image]/PIL.Image/None/str\uff0c\u89c6\u5177\u4f53\u60c5\u51b5\u800c\u5b9a\r\n\r\n# \u521d\u59cb\u5316\u9879\u76eeSDK\uff0c\u5982\u679c\u8c03\u7528\u5faa\u73af\u8c03\u7528\u9884\u6d4b\u51fd\u6570\uff0c\u90a3\u4e48sdk\u5fc5\u987b\u5728\u5faa\u73af\u4ee5\u5916\u907f\u514d\u91cd\u590d\u521d\u59cb\u5316\r\nsdk = SDK.get(project_name)\r\n\r\n# \u9884\u6d4b\u51fd\u6570\r\npredictions, score = sdk.execute(image, title=title)\r\nprint(predictions, score)\r\n```\r\n\r\n\r\n\r\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/kerlomz",
            "keywords": "",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "muggle-deploy",
            "package_url": "https://pypi.org/project/muggle-deploy/",
            "platform": null,
            "project_url": "https://pypi.org/project/muggle-deploy/",
            "project_urls": {
                "Homepage": "https://github.com/kerlomz"
            },
            "release_url": "https://pypi.org/project/muggle-deploy/1.0.0/",
            "requires_dist": null,
            "requires_python": ">=3.9,<3.11",
            "summary": "muggle-deploy",
            "version": "1.0.0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 16063166,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "78cd727477579dbd0b8e402b6394b350",
                    "sha256": "a3880a8eca26dc5dfb76f2a3ca21038cb724f234b028a96496c40a85e9e8608a"
                },
                "downloads": -1,
                "filename": "muggle-deploy-1.0.0.tar.gz",
                "has_sig": false,
                "md5_digest": "78cd727477579dbd0b8e402b6394b350",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.9,<3.11",
                "size": 69953464,
                "upload_time": "2022-12-11T07:36:18",
                "upload_time_iso_8601": "2022-12-11T07:36:18.684258Z",
                "url": "https://files.pythonhosted.org/packages/3d/9a/635478d089a24586e88b132f5142b63dfd4a906c3add3679f29d90b580ac/muggle-deploy-1.0.0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}