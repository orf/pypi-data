{
    "1.0": {
        "info": {
            "author": "Lakera AI",
            "author_email": "dev@lakera.ai",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: MIT License",
                "Operating System :: OS Independent",
                "Programming Language :: Python :: 3",
                "Programming Language :: Python :: 3.10",
                "Programming Language :: Python :: 3.11",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8",
                "Programming Language :: Python :: 3.9"
            ],
            "description": "# onnx_clip\n\n## About\nThe purpose of this repository is to replicate the functionality of [CLIP](https://github.com/openai/CLIP) without needing the\nvarious `PyTorch` dependencies. We do this by utilising a `.onnx` format of the model, a pure `NumPy` version of the tokenizer, \nand an accurate approximation of the [preprocess function.](https://github.com/openai/CLIP/blob/main/clip/clip.py#L79)\nDue to this final approximation, the output logits do\nnot perfectly match those of `CLIP` but are close enough for our purposes.\n\n## git lfs\nThis repository uses Git LFS for the `clip_model.onnx` file. Make sure to do `git lfs install` before cloning.\n\n## Installation\nTo install, run the following in the root of the repository:\n```bash\npip install .\n```\n\n## Usage\n\nAll you need to do is call the `OnnxClip` model class. An example can be seen below.\n\n```python\nfrom onnx_clip import OnnxClip, softmax\nfrom PIL import Image\n\nimage = Image.open(\"onnx_clip/data/CLIP.png\").convert(\"RGB\")\ntext = [\"a photo of a man\", \"a photo of a woman\"]\nonnx_model = OnnxClip()\nlogits_per_image, logits_per_text = onnx_model.predict(image, text)\nprobas = softmax(logits_per_image)\n```\n\n## Building & developing from source\n\n**Note**: The following may give timeout errors due to the filesizes. If so, this can be fixed with poetry version 1.1.13 - see [this related issue.](https://github.com/python-poetry/poetry/issues/6009)\n\n### Install, run, build and publish with Poetry\n\nInstall [Poetry](https://python-poetry.org/docs/)\n```\ncurl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python -\n```\n\nTo setup the project and create a virtual environment run the following command from the project's root directory.\n```\npoetry install\n```\n\nTo build a source and wheel distribution of the library run the following command from the project's root directory.\n```\npoetry build\n```\n\n#### Instructions to publish the build artifacts for project maintainers\nCopy this into your poetry config.toml file (or create a new one).\n```\n[repositories]\n[repositories.onnx_clip]\nurl = \"https://gitlab.com/api/v4/projects/41150990/packages/pypi\"\n```\nThe file should be located here on MacOs\n```\n~/Library/Application Support/pypoetry/config.toml\n```\nand here on Linux\n```\n~/.config/pypoetry/config.toml\n```\n\nWith this setup you can now publish a package like so\n```\npoetry publish --repository onnx_clip -u <access_token_name> -p <access_token_key>\n```\nWARNING: Do not publish to the public pypi registry, e.g. always use the --repository option.\nNOTE1: You must generate [an access token](https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html)\nwith scope set to api.  \nNOTE2: The push will fail if there is already a package with the same version. You can increment the version using [poetry](https://python-poetry.org/docs/cli/#version)\n```\npoetry version\n```\nor by manually changing the version number in pyproject.toml.\n\n# Help\n\nPlease let us know how we can support: [earlyaccess@lakera.ai](mailto:earlyaccess@lakera.ai).\n\n# LICENSE\nSee the [LICENSE](./LICENSE) file in this repository.\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "",
            "keywords": "",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "onnx-clip",
            "package_url": "https://pypi.org/project/onnx-clip/",
            "platform": null,
            "project_url": "https://pypi.org/project/onnx-clip/",
            "project_urls": null,
            "release_url": "https://pypi.org/project/onnx-clip/1.0/",
            "requires_dist": [
                "numpy (>=1.18.0,<2.0.0)",
                "opencv-python-headless (>=4.0.1,<5.0.0)",
                "onnxruntime (>=1.4.0)",
                "pillow (>=8.4.0,<9.0.0)",
                "ftfy (>=6.0.3,<7.0.0)",
                "regex"
            ],
            "requires_python": ">=3.6.1,<4.0.0",
            "summary": "Replicating CLIP without PyTorch dependencies.",
            "version": "1.0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 16074886,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "9881226a0177a89a2996dee798e5ae93",
                    "sha256": "360798f91b98fb94597230b74024ae4aade8307f7391f5552e7ab4e876bc5d90"
                },
                "downloads": -1,
                "filename": "onnx_clip-1.0-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "9881226a0177a89a2996dee798e5ae93",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.6.1,<4.0.0",
                "size": 1596566,
                "upload_time": "2022-12-12T14:24:40",
                "upload_time_iso_8601": "2022-12-12T14:24:40.852008Z",
                "url": "https://files.pythonhosted.org/packages/48/79/98fe72e1bb3f9cd87f65f037997d776f7286d8f1467f7ac0e70a8a46b7d6/onnx_clip-1.0-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "2702c02c912865504c0912f2f2026740",
                    "sha256": "c564c4e58d07e4064fc66f688da594b035a5b6a67d33b3f11ea68ff197cc43dd"
                },
                "downloads": -1,
                "filename": "onnx_clip-1.0.tar.gz",
                "has_sig": false,
                "md5_digest": "2702c02c912865504c0912f2f2026740",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.6.1,<4.0.0",
                "size": 1597815,
                "upload_time": "2022-12-12T14:24:43",
                "upload_time_iso_8601": "2022-12-12T14:24:43.957603Z",
                "url": "https://files.pythonhosted.org/packages/b2/da/a1d934d90fbfc8dff5eca6445ff5c8ffb6489446fb59e58558fc13f5dda7/onnx_clip-1.0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}