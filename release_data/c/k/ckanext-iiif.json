{
    "2.1.0": {
        "info": {
            "author": "Natural History Museum",
            "author_email": "data@nhm.ac.uk",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 3 - Alpha",
                "License :: OSI Approved :: GNU General Public License v3 (GPLv3)",
                "Programming Language :: Python :: 2.7"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/NaturalHistoryMuseum/ckanext-iiif",
            "keywords": "CKAN IIIF",
            "license": "GNU GPLv3",
            "maintainer": "",
            "maintainer_email": "",
            "name": "ckanext-iiif",
            "package_url": "https://pypi.org/project/ckanext-iiif/",
            "platform": null,
            "project_url": "https://pypi.org/project/ckanext-iiif/",
            "project_urls": {
                "Homepage": "https://github.com/NaturalHistoryMuseum/ckanext-iiif"
            },
            "release_url": "https://pypi.org/project/ckanext-iiif/2.1.0/",
            "requires_dist": null,
            "requires_python": "",
            "summary": "A IIIF extenstion for CKAN",
            "version": "2.1.0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 15912417,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "ea98537d387b52456c0f092296f518f2",
                    "sha256": "578968ddb13441215eadd25aefa6b79b94c971ecac16f67373a6ae7430834b16"
                },
                "downloads": -1,
                "filename": "ckanext_iiif-2.1.0-py3.10.egg",
                "has_sig": false,
                "md5_digest": "ea98537d387b52456c0f092296f518f2",
                "packagetype": "bdist_egg",
                "python_version": "2.1.0",
                "requires_python": null,
                "size": 5631,
                "upload_time": "2022-11-15T15:35:27",
                "upload_time_iso_8601": "2022-11-15T15:35:27.835672Z",
                "url": "https://files.pythonhosted.org/packages/2e/98/ee41828e4534eb3aa2b91c958674510093542b33195632aef034fcaa41f9/ckanext_iiif-2.1.0-py3.10.egg",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "c648626e53b6a9994bc4801c5f28e883",
                    "sha256": "c7b1cdfa4e156822a7c851c699793491a01b00382dcd139128103cd0b840feb5"
                },
                "downloads": -1,
                "filename": "ckanext_iiif-2.1.0-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "c648626e53b6a9994bc4801c5f28e883",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": null,
                "size": 19046,
                "upload_time": "2022-11-15T15:35:26",
                "upload_time_iso_8601": "2022-11-15T15:35:26.479053Z",
                "url": "https://files.pythonhosted.org/packages/4b/1e/eaabbcafd9cc78bf1852a5533eed5128e16bd1b212460f4901f6ebe31fed/ckanext_iiif-2.1.0-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "0c9b76a77ff56a9edb9ef3cf9112b6b3",
                    "sha256": "9ced6488a63a21b40e2fc475309601643f0e5f26aa0d10c6d94257fe8d8e57c6"
                },
                "downloads": -1,
                "filename": "ckanext-iiif-2.1.0.tar.gz",
                "has_sig": false,
                "md5_digest": "0c9b76a77ff56a9edb9ef3cf9112b6b3",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": null,
                "size": 21289,
                "upload_time": "2022-11-15T15:35:29",
                "upload_time_iso_8601": "2022-11-15T15:35:29.345757Z",
                "url": "https://files.pythonhosted.org/packages/52/26/0c80d3dd02d1793d9f94d66f3d856319431ffa1cd3e0674c254d89875246/ckanext-iiif-2.1.0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "3.0.0": {
        "info": {
            "author": "",
            "author_email": "Natural History Museum <data@nhm.ac.uk>",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 3 - Alpha",
                "License :: OSI Approved :: GNU General Public License v3 (GPLv3)",
                "Programming Language :: Python",
                "Programming Language :: Python :: 3 :: Only",
                "Programming Language :: Python :: 3.6",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8"
            ],
            "description": "<!--header-start-->\n<img src=\".github/nhm-logo.svg\" align=\"left\" width=\"150px\" height=\"100px\" hspace=\"40\"/>\n\n# ckanext-iiif\n\n[![Tests](https://img.shields.io/github/workflow/status/NaturalHistoryMuseum/ckanext-iiif/Tests?style=flat-square)](https://github.com/NaturalHistoryMuseum/ckanext-iiif/actions/workflows/main.yml)\n[![Coveralls](https://img.shields.io/coveralls/github/NaturalHistoryMuseum/ckanext-iiif/main?style=flat-square)](https://coveralls.io/github/NaturalHistoryMuseum/ckanext-iiif)\n[![CKAN](https://img.shields.io/badge/ckan-2.9.1-orange.svg?style=flat-square)](https://github.com/ckan/ckan)\n[![Python](https://img.shields.io/badge/python-3.6%20%7C%203.7%20%7C%203.8-blue.svg?style=flat-square)](https://www.python.org/)\n[![Docs](https://img.shields.io/readthedocs/ckanext-iiif?style=flat-square)](https://ckanext-iiif.readthedocs.io)\n\n_IIIF for CKAN_\n\n<!--header-end-->\n\n# Overview\n\n<!--overview-start-->\nThis extension enables IIIF functionality for CKAN by implementing the Presentation API.\nCurrently, this includes a single manifest builder for records, but through the `IIIIF`\ninterface you can extend the builders to include other IIIF resources.\n\n<!--overview-end-->\n\n# Installation\n\n<!--installation-start-->\nPath variables used below:\n\n- `$INSTALL_FOLDER` (i.e. where CKAN is installed), e.g. `/usr/lib/ckan/default`\n- `$CONFIG_FILE`, e.g. `/etc/ckan/default/development.ini`\n\n1. Clone the repository into the `src` folder:\n\n  ```bash\n  cd $INSTALL_FOLDER/src\n  git clone https://github.com/NaturalHistoryMuseum/ckanext-iiif.git\n  ```\n\n2. Activate the virtual env:\n\n  ```bash\n  . $INSTALL_FOLDER/bin/activate\n  ```\n\n3. Install the requirements from requirements.txt:\n\n  ```bash\n  cd $INSTALL_FOLDER/src/ckanext-iiif\n  pip install -r requirements.txt\n  ```\n\n4. Run setup.py:\n\n  ```bash\n  cd $INSTALL_FOLDER/src/ckanext-iiif\n  python setup.py develop\n  ```\n\n5. Add 'iiif' to the list of plugins in your `$CONFIG_FILE`:\n\n  ```ini\n  ckan.plugins = ... iiif\n  ```\n\n<!--installation-end-->\n\n# Configuration\n\n<!--configuration-start-->\nThere are no configuration options for this extension.\n\n<!--configuration-end-->\n\n# Usage\n\n<!--usage-start-->\nThis extension's main function is provide a standard endpoint and action to create IIIF\nresources.\nThese IIIF resources could be based on whatever you like - a record, a resource, a whole\ndataset etc.\n\nPresentation API IIIF resources can be accessed via either the `/iiif/<identifier>`\nendpoint or the `build_iiif_resource` action where the identifier is passed in the data\ndict in the key `\"identifier\"`.\nWhen this occurs the identifier is matched against any of the registered IIIF resource\nbuilders and if a match is found, the resource is returned.\nIdentifiers can be built if the builder ID is known along with the necessary parameters\nby using the `build_iiif_identifier` action.\n\n## Record Manifest Builder\n\nBy default, the only IIIF resource this extension can build is record manifests.\nThis requires the `record_show` action to be available from the `ckanext-nhm` extension\n(there is\nan [open issue](https://github.com/NaturalHistoryMuseum/ckanext-nhm/issues/602) to move\nthis action to a different extension, most likely\n[ckanext-versioned-datastore](https://github.com/NaturalHistoryMuseum/ckanext-versioned-datastore))\n.\n\nTo build a record manifest you must provide the appropriate identifier, which must be of\nthe format `resource/<resource_id>/record/<record_id>`, for example:\n`resource/afea211d-1b3d-49ad-9d15-17f0de368967/record/429`.\nThis example identifies the record with ID `429` from the resource with ID\n`afea211d-1b3d-49ad-9d15-17f0de368967`.\nIf the record and the resource can be found, and images can be found on the record, then\na manifest is returned.\nIf any of these conditions fail, the action returns `None` and the endpoint returns 404.\n\nThe images are detected in the record by looking for the `_image_field` extra on the\nresource.\nThis should define the field name in the record where images can be found.\nThe value associated with this image field in the record can be:\n\n- a string (should be a URL)\n- a list of strings (each element should be a URL)\n- a string containing several URLs separated by a delimiter (this should be defined on\n  the resource using the `_image_delimiter` extra)\n- a list of dicts (the URL is extracted by looking for an `identifier` field within\n  each dict)\n\nTo fill out the values in the manifest, the builder pulls out fields as specified by\nmore resource level extras or by falling back to a default value.\nThese are:\n\n- `\"label\"` - attempts to use `_title_field` extra but falls back to record ID\n- `\"rights\"` - attempts to use `_image_licence` extra but falls back\n  to [cc-by](https://creativecommons.org/licenses/by/4.0/)\n\nThe `\"metadata\"` field in the manifest is populated using the fields and values in the\nrecord data itself.\n\n## Adding a Custom Builder\n\nTo add a custom builder all you have to do is implement the `IIIIF` interface in your\nextension plugin.\nFor example:\n\n```python\nimport ckan.plugins as plugins\nfrom typing import Optional, Callable\nfrom typing import OrderedDict\n\nfrom ckanext.iiif.builders.abc import IIIFResourceBuilder\nfrom ckanext.iiif.interfaces import IIIIF\n\n\nclass MyBuilder(IIIFResourceBuilder):\n\n    def match_and_build(self, identifier: str) -> Optional[dict]:\n        ...\n\n    def build_identifier(self, *args, **kwargs) -> str:\n        ...\n\n\nclass MyExtension(plugins.SingletonPlugin):\n    plugins.implements(IIIIF)\n\n    def register_iiif_builders(self, builders: OrderedDict[str, IIIFResourceBuilder]):\n        builders[\"my_builder\"]: MyBuilder()\n```\n\nWhen a request is made to build a IIIF resource, each of the registered builders is\ncalled in turn with the identifier.\nThis means that the builders need to both match the identifier to confirm it matches its\npattern or meets its criteria, and generate the manifest.\n\nThe builders should:\n\n- Return `None` if the identifier doesn't match the builders requirements. When this\n  happens, the logic continues and tries the next registered builder function.\n- Raise a `ckanext.iiif.builders.utils.IIIFBuildError` if the identifier matched but the\n  manifest couldn't be generated for any reason. This will stop the logic from checking\n  any other builders for matches and return `None` to the caller.\n- Raise any other type of `Exception` if an unexpected error occurred during matching or\n  processing. This will be propagated to the caller.\n\n<!--usage-end-->\n\n# Testing\n\n<!--testing-start-->\n\nThere is a Docker compose configuration available in this repository to make it easier\nto run tests.\n\nTo run the tests against ckan 2.9.x on Python3:\n\n1. Build the required images\n\n```bash\ndocker-compose build\n```\n\n2. Then run the tests.\n   The root of the repository is mounted into the ckan container as a volume by the\n   Docker compose\n   configuration, so you should only need to rebuild the ckan image if you change the\n   extension's\n   dependencies.\n\n```bash\ndocker-compose run ckan\n```\n\nThe ckan image uses the Dockerfile in the `docker/` folder.\n\n<!--testing-end-->\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "",
            "keywords": "CKAN,data,iiif",
            "license": "GPL-3.0-or-later",
            "maintainer": "",
            "maintainer_email": "",
            "name": "ckanext-iiif",
            "package_url": "https://pypi.org/project/ckanext-iiif/",
            "platform": null,
            "project_url": "https://pypi.org/project/ckanext-iiif/",
            "project_urls": {
                "changelog": "https://github.com/NaturalHistoryMuseum/ckanext-iiif/blob/main/CHANGELOG.md",
                "repository": "https://github.com/NaturalHistoryMuseum/ckanext-iiif"
            },
            "release_url": "https://pypi.org/project/ckanext-iiif/3.0.0/",
            "requires_dist": [
                "ckantools (>=0.3.0)",
                "mock ; extra == 'test'",
                "pytest (>=4.6.5) ; extra == 'test'",
                "pytest-cov (>=2.7.1) ; extra == 'test'",
                "coveralls ; extra == 'test'"
            ],
            "requires_python": ">=3.6",
            "summary": "IIIF for CKAN",
            "version": "3.0.0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 15912417,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "1e056eb6898b90badc6b357f03056800",
                    "sha256": "35c94852db800949339d1a3921e43020ed2e0fd10ca6e61b50ebe792b03c5043"
                },
                "downloads": -1,
                "filename": "ckanext_iiif-3.0.0-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "1e056eb6898b90badc6b357f03056800",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.6",
                "size": 34914,
                "upload_time": "2022-11-28T10:21:49",
                "upload_time_iso_8601": "2022-11-28T10:21:49.326293Z",
                "url": "https://files.pythonhosted.org/packages/9f/cc/25c238e27c2ffc833e6b1b173d4ecdd1a7cd7c67ecc7699a6278d06d5f31/ckanext_iiif-3.0.0-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "6f85ea9eef2cfcd16225bf6fa00f2f01",
                    "sha256": "7adc2066c4e5b245fc674397fa63afce12ded9e7c1fd1b09a6a59585ee1c1265"
                },
                "downloads": -1,
                "filename": "ckanext-iiif-3.0.0.tar.gz",
                "has_sig": false,
                "md5_digest": "6f85ea9eef2cfcd16225bf6fa00f2f01",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.6",
                "size": 31327,
                "upload_time": "2022-11-28T10:21:50",
                "upload_time_iso_8601": "2022-11-28T10:21:50.815026Z",
                "url": "https://files.pythonhosted.org/packages/ea/56/e5c952922a7c67ac32541130f73982fdb11f028a1de0b6f98c1a42d5d7ec/ckanext-iiif-3.0.0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}