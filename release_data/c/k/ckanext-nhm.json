{
    "3.7.1": {
        "info": {
            "author": "Natural History Museum",
            "author_email": "data@nhm.ac.uk",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 5 - Production/Stable",
                "License :: OSI Approved :: GNU General Public License v3 (GPLv3)",
                "Programming Language :: Python",
                "Programming Language :: Python :: 3 :: Only",
                "Programming Language :: Python :: 3.6",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8"
            ],
            "description": "<img src=\".github/nhm-logo.svg\" align=\"left\" width=\"150px\" height=\"100px\" hspace=\"40\"/>\n\n# ckanext-nhm\n\n[![Tests](https://img.shields.io/github/workflow/status/NaturalHistoryMuseum/ckanext-nhm/Tests?style=flat-square)](https://github.com/NaturalHistoryMuseum/ckanext-nhm/actions/workflows/main.yml)\n[![Coveralls](https://img.shields.io/coveralls/github/NaturalHistoryMuseum/ckanext-nhm/master.svg?style=flat-square)](https://coveralls.io/github/NaturalHistoryMuseum/ckanext-nhm)\n[![CKAN](https://img.shields.io/badge/ckan-2.9.1-orange.svg?style=flat-square)](https://github.com/ckan/ckan)\n[![Python](https://img.shields.io/badge/python-3.6%20%7C%203.7%20%7C%203.8-blue.svg?style=flat-square)](https://www.python.org/)\n[![Specimen records](https://img.shields.io/badge/dynamic/json.svg?color=brightgreen&label=specimens&query=%24.result.total&suffix=%20records&url=https%3A%2F%2Fdata.nhm.ac.uk%2Fapi%2F3%2Faction%2Fdatastore_search%3Fresource_id%3D05ff2255-c38a-40c9-b657-4ccb55ab2feb&style=flat-square)](https://data.nhm.ac.uk/dataset/collection-specimens/resource/05ff2255-c38a-40c9-b657-4ccb55ab2feb)\n\n_A CKAN extension for the Natural History Museum's Data Portal._\n\n\n# Overview\n\nThis extension provides theming and specific functionality for the Natural History Museum's [Data Portal](https://data.nhm.ac.uk).\n\nThe codebase shows how to implement various plugins created by the Museum's developers; notably our new [ElasticSearch datastore](https://github.com/NaturalHistoryMuseum/ckanext-versioned-datastore) with versioned records.\n\n\n# Installation\n\nInstallation is not going to be useful for anyone not working on the Data Portal, but the steps are left here for reference.\n\nPath variables used below:\n- `$INSTALL_FOLDER` (i.e. where CKAN is installed), e.g. `/usr/lib/ckan/default`\n- `$CONFIG_FILE`, e.g. `/etc/ckan/default/development.ini`\n\n1. Clone the repository into the `src` folder:\n\n  ```bash\n  cd $INSTALL_FOLDER/src\n  git clone https://github.com/NaturalHistoryMuseum/ckanext-nhm.git\n  ```\n\n2. Activate the virtual env:\n\n  ```bash\n  . $INSTALL_FOLDER/bin/activate\n  ```\n\n3. Install the requirements from requirements.txt:\n\n  ```bash\n  cd $INSTALL_FOLDER/src/ckanext-nhm\n  pip install -r requirements.txt\n  ```\n\n4. Run setup.py:\n\n  ```bash\n  cd $INSTALL_FOLDER/src/ckanext-nhm\n  python setup.py develop\n  ```\n\n5. Add 'nhm' to the list of plugins in your `$CONFIG_FILE`:\n\n  ```ini\n  ckan.plugins = ... nhm\n  ```\n\n# Configuration\n\nThese are the options that can be specified in to configure this extension.\n\n## **[REQUIRED]**\n\nName|Description|Options\n--|--|--\n`ckanext.nhm.specimen_resource_id`|ID for the specimens dataset|\n`ckanext.nhm.indexlot_resource_id`|ID for the index lots dataset|\n`ckanext.nhm.artefact_resource_id`|ID for the artefacts dataset|\n`ckanext.nhm.abyssline_resource_id`|ID for the abyssline dataset|\n\n\n# Usage\n\n## Actions\n\n### `record_show`\nRetrieve an individual record.\n\n```python\nfrom ckan.plugins import toolkit\n\ndata_dict = {\n                'resource_id': RESOURCE_ID,\n                'record_id': RECORD_ID,\n                'version': OPTIONAL_RECORD_VERSION\n            }\n\ntoolkit.get_action('record_show')(\n    context,\n    data_dict\n)\n```\n\n### `object_rdf`\nGet record RDF from its occurrence ID.\n\n```python\nfrom ckan.plugins import toolkit\n\ndata_dict = {\n                'uuid': OCCURRENCE_ID,\n                'version': OPTIONAL_RECORD_VERSION\n            }\n\ntoolkit.get_action('object_rdf')(\n    context,\n    data_dict\n)\n```\n\n## Commands\n\n### `create-dataset-vocabulary`\nEnsures the default dataset vocabulary and categories exists.\n\n```bash\nckan -c $CONFIG_FILE nhm create-dataset-vocabulary\n```\n\n### `add-dataset-category`\nAdds the given category to the dataset category vocabulary.\n\n```bash\nckan -c $CONFIG_FILE nhm delete-dataset-category $NAME\n```\n\n### `delete-dataset-category`\nDeletes the given dataset category from the vocabulary.\n\n```bash\nckan -c $CONFIG_FILE nhm create-dataset-vocabulary $NAME\n```\n\n### `replace-resource-file`\nReplaces the file associated with `$RESOURCE_ID` with `$PATH`, e.g. to replace a small dummy file\nwith a large one that was too big to upload initially.\n\n```bash\nckan -c $CONFIG_FILE nhm replace-resource-file $RESOURCE_ID $PATH\n```\n\n\n# Testing\n_Test coverage is currently super duper extremely limited._\n\nTo run the tests in this extension, there is a Docker compose configuration available in this\nrepository to make it easy.\n\nTo run the tests against ckan 2.9.x on Python3:\n\n1. Build the required images\n```bash\ndocker-compose build\n```\n\n2. Then run the tests.\n   The root of the repository is mounted into the ckan container as a volume by the Docker compose\n   configuration, so you should only need to rebuild the ckan image if you change the extension's\n   dependencies.\n```bash\ndocker-compose run ckan\n```\n\nThe ckan image uses the Dockerfile in the `docker/` folder which is based on `openknowledge/ckan-dev:2.9`.\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/NaturalHistoryMuseum/ckanext-nhm",
            "keywords": "CKAN data nhm",
            "license": "GNU GPLv3",
            "maintainer": "",
            "maintainer_email": "",
            "name": "ckanext-nhm",
            "package_url": "https://pypi.org/project/ckanext-nhm/",
            "platform": null,
            "project_url": "https://pypi.org/project/ckanext-nhm/",
            "project_urls": {
                "Homepage": "https://github.com/NaturalHistoryMuseum/ckanext-nhm"
            },
            "release_url": "https://pypi.org/project/ckanext-nhm/3.7.1/",
            "requires_dist": [
                "lxml (>=4.4.2)",
                "elasticsearch-dsl (<7.0.0,>=6.0.0)",
                "cachetools (>=4.2.4)",
                "ckanext-dcat",
                "ckanext-ckanpackager",
                "ckanext-contact",
                "ckanext-doi",
                "ckanext-gallery",
                "ckanext-gbif",
                "ckanext-graph",
                "ckanext-ldap",
                "ckanext-query-dois",
                "ckanext-statistics",
                "ckanext-versioned-datastore"
            ],
            "requires_python": "",
            "summary": "A CKAN extension for the Natural History Museum's Data Portal.",
            "version": "3.7.1",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 15778046,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "18d2aac14c475f6997f09b92fdbea09e",
                    "sha256": "a8bb264a1dacb0c90adb1452bdd829c9cedee1d7838bdc15cabec257c4659b04"
                },
                "downloads": -1,
                "filename": "ckanext_nhm-3.7.1-py3.10.egg",
                "has_sig": false,
                "md5_digest": "18d2aac14c475f6997f09b92fdbea09e",
                "packagetype": "bdist_egg",
                "python_version": "3.7.1",
                "requires_python": null,
                "size": 32763173,
                "upload_time": "2022-11-15T16:10:14",
                "upload_time_iso_8601": "2022-11-15T16:10:14.285100Z",
                "url": "https://files.pythonhosted.org/packages/87/89/4883c7b0c8ac0d8b509b13afac1524580d4c594c95ffa52b1e81837c744e/ckanext_nhm-3.7.1-py3.10.egg",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "fe709a1be79c38bd26fa5ca091ea67ce",
                    "sha256": "17941c2b36802eb11e1b4fa53fb114c584b3fa472dba5ab9c6f9af0517c01bbb"
                },
                "downloads": -1,
                "filename": "ckanext_nhm-3.7.1-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "fe709a1be79c38bd26fa5ca091ea67ce",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": null,
                "size": 32844127,
                "upload_time": "2022-11-15T16:09:46",
                "upload_time_iso_8601": "2022-11-15T16:09:46.702119Z",
                "url": "https://files.pythonhosted.org/packages/42/a9/5b35335bae52fe25989840afcccb026551054f53fe6aacb93baa69e8a043/ckanext_nhm-3.7.1-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "9d122aaaf1762daa6f722bd1c741d7f2",
                    "sha256": "5810aad1bbeedef1e1d01cbb766390fd7501b2cc7d8dd27b6d11c3167185a4b1"
                },
                "downloads": -1,
                "filename": "ckanext-nhm-3.7.1.tar.gz",
                "has_sig": false,
                "md5_digest": "9d122aaaf1762daa6f722bd1c741d7f2",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": null,
                "size": 32145481,
                "upload_time": "2022-11-15T16:10:40",
                "upload_time_iso_8601": "2022-11-15T16:10:40.821870Z",
                "url": "https://files.pythonhosted.org/packages/b3/0a/540b92e0ee1fb88ce60a5da687e9763f9f1ad47a1ed4214e1649517c127b/ckanext-nhm-3.7.1.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}